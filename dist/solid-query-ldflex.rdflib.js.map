{"version":3,"sources":["webpack://solid.data/webpack/bootstrap","webpack://solid.data/./node_modules/@rdfjs/data-model/index.js","webpack://solid.data/./node_modules/jsonld-context-parser/index.js","webpack://solid.data/external [\"solid\",\"auth\"]","webpack://solid.data/external \"$rdf\"","webpack://solid.data/./node_modules/jsonld-context-parser/lib/ErrorCoded.js","webpack://solid.data/./node_modules/relative-to-absolute-iri/index.js","webpack://solid.data/./node_modules/jsonld-context-parser/lib/Util.js","webpack://solid.data/./node_modules/jsonld-context-parser/lib/ContextParser.js","webpack://solid.data/./node_modules/cross-fetch/dist/browser-polyfill.js","webpack://solid.data/./node_modules/jsonld-context-parser/lib/FetchDocumentLoader.js","webpack://solid.data/./node_modules/jsonld-context-parser/lib/JsonLdContextNormalized.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/default-graph.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/named-node.js","webpack://solid.data/./node_modules/relative-to-absolute-iri/lib/Resolve.js","webpack://solid.data/./node_modules/http-link-header/lib/link.js","webpack://solid.data/./node_modules/buffer/index.js","webpack://solid.data/(webpack)/buildin/global.js","webpack://solid.data/./node_modules/base64-js/index.js","webpack://solid.data/./node_modules/ieee754/index.js","webpack://solid.data/./node_modules/isarray/index.js","webpack://solid.data/./node_modules/canonicalize/lib/canonicalize.js","webpack://solid.data/./node_modules/jsonld-context-parser/lib/IDocumentLoader.js","webpack://solid.data/./node_modules/jsonld-context-parser/lib/JsonLdContext.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/data-factory.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/blank-node.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/literal.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/quad.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/variable.js","webpack://solid.data/./node_modules/ldflex/module/iterableUtils.js","webpack://solid.data/./node_modules/ldflex/module/DataHandler.js","webpack://solid.data/./node_modules/ldflex/module/promiseUtils.js","webpack://solid.data/./node_modules/ldflex/module/valueUtils.js","webpack://solid.data/./node_modules/ldflex/module/MutationFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/DeleteFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/PreloadHandler.js","webpack://solid.data/./node_modules/ldflex/module/SortHandler.js","webpack://solid.data/./node_modules/ldflex/module/SparqlHandler.js","webpack://solid.data/./node_modules/ldflex/module/defaultHandlers.js","webpack://solid.data/./node_modules/ldflex/module/ThenHandler.js","webpack://solid.data/./node_modules/ldflex/module/AsyncIteratorHandler.js","webpack://solid.data/./node_modules/ldflex/module/GetFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/SubjectHandler.js","webpack://solid.data/./node_modules/ldflex/module/PredicateHandler.js","webpack://solid.data/./node_modules/ldflex/module/PropertiesHandler.js","webpack://solid.data/./node_modules/ldflex/module/PredicatesHandler.js","webpack://solid.data/./node_modules/ldflex/module/PathExpressionHandler.js","webpack://solid.data/./node_modules/ldflex/module/SubjectsHandler.js","webpack://solid.data/./node_modules/ldflex/module/ExecuteQueryHandler.js","webpack://solid.data/./node_modules/ldflex/module/MutationExpressionsHandler.js","webpack://solid.data/./node_modules/ldflex/module/InsertFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/SetFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/ReplaceFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/ToArrayHandler.js","webpack://solid.data/./node_modules/ldflex/module/StringToLDflexHandler.js","webpack://solid.data/./node_modules/ldflex/module/PathProxy.js","webpack://solid.data/./node_modules/ldflex/module/JSONLDResolver.js","webpack://solid.data/./node_modules/ldflex/module/PathFactory.js","webpack://solid.data/./src/handlers/ActivityHandler.js","webpack://solid.data/./src/util.js","webpack://solid.data/./node_modules/uuid/dist/esm-browser/rng.js","webpack://solid.data/./node_modules/uuid/dist/esm-browser/bytesToUuid.js","webpack://solid.data/./node_modules/uuid/dist/esm-browser/v4.js","webpack://solid.data/./src/handlers/CreateActivityHandler.js","webpack://solid.data/./src/handlers/DeleteActivityHandler.js","webpack://solid.data/./src/resolvers/SubjectPathResolver.js","webpack://solid.data/./src/handlers/SourcePathHandler.js","webpack://solid.data/./src/handlers/UserPathHandler.js","webpack://solid.data/./src/RootPath.js","webpack://solid.data/./src/resolvers/ContextResolver.js","webpack://solid.data/./src/handlers/PutHandler.js","webpack://solid.data/./src/handlers/SolidDeleteFunctionHandler.js","webpack://solid.data/./src/handlers/FindActivityHandler.js","webpack://solid.data/./src/SolidUpdateEngine.js","webpack://solid.data/./node_modules/@ldflex/rdflib/src/index.js","webpack://solid.data/./node_modules/@ldflex/rdflib/src/RdflibQueryEngine.js","webpack://solid.data/./src/exports/rdflib.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","DataFactory","__createBinding","this","k","k2","undefined","__exportStar","solid","$rdf","ERROR_CODES","ErrorCoded","Error","message","code","super","__export","Util","term","indexOf","context","separatorPos","length","charAt","prefix","substr","contextValue","id","options","isPotentialKeyword","allowPrefixNonGenDelims","isPrefixIriEndingWithGenDelim","keyword","KEYWORD_REGEX","test","prefixIri","ENDS_WITH_GEN_DELIM","iri","IRI_REGEX","IRI_REGEX_WEAK","VALID_KEYWORDS","keys","isTermProtected","startsWith","REGEX_LANGUAGE_TAG","REGEX_DIRECTION_TAG","EXPAND_KEYS_BLACKLIST","ALIAS_DOMAIN_BLACKLIST","ALIAS_RANGE_BLACKLIST","CONTAINERS","CONTAINERS_1_0","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","defaultExpandOptions","ContextParser","relative_to_absolute_iri_1","ErrorCoded_1","FetchDocumentLoader_1","JsonLdContextNormalized_1","Util_1","canonicalizeJson","documentLoader","FetchDocumentLoader","documentCache","validateContext","skipValidation","expandContentTypeToBase","remoteContextsDepthLimit","redirectSchemaOrgHttps","strictRange","errorCode","JSON","stringify","strictValues","INVALID_BASE_DIRECTION","isValidKeyword","INVALID_IRI_MAPPING","contextRaw","getContextRaw","isReservedInternalKeyword","keyValue","KEYWORD_REDEFINITION","getContextValueId","INVALID_KEYWORD_ALIAS","INVALID_TERM_DEFINITION","isPrefixValue","changed","expandTerm","type","canAddIdEntry","isValidIri","newId","processingMode","normalizeLanguageTags","toLowerCase","Array","isArray","newValue","containerValue","contextBefore","contextAfter","expandOptions","isPrefix","isSimpleTermDefinitionPrefix","valueBefore","PROTECTED_TERM_REDEFINITION","valueType","INVALID_VOCAB_MAPPING","INVALID_BASE_IRI","validateLanguage","INVALID_DEFAULT_LANGUAGE","INVALID_VERSION_VALUE","validateDirection","INVALID_CONTEXT_ENTRY","INVALID_PROPAGATE_VALUE","getPrefix","CYCLIC_IRI_MAPPING","isValidIriWeak","JsonLdContextNormalized","isCompactIri","objectKey","objectValue","INVALID_TYPE_MAPPING","INVALID_REVERSE_PROPERTY","join","INVALID_CONTAINER_MAPPING","INVALID_LANGUAGE_MAPPING","INVALID_PREFIX_VALUE","INVALID_NEST_VALUE","inheritFromParent","parentContext","baseIRI","external","contextIri","assign","parse","ignoreProtection","ignoreRemoteScopedContexts","INVALID_SCOPED_CONTEXT","minimalProcessing","DEFAULT_PROCESSING_MODE","parentContextInitial","remoteContexts","CONTEXT_OVERFLOW","hasProtectedTerms","INVALID_CONTEXT_NULLIFICATION","applyBaseEntry","normalizeContextIri","overriddenLoad","getOverriddenLoad","parsedStringContext","load","contextIris","contexts","all","map","subContext","reducedContexts","reduce","accContextPromise","contextEntry","accContext","newContext","containersToHash","importContext","INVALID_IMPORT_VALUE","loadImportContext","newContextWrapped","parseInnerContexts","validateKeywordRedefinitions","idifyReverseTerms","expandPrefixedTerms","normalize","applyScopedProtected","validate","INVALID_LOCAL_CONTEXT","url","cached","slice","document","LOADING_REMOTE_CONTEXT_FAILED","INVALID_REMOTE_CONTEXT","RECURSIVE_CONTEXT_INCLUSION","importContextIri","allowPrefixForcing","allowVocabRelativeToBase","self","support","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","toString","normalizeName","String","TypeError","normalizeValue","iteratorFor","items","iterator","shift","Headers","headers","forEach","append","header","getOwnPropertyNames","consumed","body","bodyUsed","fileReaderReady","reader","onload","onerror","error","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","arrayBuffer","text","readAsText","chars","fromCharCode","readArrayBufferAsText","formData","decode","json","oldValue","has","callback","push","values","entries","methods","Request","input","method","upcased","credentials","signal","toUpperCase","referrer","form","trim","split","bytes","replace","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","DOMException","err","stack","constructor","fetch","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","http_link_header_1","fetcher","accept","mediaType","colonPos","alternateUrl","linkHeader","link","rel","uri","LOADING_DOCUMENT_FAILED","ContextParser_1","expandVocab","validIriMapping","vocab","vocabRelative","base","potentialKeyword","contextPrefixValue","shortestPrefixing","suffix","DefaultGraph","equals","other","termType","NamedNode","removeDotSegments","path","segmentBuffers","isCharacterAllowedAfterRelativePathSegment","pop","removeDotSegmentsOfPath","colonPosition","searchOffset","pathSeparator","character","relativeIRI","baseFragmentPos","baseQueryPos","relativeColonPos","valueColonPos","baseColonPos","baseIRIScheme","baseSlashAfterColonPos","baseIRIPath","baseIRILastSlashPos","lastIndexOf","COMPATIBLE_ENCODING_PATTERN","WS_TRIM_PATTERN","WS_CHAR_PATTERN","WS_FOLD_PATTERN","DELIMITER_PATTERN","WS_DELIMITER_PATTERN","STATE","hasWhitespace","skipWhitespace","offset","needsQuotes","Link","refs","links","attr","state","ref","end","attrValue","isSingleOccurenceAttr","parseExtendedValue","formatAttribute","isCompatibleEncoding","isTokenAttr","escapeQuotes","exec","language","encoding","formatExtendedAttribute","data","Buffer","isBuffer","encodeURIComponent","item","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","__proto__","arg","encodingOrOffset","allocUnsafe","from","array","byteOffset","fromArrayLike","fromArrayBuffer","string","isEncoding","actual","write","fromString","len","checked","copy","val","fromObject","assertSize","size","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","arr","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","utf8Write","blitBuffer","asciiWrite","str","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","concat","list","pos","swap16","swap32","swap64","arguments","inspect","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","src","dst","g","Function","window","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","num","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","log","LN2","serialize","cv","ci","sort","BlankNode","Literal","Quad","Variable","namedNode","blankNode","literal","languageOrDatatype","defaultGraph","defaultGraphInstance","variable","triple","subject","predicate","quad","graph","nextId","datatype","stringDatatype","langStringDatatype","async","iterableToArray","iterable","getFirstItem","asyncIterator","DataHandler","dataProperties","_isAsync","_isFunction","function","_dataProperties","pathData","_resolveDataPath","_resolveAsyncDataPath","_resolveSyncDataPath","lazyThenable","createPromise","getThen","onResolved","onRejected","toIterablePromise","cache","memoizeIterable","finally","xsd","xsdBoolean","xsdDateTime","xsdDecimal","xsdDouble","xsdInteger","xsdBooleanTerm","xsdDateTimeTerm","xsdDecimalTerm","xsdDoubleTerm","xsdIntegerTerm","xsdTrue","xsdFalse","xsdNaN","xsdInf","xsdMinusInf","xsdPrimitives","isAsyncIterable","isPlainObject","Date","hasPlainObjectArgs","args","allowMultiple","hasPlainObject","some","valueToTerm","isInteger","toISOString","mutationType","allowZeroArgs","_mutationType","_allowZeroArgs","mutationExpressions","createMutationExpressions","extendPath","createMutationExpression","pairs","expressions","predicateObjects","arrays","conditions","pathExpression","reverse","objects","extractObjects","VARIABLE","QUERY_TAIL","hashTerm","SortHandler","order","pathProxy","properties","rest","childData","childPath","NEEDS_ESCAPE","ESCAPE_ALL","ESCAPED_CHARS","SparqlHandler","mutationExpressionToQuery","filter","Boolean","pathExpressionToQuery","finalClause","queryVar","sorts","clauses","createVar","expressionToTriplePatterns","select","distinct","where","orderClauses","scope","termToString","lastPredicate","mutations","objectStrings","triplePatterns","mutationClauses","root","lastVar","lastIndex","skolemized","skolemId","skolemize","allowValues","segment","index","suggestion","counter","label","escapeCharacter","subjectString","predicateTerm","subjectStrings","results","readProperties","wrapSingleValues","parent","_handle","settings","parsedContext","predicates","compactIri","segments","current","unshift","sparql","subjects","resultsCache","queryEngine","query","bindings","execute","extractTerm","binding","sortDesc","preload","createResultsCache","vars","resultVar","createQuery","propertyCaches","hash","propertyCache","resultData","valuePath","parentQuery","variableMatch","preloadClauses","add","previousPath","delete","newValues","termPropertyHandler","canonical","sync","syncFunction","valueOf","subjectToPrimitiveHandler","toPrimitive","toArray","termTypes","handler","_","datatypes","languages","expression","ldflex","evaluator","handle","parseFloat","termToPrimitive","EMPTY","PathProxy","handlers","resolvers","_handlers","_resolvers","rawData","proxy","Proxy","newData","createPath","resolver","supports","_context","extendContext","expandProperty","getResultsCache","expandedProperty","_settings","_data","defaultHandlers","toHandler","getOwnPropertySymbols","toResolver","_pathProxy","as","ActivityHandler","activitiesPath","requireUser","user","storage","pim$storage","URL","href","actor","activity","createResults","processResults","replaceVariables","template","terms","RegExp","asList","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bth","rnds","random","ii","components","SubjectPathResolver","pathFactory","source","_paths","_source","_createSubjectPath","createQueryEngine","catch","SourcePathHandler","PathFactory","UserPathHandler","getWebId","session","auth","currentSession","webId","contextResolver","JSONLDResolver","exposedContext","_exposedContext","ctx","subjectHandlers","put","contentType","urls","Set","requests","DeleteFunctionHandler","existing","findActivity","likes","dislikes","follows","createActivity","uuidv4","insert","published","executeUpdate","like","dislike","follow","deleteActivity","unlike","undislike","unfollow","SolidUpdateEngine","sources","baseEngine","getUpdateSource","_engine","clearCache","return","noop","throw","defaultSources","_defaultStore","readSources","store","v","Map","sourceList","addQuad","finish","removeListener","on","defaultSettings","rootPath","subjectPathFactory","doc","RdflibQueryEngine"],"mappings":"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","file":"solid-query-ldflex.rdflib.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","var DataFactory = require('./lib/data-factory')\n\nmodule.exports = DataFactory\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/ContextParser\"), exports);\n__exportStar(require(\"./lib/ErrorCoded\"), exports);\n__exportStar(require(\"./lib/FetchDocumentLoader\"), exports);\n__exportStar(require(\"./lib/IDocumentLoader\"), exports);\n__exportStar(require(\"./lib/JsonLdContext\"), exports);\n__exportStar(require(\"./lib/JsonLdContextNormalized\"), exports);\n__exportStar(require(\"./lib/Util\"), exports);\n//# sourceMappingURL=index.js.map","module.exports = solid[\"auth\"];","module.exports = $rdf;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ERROR_CODES = exports.ErrorCoded = void 0;\n/**\n * An error that has a certain error code.\n *\n * The error code can be any string.\n * All standardized error codes are listed in {@link ERROR_CODES}.\n */\nclass ErrorCoded extends Error {\n    /* istanbul ignore next */\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nexports.ErrorCoded = ErrorCoded;\n/**\n * All standardized JSON-LD error codes.\n * @see https://w3c.github.io/json-ld-api/#dom-jsonlderrorcode\n */\n// tslint:disable:object-literal-sort-keys\nvar ERROR_CODES;\n(function (ERROR_CODES) {\n    ERROR_CODES[\"COLLIDING_KEYWORDS\"] = \"colliding keywords\";\n    ERROR_CODES[\"CONFLICTING_INDEXES\"] = \"conflicting indexes\";\n    ERROR_CODES[\"CYCLIC_IRI_MAPPING\"] = \"cyclic IRI mapping\";\n    ERROR_CODES[\"INVALID_ID_VALUE\"] = \"invalid @id value\";\n    ERROR_CODES[\"INVALID_INDEX_VALUE\"] = \"invalid @index value\";\n    ERROR_CODES[\"INVALID_NEST_VALUE\"] = \"invalid @nest value\";\n    ERROR_CODES[\"INVALID_PREFIX_VALUE\"] = \"invalid @prefix value\";\n    ERROR_CODES[\"INVALID_PROPAGATE_VALUE\"] = \"invalid @propagate value\";\n    ERROR_CODES[\"INVALID_REVERSE_VALUE\"] = \"invalid @reverse value\";\n    ERROR_CODES[\"INVALID_IMPORT_VALUE\"] = \"invalid @import value\";\n    ERROR_CODES[\"INVALID_VERSION_VALUE\"] = \"invalid @version value\";\n    ERROR_CODES[\"INVALID_BASE_IRI\"] = \"invalid base IRI\";\n    ERROR_CODES[\"INVALID_CONTAINER_MAPPING\"] = \"invalid container mapping\";\n    ERROR_CODES[\"INVALID_CONTEXT_ENTRY\"] = \"invalid context entry\";\n    ERROR_CODES[\"INVALID_CONTEXT_NULLIFICATION\"] = \"invalid context nullification\";\n    ERROR_CODES[\"INVALID_DEFAULT_LANGUAGE\"] = \"invalid default language\";\n    ERROR_CODES[\"INVALID_INCLUDED_VALUE\"] = \"invalid @included value\";\n    ERROR_CODES[\"INVALID_IRI_MAPPING\"] = \"invalid IRI mapping\";\n    ERROR_CODES[\"INVALID_JSON_LITERAL\"] = \"invalid JSON literal\";\n    ERROR_CODES[\"INVALID_KEYWORD_ALIAS\"] = \"invalid keyword alias\";\n    ERROR_CODES[\"INVALID_LANGUAGE_MAP_VALUE\"] = \"invalid language map value\";\n    ERROR_CODES[\"INVALID_LANGUAGE_MAPPING\"] = \"invalid language mapping\";\n    ERROR_CODES[\"INVALID_LANGUAGE_TAGGED_STRING\"] = \"invalid language-tagged string\";\n    ERROR_CODES[\"INVALID_LANGUAGE_TAGGED_VALUE\"] = \"invalid language-tagged value\";\n    ERROR_CODES[\"INVALID_LOCAL_CONTEXT\"] = \"invalid local context\";\n    ERROR_CODES[\"INVALID_REMOTE_CONTEXT\"] = \"invalid remote context\";\n    ERROR_CODES[\"INVALID_REVERSE_PROPERTY\"] = \"invalid reverse property\";\n    ERROR_CODES[\"INVALID_REVERSE_PROPERTY_MAP\"] = \"invalid reverse property map\";\n    ERROR_CODES[\"INVALID_REVERSE_PROPERTY_VALUE\"] = \"invalid reverse property value\";\n    ERROR_CODES[\"INVALID_SCOPED_CONTEXT\"] = \"invalid scoped context\";\n    ERROR_CODES[\"INVALID_SCRIPT_ELEMENT\"] = \"invalid script element\";\n    ERROR_CODES[\"INVALID_SET_OR_LIST_OBJECT\"] = \"invalid set or list object\";\n    ERROR_CODES[\"INVALID_TERM_DEFINITION\"] = \"invalid term definition\";\n    ERROR_CODES[\"INVALID_TYPE_MAPPING\"] = \"invalid type mapping\";\n    ERROR_CODES[\"INVALID_TYPE_VALUE\"] = \"invalid type value\";\n    ERROR_CODES[\"INVALID_TYPED_VALUE\"] = \"invalid typed value\";\n    ERROR_CODES[\"INVALID_VALUE_OBJECT\"] = \"invalid value object\";\n    ERROR_CODES[\"INVALID_VALUE_OBJECT_VALUE\"] = \"invalid value object value\";\n    ERROR_CODES[\"INVALID_VOCAB_MAPPING\"] = \"invalid vocab mapping\";\n    ERROR_CODES[\"IRI_CONFUSED_WITH_PREFIX\"] = \"IRI confused with prefix\";\n    ERROR_CODES[\"KEYWORD_REDEFINITION\"] = \"keyword redefinition\";\n    ERROR_CODES[\"LOADING_DOCUMENT_FAILED\"] = \"loading document failed\";\n    ERROR_CODES[\"LOADING_REMOTE_CONTEXT_FAILED\"] = \"loading remote context failed\";\n    ERROR_CODES[\"MULTIPLE_CONTEXT_LINK_HEADERS\"] = \"multiple context link headers\";\n    ERROR_CODES[\"PROCESSING_MODE_CONFLICT\"] = \"processing mode conflict\";\n    ERROR_CODES[\"PROTECTED_TERM_REDEFINITION\"] = \"protected term redefinition\";\n    ERROR_CODES[\"CONTEXT_OVERFLOW\"] = \"context overflow\";\n    ERROR_CODES[\"INVALID_BASE_DIRECTION\"] = \"invalid base direction\";\n    ERROR_CODES[\"RECURSIVE_CONTEXT_INCLUSION\"] = \"recursive context inclusion\";\n    ERROR_CODES[\"INVALID_STREAMING_KEY_ORDER\"] = \"invalid streaming key order\";\n})(ERROR_CODES = exports.ERROR_CODES || (exports.ERROR_CODES = {}));\n//# sourceMappingURL=ErrorCoded.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/Resolve\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Util = void 0;\nclass Util {\n    /**\n     * Check if the given term is a valid compact IRI.\n     * Otherwise, it may be an IRI.\n     * @param {string} term A term.\n     * @return {boolean} If it is a compact IRI.\n     */\n    static isCompactIri(term) {\n        return term.indexOf(':') > 0 && !(term && term[0] === '#');\n    }\n    /**\n     * Get the prefix from the given term.\n     * @see https://json-ld.org/spec/latest/json-ld/#compact-iris\n     * @param {string} term A term that is an URL or a prefixed URL.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @return {string} The prefix or null.\n     */\n    static getPrefix(term, context) {\n        // Do not consider relative IRIs starting with a hash as compact IRIs\n        if (term && term[0] === '#') {\n            return null;\n        }\n        const separatorPos = term.indexOf(':');\n        if (separatorPos >= 0) {\n            // Suffix can not begin with two slashes\n            if (term.length > separatorPos + 1\n                && term.charAt(separatorPos + 1) === '/'\n                && term.charAt(separatorPos + 2) === '/') {\n                return null;\n            }\n            const prefix = term.substr(0, separatorPos);\n            // Prefix can not be an underscore (this is a blank node)\n            if (prefix === '_') {\n                return null;\n            }\n            // Prefix must match a term in the active context\n            if (context[prefix]) {\n                return prefix;\n            }\n        }\n        return null;\n    }\n    /**\n     * From a given context entry value, get the string value, or the @id field.\n     * @param contextValue A value for a term in a context.\n     * @return {string} The id value, or null.\n     */\n    static getContextValueId(contextValue) {\n        if (contextValue === null || typeof contextValue === 'string') {\n            return contextValue;\n        }\n        const id = contextValue['@id'];\n        return id ? id : null;\n    }\n    /**\n     * Check if the given simple term definition (string-based value of a context term)\n     * should be considered a prefix.\n     * @param value A simple term definition value.\n     * @param options Options that define the way how expansion must be done.\n     */\n    static isSimpleTermDefinitionPrefix(value, options) {\n        return !Util.isPotentialKeyword(value)\n            && (value[0] === '_' || options.allowPrefixNonGenDelims || Util.isPrefixIriEndingWithGenDelim(value));\n    }\n    /**\n     * Check if the given keyword is of the keyword format \"@\"1*ALPHA.\n     * @param {string} keyword A potential keyword.\n     * @return {boolean} If the given keyword is of the keyword format.\n     */\n    static isPotentialKeyword(keyword) {\n        return typeof keyword === 'string' && Util.KEYWORD_REGEX.test(keyword);\n    }\n    /**\n     * Check if the given prefix ends with a gen-delim character.\n     * @param {string} prefixIri A prefix IRI.\n     * @return {boolean} If the given prefix IRI is valid.\n     */\n    static isPrefixIriEndingWithGenDelim(prefixIri) {\n        return Util.ENDS_WITH_GEN_DELIM.test(prefixIri);\n    }\n    /**\n     * Check if the given context value can be a prefix value.\n     * @param value A context value.\n     * @return {boolean} If it can be a prefix value.\n     */\n    static isPrefixValue(value) {\n        return value && (typeof value === 'string' || (value && typeof value === 'object'));\n    }\n    /**\n     * Check if the given IRI is valid.\n     * @param {string} iri A potential IRI.\n     * @return {boolean} If the given IRI is valid.\n     */\n    static isValidIri(iri) {\n        return Util.IRI_REGEX.test(iri);\n    }\n    /**\n     * Check if the given IRI is valid, this includes the possibility of being a relative IRI.\n     * @param {string} iri A potential IRI.\n     * @return {boolean} If the given IRI is valid.\n     */\n    static isValidIriWeak(iri) {\n        return !!iri && iri[0] !== ':' && Util.IRI_REGEX_WEAK.test(iri);\n    }\n    /**\n     * Check if the given keyword is a defined according to the JSON-LD specification.\n     * @param {string} keyword A potential keyword.\n     * @return {boolean} If the given keyword is valid.\n     */\n    static isValidKeyword(keyword) {\n        return Util.VALID_KEYWORDS[keyword];\n    }\n    /**\n     * Check if the given term is protected in the context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {string} key A context term.\n     * @return {boolean} If the given term has an @protected flag.\n     */\n    static isTermProtected(context, key) {\n        const value = context[key];\n        return !(typeof value === 'string') && value && value['@protected'];\n    }\n    /**\n     * Check if the given context has at least one protected term.\n     * @param context A context.\n     * @return If the context has a protected term.\n     */\n    static hasProtectedTerms(context) {\n        for (const key of Object.keys(context)) {\n            if (Util.isTermProtected(context, key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Check if the given key is an internal reserved keyword.\n     * @param key A context key.\n     */\n    static isReservedInternalKeyword(key) {\n        return key.startsWith('@__');\n    }\n}\nexports.Util = Util;\n// Regex for valid IRIs\nUtil.IRI_REGEX = /^([A-Za-z][A-Za-z0-9+-.]*|_):[^ \"<>{}|\\\\\\[\\]`#]*(#[^#]*)?$/;\n// Weaker regex for valid IRIs, this includes relative IRIs\nUtil.IRI_REGEX_WEAK = /(?::[^:])|\\//;\n// Regex for keyword form\nUtil.KEYWORD_REGEX = /^@[a-z]+$/i;\n// Regex to see if an IRI ends with a gen-delim character (see RFC 3986)\nUtil.ENDS_WITH_GEN_DELIM = /[:/?#\\[\\]@]$/;\n// Regex for language tags\nUtil.REGEX_LANGUAGE_TAG = /^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/;\n// Regex for base directions\nUtil.REGEX_DIRECTION_TAG = /^(ltr)|(rtl)$/;\n// All known valid JSON-LD keywords\n// @see https://www.w3.org/TR/json-ld11/#keywords\nUtil.VALID_KEYWORDS = {\n    '@base': true,\n    '@container': true,\n    '@context': true,\n    '@direction': true,\n    '@graph': true,\n    '@id': true,\n    '@import': true,\n    '@included': true,\n    '@index': true,\n    '@json': true,\n    '@language': true,\n    '@list': true,\n    '@nest': true,\n    '@none': true,\n    '@prefix': true,\n    '@propagate': true,\n    '@protected': true,\n    '@reverse': true,\n    '@set': true,\n    '@type': true,\n    '@value': true,\n    '@version': true,\n    '@vocab': true,\n};\n// Keys in the contexts that will not be expanded based on the base IRI\nUtil.EXPAND_KEYS_BLACKLIST = [\n    '@base',\n    '@vocab',\n    '@language',\n    '@version',\n    '@direction',\n];\n// Keys in the contexts that may not be aliased from\nUtil.ALIAS_DOMAIN_BLACKLIST = [\n    '@container',\n    '@graph',\n    '@id',\n    '@index',\n    '@list',\n    '@nest',\n    '@none',\n    '@prefix',\n    '@reverse',\n    '@set',\n    '@type',\n    '@value',\n    '@version',\n];\n// Keys in the contexts that may not be aliased to\nUtil.ALIAS_RANGE_BLACKLIST = [\n    '@context',\n    '@preserve',\n];\n// All valid @container values\nUtil.CONTAINERS = [\n    '@list',\n    '@set',\n    '@index',\n    '@language',\n    '@graph',\n    '@id',\n    '@type',\n];\n// All valid @container values under processing mode 1.0\nUtil.CONTAINERS_1_0 = [\n    '@list',\n    '@set',\n    '@index',\n];\n//# sourceMappingURL=Util.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultExpandOptions = exports.ContextParser = void 0;\nrequire(\"cross-fetch/polyfill\");\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\nconst ErrorCoded_1 = require(\"./ErrorCoded\");\nconst FetchDocumentLoader_1 = require(\"./FetchDocumentLoader\");\nconst JsonLdContextNormalized_1 = require(\"./JsonLdContextNormalized\");\nconst Util_1 = require(\"./Util\");\n// tslint:disable-next-line:no-var-requires\nconst canonicalizeJson = require('canonicalize');\n/**\n * Parses JSON-LD contexts.\n */\nclass ContextParser {\n    constructor(options) {\n        options = options || {};\n        this.documentLoader = options.documentLoader || new FetchDocumentLoader_1.FetchDocumentLoader();\n        this.documentCache = {};\n        this.validateContext = !options.skipValidation;\n        this.expandContentTypeToBase = !!options.expandContentTypeToBase;\n        this.remoteContextsDepthLimit = options.remoteContextsDepthLimit || 32;\n        this.redirectSchemaOrgHttps = 'redirectSchemaOrgHttps' in options ? !!options.redirectSchemaOrgHttps : true;\n    }\n    /**\n     * Validate the given @language value.\n     * An error will be thrown if it is invalid.\n     * @param value An @language value.\n     * @param {boolean} strictRange If the string value should be strictly checked against a regex.\n     * @param {string} errorCode The error code to emit on errors.\n     * @return {boolean} If validation passed.\n     *                   Can only be false if strictRange is false and the string value did not pass the regex.\n     */\n    static validateLanguage(value, strictRange, errorCode) {\n        if (typeof value !== 'string') {\n            throw new ErrorCoded_1.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(value)}'`, errorCode);\n        }\n        if (!Util_1.Util.REGEX_LANGUAGE_TAG.test(value)) {\n            if (strictRange) {\n                throw new ErrorCoded_1.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(value)}'`, errorCode);\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Validate the given @direction value.\n     * An error will be thrown if it is invalid.\n     * @param value An @direction value.\n     * @param {boolean} strictValues If the string value should be strictly checked against a regex.\n     * @return {boolean} If validation passed.\n     *                   Can only be false if strictRange is false and the string value did not pass the regex.\n     */\n    static validateDirection(value, strictValues) {\n        if (typeof value !== 'string') {\n            throw new ErrorCoded_1.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_BASE_DIRECTION);\n        }\n        if (!Util_1.Util.REGEX_DIRECTION_TAG.test(value)) {\n            if (strictValues) {\n                throw new ErrorCoded_1.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_BASE_DIRECTION);\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Add an @id term for all @reverse terms.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @return {IJsonLdContextNormalizedRaw} The mutated input context.\n     */\n    idifyReverseTerms(context) {\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            if (value && typeof value === 'object') {\n                if (value['@reverse'] && !value['@id']) {\n                    if (typeof value['@reverse'] !== 'string' || Util_1.Util.isValidKeyword(value['@reverse'])) {\n                        throw new ErrorCoded_1.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${value['@reverse']}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                    }\n                    value['@id'] = value['@reverse'];\n                    if (Util_1.Util.isPotentialKeyword(value['@reverse'])) {\n                        delete value['@reverse'];\n                    }\n                    else {\n                        value['@reverse'] = true;\n                    }\n                }\n            }\n        }\n        return context;\n    }\n    /**\n     * Expand all prefixed terms in the given context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {boolean} expandContentTypeToBase If @type inside the context may be expanded\n     *                                          via @base if @vocab is set to null.\n     */\n    expandPrefixedTerms(context, expandContentTypeToBase) {\n        const contextRaw = context.getContextRaw();\n        for (const key of Object.keys(contextRaw)) {\n            // Only expand allowed keys\n            if (Util_1.Util.EXPAND_KEYS_BLACKLIST.indexOf(key) < 0 && !Util_1.Util.isReservedInternalKeyword(key)) {\n                // Error if we try to alias a keyword to something else.\n                const keyValue = contextRaw[key];\n                if (Util_1.Util.isPotentialKeyword(key) && Util_1.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(key) >= 0) {\n                    if (key !== '@type' || typeof contextRaw[key] === 'object'\n                        && !(contextRaw[key]['@protected'] || contextRaw[key]['@container'] === '@set')) {\n                        throw new ErrorCoded_1.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${key} to ${JSON.stringify(keyValue)}`, ErrorCoded_1.ERROR_CODES.KEYWORD_REDEFINITION);\n                    }\n                }\n                // Error if we try to alias to an illegal keyword\n                if (Util_1.Util.ALIAS_RANGE_BLACKLIST.indexOf(Util_1.Util.getContextValueId(keyValue)) >= 0) {\n                    throw new ErrorCoded_1.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${key} to ${JSON.stringify(keyValue)}`, ErrorCoded_1.ERROR_CODES.INVALID_KEYWORD_ALIAS);\n                }\n                // Error if this term was marked as prefix as well\n                if (keyValue && Util_1.Util.isPotentialKeyword(Util_1.Util.getContextValueId(keyValue))\n                    && keyValue['@prefix'] === true) {\n                    throw new ErrorCoded_1.ErrorCoded(`Tried to use keyword aliases as prefix: '${key}': '${JSON.stringify(keyValue)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                }\n                // Loop because prefixes might be nested\n                while (Util_1.Util.isPrefixValue(contextRaw[key])) {\n                    const value = contextRaw[key];\n                    let changed = false;\n                    if (typeof value === 'string') {\n                        contextRaw[key] = context.expandTerm(value, true);\n                        changed = changed || value !== contextRaw[key];\n                    }\n                    else {\n                        const id = value['@id'];\n                        const type = value['@type'];\n                        // If @id is missing, don't allow @id to be added if @prefix: true and key not being a valid IRI.\n                        const canAddIdEntry = !('@prefix' in value) || Util_1.Util.isValidIri(key);\n                        if ('@id' in value) {\n                            // Use @id value for expansion\n                            if (id !== undefined && id !== null && typeof id === 'string') {\n                                contextRaw[key]['@id'] = context.expandTerm(id, true);\n                                changed = changed || id !== contextRaw[key]['@id'];\n                            }\n                        }\n                        else if (!Util_1.Util.isPotentialKeyword(key) && canAddIdEntry) {\n                            // Add an explicit @id value based on the expanded key value\n                            const newId = context.expandTerm(key, true);\n                            if (newId !== key) {\n                                // Don't set @id if expansion failed\n                                contextRaw[key]['@id'] = newId;\n                                changed = true;\n                            }\n                        }\n                        if (type && typeof type === 'string' && type !== '@vocab'\n                            && (!value['@container'] || !value['@container']['@type'])\n                            && canAddIdEntry) {\n                            // First check @vocab, then fallback to @base\n                            contextRaw[key]['@type'] = context.expandTerm(type, true);\n                            if (expandContentTypeToBase && type === contextRaw[key]['@type']) {\n                                contextRaw[key]['@type'] = context.expandTerm(type, false);\n                            }\n                            changed = changed || type !== contextRaw[key]['@type'];\n                        }\n                    }\n                    if (!changed) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Normalize the @language entries in the given context to lowercase.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {IParseOptions} parseOptions The parsing options.\n     */\n    normalize(context, { processingMode, normalizeLanguageTags }) {\n        // Lowercase language keys in 1.0\n        if (normalizeLanguageTags || processingMode === 1.0) {\n            for (const key of Object.keys(context)) {\n                if (key === '@language' && typeof context[key] === 'string') {\n                    context[key] = context[key].toLowerCase();\n                }\n                else {\n                    const value = context[key];\n                    if (value && typeof value === 'object') {\n                        if (typeof value['@language'] === 'string') {\n                            value['@language'] = value['@language'].toLowerCase();\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Convert all @container strings and array values to hash-based values.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     */\n    containersToHash(context) {\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            if (value && typeof value === 'object') {\n                if (typeof value['@container'] === 'string') {\n                    value['@container'] = { [value['@container']]: true };\n                }\n                else if (Array.isArray(value['@container'])) {\n                    const newValue = {};\n                    for (const containerValue of value['@container']) {\n                        newValue[containerValue] = true;\n                    }\n                    value['@container'] = newValue;\n                }\n            }\n        }\n    }\n    /**\n     * Normalize and apply context-levevl @protected terms onto each term separately.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {number} processingMode The processing mode.\n     */\n    applyScopedProtected(context, { processingMode }) {\n        if (processingMode && processingMode >= 1.1) {\n            if (context['@protected']) {\n                for (const key of Object.keys(context)) {\n                    if (Util_1.Util.isReservedInternalKeyword(key)) {\n                        continue;\n                    }\n                    if (!Util_1.Util.isPotentialKeyword(key) && !Util_1.Util.isTermProtected(context, key)) {\n                        const value = context[key];\n                        if (value && typeof value === 'object') {\n                            if (!('@protected' in context[key])) {\n                                // Mark terms with object values as protected if they don't have an @protected: false annotation\n                                context[key]['@protected'] = true;\n                            }\n                        }\n                        else {\n                            // Convert string-based term values to object-based values with @protected: true\n                            context[key] = {\n                                '@id': value,\n                                '@protected': true,\n                            };\n                        }\n                    }\n                }\n                delete context['@protected'];\n            }\n        }\n    }\n    /**\n     * Check if the given context inheritance does not contain any overrides of protected terms.\n     * @param {IJsonLdContextNormalizedRaw} contextBefore The context that may contain some protected terms.\n     * @param {IJsonLdContextNormalizedRaw} contextAfter A new context that is being applied on the first one.\n     * @param {IExpandOptions} expandOptions Options that are needed for any expansions during this validation.\n     */\n    validateKeywordRedefinitions(contextBefore, contextAfter, expandOptions) {\n        for (const key of Object.keys(contextAfter)) {\n            if (Util_1.Util.isTermProtected(contextBefore, key)) {\n                // The entry in the context before will always be in object-mode\n                // If the new entry is in string-mode, convert it to object-mode\n                // before checking if it is identical.\n                if (typeof contextAfter[key] === 'string') {\n                    const isPrefix = Util_1.Util.isSimpleTermDefinitionPrefix(contextAfter[key], expandOptions);\n                    contextAfter[key] = { '@id': contextAfter[key] };\n                    // If the simple term def was a prefix, explicitly mark the term as a prefix in the expanded term definition,\n                    // because otherwise we loose this information due to JSON-LD interpreting prefixes differently\n                    // in simple vs expanded term definitions.\n                    if (isPrefix) {\n                        contextAfter[key]['@prefix'] = true;\n                        contextBefore[key]['@prefix'] = true; // Also on before, to make sure the next step still considers them ==\n                    }\n                }\n                // Convert term values to strings for each comparison\n                const valueBefore = canonicalizeJson(contextBefore[key]);\n                // We modify this deliberately,\n                // as we need it for the value comparison (they must be identical modulo '@protected')),\n                // and for the fact that this new value will override the first one.\n                contextAfter[key]['@protected'] = true;\n                const valueAfter = canonicalizeJson(contextAfter[key]);\n                // Error if they are not identical\n                if (valueBefore !== valueAfter) {\n                    throw new ErrorCoded_1.ErrorCoded(`Attempted to override the protected keyword ${key} from ${JSON.stringify(Util_1.Util.getContextValueId(contextBefore[key]))} to ${JSON.stringify(Util_1.Util.getContextValueId(contextAfter[key]))}`, ErrorCoded_1.ERROR_CODES.PROTECTED_TERM_REDEFINITION);\n                }\n            }\n        }\n    }\n    /**\n     * Validate the entries of the given context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {IParseOptions} options The parse options.\n     */\n    validate(context, { processingMode }) {\n        for (const key of Object.keys(context)) {\n            // Ignore reserved internal keywords.\n            if (Util_1.Util.isReservedInternalKeyword(key)) {\n                continue;\n            }\n            // Do not allow empty term\n            if (key === '') {\n                throw new ErrorCoded_1.ErrorCoded(`The empty term is not allowed, got: '${key}': '${JSON.stringify(context[key])}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n            }\n            const value = context[key];\n            const valueType = typeof value;\n            // First check if the key is a keyword\n            if (Util_1.Util.isPotentialKeyword(key)) {\n                switch (key.substr(1)) {\n                    case 'vocab':\n                        if (value !== null && valueType !== 'string') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @vocab IRI: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_VOCAB_MAPPING);\n                        }\n                        break;\n                    case 'base':\n                        if (value !== null && valueType !== 'string') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @base IRI: ${context[key]}`, ErrorCoded_1.ERROR_CODES.INVALID_BASE_IRI);\n                        }\n                        break;\n                    case 'language':\n                        if (value !== null) {\n                            ContextParser.validateLanguage(value, true, ErrorCoded_1.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);\n                        }\n                        break;\n                    case 'version':\n                        if (value !== null && valueType !== 'number') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @version number: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_VERSION_VALUE);\n                        }\n                        break;\n                    case 'direction':\n                        if (value !== null) {\n                            ContextParser.validateDirection(value, true);\n                        }\n                        break;\n                    case 'propagate':\n                        if (processingMode === 1.0) {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an illegal @propagate keyword: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_ENTRY);\n                        }\n                        if (value !== null && valueType !== 'boolean') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @propagate value: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_PROPAGATE_VALUE);\n                        }\n                        break;\n                }\n                // Don't allow keywords to be overridden\n                if (Util_1.Util.isValidKeyword(key) && Util_1.Util.isValidKeyword(Util_1.Util.getContextValueId(value))) {\n                    throw new ErrorCoded_1.ErrorCoded(`Illegal keyword alias in term value, found: '${key}': '${Util_1.Util\n                        .getContextValueId(value)}'`, ErrorCoded_1.ERROR_CODES.KEYWORD_REDEFINITION);\n                }\n                continue;\n            }\n            // Otherwise, consider the key a term\n            if (value !== null) {\n                switch (valueType) {\n                    case 'string':\n                        if (Util_1.Util.getPrefix(value, context) === key) {\n                            throw new ErrorCoded_1.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${key}': '${JSON\n                                .stringify(value)}'`, ErrorCoded_1.ERROR_CODES.CYCLIC_IRI_MAPPING);\n                        }\n                        if (Util_1.Util.isValidIriWeak(key)) {\n                            if (value === '@type') {\n                                throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to @type, found: '${key}': '${value}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                            }\n                            else if (Util_1.Util.isValidIri(value) && value !== new JsonLdContextNormalized_1.JsonLdContextNormalized(context).expandTerm(key)) {\n                                throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${key}': '${value}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                            }\n                        }\n                        break;\n                    case 'object':\n                        if (!Util_1.Util.isCompactIri(key) && !('@id' in value)\n                            && (value['@type'] === '@id' ? !context['@base'] : !context['@vocab'])) {\n                            throw new ErrorCoded_1.ErrorCoded(`Missing @id in context entry: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                        }\n                        for (const objectKey of Object.keys(value)) {\n                            const objectValue = value[objectKey];\n                            if (!objectValue) {\n                                continue;\n                            }\n                            switch (objectKey) {\n                                case '@id':\n                                    if (Util_1.Util.isValidKeyword(objectValue)\n                                        && objectValue !== '@type' && objectValue !== '@id' && objectValue !== '@graph') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Illegal keyword alias in term value, found: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                    }\n                                    if (Util_1.Util.isValidIriWeak(key)) {\n                                        if (objectValue === '@type') {\n                                            throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to @type, found: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                        }\n                                        else if (Util_1.Util.isValidIri(objectValue)\n                                            && objectValue !== new JsonLdContextNormalized_1.JsonLdContextNormalized(context).expandTerm(key)) {\n                                            throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                        }\n                                    }\n                                    if (typeof objectValue !== 'string') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Detected non-string @id in context entry: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                    }\n                                    if (Util_1.Util.getPrefix(objectValue, context) === key) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${key}': '${JSON\n                                            .stringify(value)}'`, ErrorCoded_1.ERROR_CODES.CYCLIC_IRI_MAPPING);\n                                    }\n                                    break;\n                                case '@type':\n                                    if (value['@container'] === '@type' && objectValue !== '@id' && objectValue !== '@vocab') {\n                                        throw new ErrorCoded_1.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${key}': '${objectValue}'`, ErrorCoded_1.ERROR_CODES.INVALID_TYPE_MAPPING);\n                                    }\n                                    if (typeof objectValue !== 'string') {\n                                        throw new ErrorCoded_1.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(valueType)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TYPE_MAPPING);\n                                    }\n                                    if (objectValue !== '@id' && objectValue !== '@vocab'\n                                        && (processingMode === 1.0 || objectValue !== '@json')\n                                        && (processingMode === 1.0 || objectValue !== '@none')\n                                        && (objectValue[0] === '_' || !Util_1.Util.isValidIri(objectValue))) {\n                                        throw new ErrorCoded_1.ErrorCoded(`A context @type must be an absolute IRI, found: '${key}': '${objectValue}'`, ErrorCoded_1.ERROR_CODES.INVALID_TYPE_MAPPING);\n                                    }\n                                    break;\n                                case '@reverse':\n                                    if (typeof objectValue === 'string' && value['@id'] && value['@id'] !== objectValue) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Found non-matching @id and @reverse term values in '${key}':\\\n'${objectValue}' and '${value['@id']}'`, ErrorCoded_1.ERROR_CODES.INVALID_REVERSE_PROPERTY);\n                                    }\n                                    if ('@nest' in value) {\n                                        throw new ErrorCoded_1.ErrorCoded(`@nest is not allowed in the reverse property '${key}'`, ErrorCoded_1.ERROR_CODES.INVALID_REVERSE_PROPERTY);\n                                    }\n                                    break;\n                                case '@container':\n                                    if (processingMode === 1.0) {\n                                        if (Object.keys(objectValue).length > 1\n                                            || Util_1.Util.CONTAINERS_1_0.indexOf(Object.keys(objectValue)[0]) < 0) {\n                                            throw new ErrorCoded_1.ErrorCoded(`Invalid term @container for '${key}' ('${Object.keys(objectValue)}') in 1.0, \\\nmust be only one of ${Util_1.Util.CONTAINERS_1_0.join(', ')}`, ErrorCoded_1.ERROR_CODES.INVALID_CONTAINER_MAPPING);\n                                        }\n                                    }\n                                    for (const containerValue of Object.keys(objectValue)) {\n                                        if (containerValue === '@list' && value['@reverse']) {\n                                            throw new ErrorCoded_1.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${key}'`, ErrorCoded_1.ERROR_CODES.INVALID_REVERSE_PROPERTY);\n                                        }\n                                        if (Util_1.Util.CONTAINERS.indexOf(containerValue) < 0) {\n                                            throw new ErrorCoded_1.ErrorCoded(`Invalid term @container for '${key}' ('${containerValue}'), \\\nmust be one of ${Util_1.Util.CONTAINERS.join(', ')}`, ErrorCoded_1.ERROR_CODES.INVALID_CONTAINER_MAPPING);\n                                        }\n                                    }\n                                    break;\n                                case '@language':\n                                    ContextParser.validateLanguage(objectValue, true, ErrorCoded_1.ERROR_CODES.INVALID_LANGUAGE_MAPPING);\n                                    break;\n                                case '@direction':\n                                    ContextParser.validateDirection(objectValue, true);\n                                    break;\n                                case '@prefix':\n                                    if (objectValue !== null && typeof objectValue !== 'boolean') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Found an invalid term @prefix boolean in: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_PREFIX_VALUE);\n                                    }\n                                    if (!('@id' in value) && !Util_1.Util.isValidIri(key)) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Invalid @prefix definition for '${key}' ('${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                                    }\n                                    break;\n                                case '@index':\n                                    if (processingMode === 1.0 || !value['@container'] || !value['@container']['@index']) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Attempt to add illegal key to value object: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                                    }\n                                    break;\n                                case '@nest':\n                                    if (Util_1.Util.isPotentialKeyword(objectValue) && objectValue !== '@nest') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Found an invalid term @nest value in: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_NEST_VALUE);\n                                    }\n                            }\n                        }\n                        break;\n                    default:\n                        throw new ErrorCoded_1.ErrorCoded(`Found an invalid term value: '${key}': '${value}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                }\n            }\n        }\n    }\n    /**\n     * Apply the @base context entry to the given context under certain circumstances.\n     * @param context A context.\n     * @param options Parsing options.\n     * @param inheritFromParent If the @base value from the parent context can be inherited.\n     * @return The given context.\n     */\n    applyBaseEntry(context, options, inheritFromParent) {\n        // In some special cases, this can be a string, so ignore those.\n        if (typeof context === 'string') {\n            return context;\n        }\n        // Give priority to @base in the parent context\n        if (inheritFromParent && !('@base' in context) && options.parentContext && '@base' in options.parentContext) {\n            context['@base'] = options.parentContext['@base'];\n            if (options.parentContext['@__baseDocument']) {\n                context['@__baseDocument'] = true;\n            }\n        }\n        // Override the base IRI if provided.\n        if (options.baseIRI && !options.external) {\n            if (!('@base' in context)) {\n                // The context base is the document base\n                context['@base'] = options.baseIRI;\n                context['@__baseDocument'] = true;\n            }\n            else if (context['@base'] !== null && typeof context['@base'] === 'string'\n                && !Util_1.Util.isValidIri(context['@base'])) {\n                // The context base is relative to the document base\n                context['@base'] = relative_to_absolute_iri_1.resolve(context['@base'], options.parentContext && options.parentContext['@base'] || options.baseIRI);\n            }\n        }\n        return context;\n    }\n    /**\n     * Resolve relative context IRIs, or return full IRIs as-is.\n     * @param {string} contextIri A context IRI.\n     * @param {string} baseIRI A base IRI.\n     * @return {string} The normalized context IRI.\n     */\n    normalizeContextIri(contextIri, baseIRI) {\n        if (!Util_1.Util.isValidIri(contextIri)) {\n            contextIri = relative_to_absolute_iri_1.resolve(contextIri, baseIRI);\n            if (!Util_1.Util.isValidIri(contextIri)) {\n                throw new Error(`Invalid context IRI: ${contextIri}`);\n            }\n        }\n        // TODO: Temporary workaround for fixing schema.org CORS issues (https://github.com/schemaorg/schemaorg/issues/2578#issuecomment-652324465)\n        if (this.redirectSchemaOrgHttps && contextIri.startsWith('http://schema.org')) {\n            contextIri = 'https://schema.org/';\n        }\n        return contextIri;\n    }\n    /**\n     * Parse scoped contexts in the given context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {IParseOptions} options Parsing options.\n     * @return {IJsonLdContextNormalizedRaw} The mutated input context.\n     */\n    parseInnerContexts(context, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const key of Object.keys(context)) {\n                const value = context[key];\n                if (value && typeof value === 'object') {\n                    if ('@context' in value && value['@context'] !== null) {\n                        // Simulate a processing based on the parent context to check if there are any (potential errors).\n                        // Honestly, I find it a bit weird to do this here, as the context may be unused,\n                        // and the final effective context may differ based on any other embedded/scoped contexts.\n                        // But hey, it's part of the spec, so we have no choice...\n                        // https://w3c.github.io/json-ld-api/#h-note-10\n                        if (this.validateContext) {\n                            try {\n                                const parentContext = Object.assign({}, context);\n                                parentContext[key] = Object.assign({}, parentContext[key]);\n                                delete parentContext[key]['@context'];\n                                yield this.parse(value['@context'], Object.assign(Object.assign({}, options), { parentContext, ignoreProtection: true, ignoreRemoteScopedContexts: true }));\n                            }\n                            catch (e) {\n                                throw new ErrorCoded_1.ErrorCoded(e.message, ErrorCoded_1.ERROR_CODES.INVALID_SCOPED_CONTEXT);\n                            }\n                        }\n                        value['@context'] = (yield this.parse(value['@context'], Object.assign(Object.assign({}, options), { minimalProcessing: true, ignoreRemoteScopedContexts: true, parentContext: context })))\n                            .getContextRaw();\n                    }\n                }\n            }\n            return context;\n        });\n    }\n    /**\n     * Parse a JSON-LD context in any form.\n     * @param {JsonLdContext} context A context, URL to a context, or an array of contexts/URLs.\n     * @param {IParseOptions} options Optional parsing options.\n     * @return {Promise<JsonLdContextNormalized>} A promise resolving to the context.\n     */\n    parse(context, options = {\n        processingMode: ContextParser.DEFAULT_PROCESSING_MODE,\n    }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { baseIRI, parentContext: parentContextInitial, external, processingMode, normalizeLanguageTags, ignoreProtection, minimalProcessing, } = options;\n            let parentContext = parentContextInitial;\n            const remoteContexts = options.remoteContexts || {};\n            // Avoid remote context overflows\n            if (Object.keys(remoteContexts).length >= this.remoteContextsDepthLimit) {\n                throw new ErrorCoded_1.ErrorCoded('Detected an overflow in remote context inclusions: ' + Object.keys(remoteContexts), ErrorCoded_1.ERROR_CODES.CONTEXT_OVERFLOW);\n            }\n            if (context === null || context === undefined) {\n                // Don't allow context nullification and there are protected terms\n                if (!ignoreProtection && parentContext && Util_1.Util.hasProtectedTerms(parentContext)) {\n                    throw new ErrorCoded_1.ErrorCoded('Illegal context nullification when terms are protected', ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);\n                }\n                // Context that are explicitly set to null are empty.\n                return new JsonLdContextNormalized_1.JsonLdContextNormalized(this.applyBaseEntry({}, options, false));\n            }\n            else if (typeof context === 'string') {\n                const contextIri = this.normalizeContextIri(context, baseIRI);\n                const overriddenLoad = this.getOverriddenLoad(contextIri, options);\n                if (overriddenLoad) {\n                    return new JsonLdContextNormalized_1.JsonLdContextNormalized(overriddenLoad);\n                }\n                const parsedStringContext = yield this.parse(yield this.load(contextIri), Object.assign(Object.assign({}, options), { baseIRI: contextIri, external: true, remoteContexts: Object.assign(Object.assign({}, remoteContexts), { [contextIri]: true }) }));\n                this.applyBaseEntry(parsedStringContext.getContextRaw(), options, true);\n                return parsedStringContext;\n            }\n            else if (Array.isArray(context)) {\n                // As a performance consideration, first load all external contexts in parallel.\n                const contextIris = [];\n                const contexts = yield Promise.all(context.map((subContext, i) => {\n                    if (typeof subContext === 'string') {\n                        const contextIri = this.normalizeContextIri(subContext, baseIRI);\n                        contextIris[i] = contextIri;\n                        const overriddenLoad = this.getOverriddenLoad(contextIri, options);\n                        if (overriddenLoad) {\n                            return overriddenLoad;\n                        }\n                        return this.load(contextIri);\n                    }\n                    else {\n                        return subContext;\n                    }\n                }));\n                // Don't apply inheritance logic on minimal processing\n                if (minimalProcessing) {\n                    return new JsonLdContextNormalized_1.JsonLdContextNormalized(contexts);\n                }\n                const reducedContexts = yield contexts.reduce((accContextPromise, contextEntry, i) => accContextPromise\n                    .then((accContext) => this.parse(contextEntry, Object.assign(Object.assign({}, options), { baseIRI: contextIris[i] || options.baseIRI, external: !!contextIris[i] || options.external, parentContext: accContext.getContextRaw(), remoteContexts: contextIris[i] ? Object.assign(Object.assign({}, remoteContexts), { [contextIris[i]]: true }) : remoteContexts }))), Promise.resolve(new JsonLdContextNormalized_1.JsonLdContextNormalized(parentContext || {})));\n                // Override the base IRI if provided.\n                this.applyBaseEntry(reducedContexts.getContextRaw(), options, true);\n                return reducedContexts;\n            }\n            else if (typeof context === 'object') {\n                if ('@context' in context) {\n                    return yield this.parse(context['@context'], options);\n                }\n                // Make a deep clone of the given context, to avoid modifying it.\n                context = JSON.parse(JSON.stringify(context)); // No better way in JS at the moment.\n                if (parentContext) {\n                    parentContext = JSON.parse(JSON.stringify(parentContext));\n                }\n                // We have an actual context object.\n                let newContext = {};\n                // According to the JSON-LD spec, @base must be ignored from external contexts.\n                if (external) {\n                    delete context['@base'];\n                }\n                // Override the base IRI if provided.\n                this.applyBaseEntry(context, options, true);\n                // Hashify container entries\n                // Do this before protected term validation as that influences term format\n                this.containersToHash(context);\n                // Don't perform any other modifications if only minimal processing is needed.\n                if (minimalProcessing) {\n                    return new JsonLdContextNormalized_1.JsonLdContextNormalized(context);\n                }\n                // In JSON-LD 1.1, load @import'ed context prior to processing.\n                let importContext = {};\n                if ('@import' in context) {\n                    if (processingMode && processingMode >= 1.1) {\n                        // Only accept string values\n                        if (typeof context['@import'] !== 'string') {\n                            throw new ErrorCoded_1.ErrorCoded('An @import value must be a string, but got ' + typeof context['@import'], ErrorCoded_1.ERROR_CODES.INVALID_IMPORT_VALUE);\n                        }\n                        // Load context\n                        importContext = yield this.loadImportContext(this.normalizeContextIri(context['@import'], baseIRI));\n                        delete context['@import'];\n                    }\n                    else {\n                        throw new ErrorCoded_1.ErrorCoded('Context importing is not supported in JSON-LD 1.0', ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_ENTRY);\n                    }\n                }\n                // Merge different parts of the final context in order\n                newContext = Object.assign(Object.assign(Object.assign(Object.assign({}, newContext), parentContext), importContext), context);\n                const newContextWrapped = new JsonLdContextNormalized_1.JsonLdContextNormalized(newContext);\n                // Parse inner contexts with minimal processing\n                yield this.parseInnerContexts(newContext, options);\n                // In JSON-LD 1.1, check if we are not redefining any protected keywords\n                if (!ignoreProtection && parentContext && processingMode && processingMode >= 1.1) {\n                    this.validateKeywordRedefinitions(parentContext, newContext, exports.defaultExpandOptions);\n                }\n                // In JSON-LD 1.1, @vocab can be relative to @vocab in the parent context.\n                if ((newContext && newContext['@version'] || processingMode || ContextParser.DEFAULT_PROCESSING_MODE) >= 1.1\n                    && ((context['@vocab'] && typeof context['@vocab'] === 'string') || context['@vocab'] === '')\n                    && context['@vocab'].indexOf(':') < 0 && parentContext && '@vocab' in parentContext) {\n                    newContext['@vocab'] = parentContext['@vocab'] + context['@vocab'];\n                }\n                this.idifyReverseTerms(newContext);\n                this.expandPrefixedTerms(newContextWrapped, this.expandContentTypeToBase);\n                this.normalize(newContext, { processingMode, normalizeLanguageTags });\n                this.applyScopedProtected(newContext, { processingMode });\n                if (this.validateContext) {\n                    this.validate(newContext, { processingMode });\n                }\n                return newContextWrapped;\n            }\n            else {\n                throw new ErrorCoded_1.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${context}`, ErrorCoded_1.ERROR_CODES.INVALID_LOCAL_CONTEXT);\n            }\n        });\n    }\n    /**\n     * Fetch the given URL as a raw JSON-LD context.\n     * @param url An URL.\n     * @return A promise resolving to a raw JSON-LD context.\n     */\n    load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // First try to retrieve the context from cache\n            const cached = this.documentCache[url];\n            if (cached) {\n                return typeof cached === 'string' ? cached : Array.isArray(cached) ? cached.slice() : Object.assign({}, cached);\n            }\n            // If not in cache, load it\n            let document;\n            try {\n                document = yield this.documentLoader.load(url);\n            }\n            catch (e) {\n                throw new ErrorCoded_1.ErrorCoded(`Failed to load remote context ${url}: ${e.message}`, ErrorCoded_1.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED);\n            }\n            // Validate the context\n            if (!('@context' in document)) {\n                throw new ErrorCoded_1.ErrorCoded(`Missing @context in remote context at ${url}`, ErrorCoded_1.ERROR_CODES.INVALID_REMOTE_CONTEXT);\n            }\n            return this.documentCache[url] = document['@context'];\n        });\n    }\n    /**\n     * Override the given context that may be loaded.\n     *\n     * This will check whether or not the url is recursively being loaded.\n     * @param url An URL.\n     * @param options Parsing options.\n     * @return An overridden context, or null.\n     *         Optionally an error can be thrown if a cyclic context is detected.\n     */\n    getOverriddenLoad(url, options) {\n        if (url in (options.remoteContexts || {})) {\n            if (options.ignoreRemoteScopedContexts) {\n                return url;\n            }\n            else {\n                throw new ErrorCoded_1.ErrorCoded('Detected a cyclic context inclusion of ' + url, ErrorCoded_1.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION);\n            }\n        }\n        return null;\n    }\n    /**\n     * Load an @import'ed context.\n     * @param importContextIri The full URI of an @import value.\n     */\n    loadImportContext(importContextIri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Load the context\n            const importContext = yield this.load(importContextIri);\n            // Require the context to be a non-array object\n            if (typeof importContext !== 'object' || Array.isArray(importContext)) {\n                throw new ErrorCoded_1.ErrorCoded('An imported context must be a single object: ' + importContextIri, ErrorCoded_1.ERROR_CODES.INVALID_REMOTE_CONTEXT);\n            }\n            // Error if the context contains another @import\n            if ('@import' in importContext) {\n                throw new ErrorCoded_1.ErrorCoded('An imported context can not import another context: ' + importContextIri, ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_ENTRY);\n            }\n            return importContext;\n        });\n    }\n}\nexports.ContextParser = ContextParser;\nContextParser.DEFAULT_PROCESSING_MODE = 1.1;\nexports.defaultExpandOptions = {\n    allowPrefixForcing: true,\n    allowPrefixNonGenDelims: false,\n    allowVocabRelativeToBase: true,\n};\n//# sourceMappingURL=ContextParser.js.map","(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(typeof self !== 'undefined' ? self : this);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchDocumentLoader = void 0;\nrequire(\"cross-fetch/polyfill\");\nconst ErrorCoded_1 = require(\"./ErrorCoded\");\nconst http_link_header_1 = require(\"http-link-header\");\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\n/**\n * Loads documents via the fetch API.\n */\nclass FetchDocumentLoader {\n    constructor(fetcher) {\n        this.fetcher = fetcher;\n    }\n    load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield (this.fetcher || fetch)(url, { headers: new Headers({ accept: 'application/ld+json' }) });\n            if (response.ok && response.headers) {\n                let mediaType = response.headers.get('Content-Type');\n                if (mediaType) {\n                    const colonPos = mediaType.indexOf(';');\n                    if (colonPos > 0) {\n                        mediaType = mediaType.substr(0, colonPos);\n                    }\n                }\n                if (mediaType === 'application/ld+json') {\n                    // Return JSON-LD if proper content type was returned\n                    return (yield response.json());\n                }\n                else {\n                    // Check for alternate link for a non-JSON-LD response\n                    if (response.headers.has('Link')) {\n                        let alternateUrl;\n                        response.headers.forEach((value, key) => {\n                            if (key === 'link') {\n                                const linkHeader = http_link_header_1.parse(value);\n                                for (const link of linkHeader.get('type', 'application/ld+json')) {\n                                    if (link.rel === 'alternate') {\n                                        if (alternateUrl) {\n                                            throw new Error('Multiple JSON-LD alternate links were found on ' + url);\n                                        }\n                                        alternateUrl = relative_to_absolute_iri_1.resolve(link.uri, url);\n                                    }\n                                }\n                            }\n                        });\n                        if (alternateUrl) {\n                            return this.load(alternateUrl);\n                        }\n                    }\n                    throw new ErrorCoded_1.ErrorCoded(`Unsupported JSON-LD media type ${mediaType}`, ErrorCoded_1.ERROR_CODES.LOADING_DOCUMENT_FAILED);\n                }\n            }\n            else {\n                throw new Error(response.statusText || `Status code: ${response.status}`);\n            }\n        });\n    }\n}\nexports.FetchDocumentLoader = FetchDocumentLoader;\n//# sourceMappingURL=FetchDocumentLoader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonLdContextNormalized = void 0;\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\nconst ContextParser_1 = require(\"./ContextParser\");\nconst ErrorCoded_1 = require(\"./ErrorCoded\");\nconst Util_1 = require(\"./Util\");\n/**\n * A class exposing operations over a normalized JSON-LD context.\n */\nclass JsonLdContextNormalized {\n    constructor(contextRaw) {\n        this.contextRaw = contextRaw;\n    }\n    /**\n     * @return The raw inner context.\n     */\n    getContextRaw() {\n        return this.contextRaw;\n    }\n    /**\n     * Expand the term or prefix of the given term if it has one,\n     * otherwise return the term as-is.\n     *\n     * This will try to expand the IRI as much as possible.\n     *\n     * Iff in vocab-mode, then other references to other terms in the context can be used,\n     * such as to `myTerm`:\n     * ```\n     * {\n     *   \"myTerm\": \"http://example.org/myLongTerm\"\n     * }\n     * ```\n     *\n     * @param {string} term A term that is an URL or a prefixed URL.\n     * @param {boolean} expandVocab If the term is a predicate or type and should be expanded based on @vocab,\n     *                              otherwise it is considered a regular term that is expanded based on @base.\n     * @param {IExpandOptions} options Options that define the way how expansion must be done.\n     * @return {string} The expanded term, the term as-is, or null if it was explicitly disabled in the context.\n     * @throws If the term is aliased to an invalid value (not a string, IRI or keyword).\n     */\n    expandTerm(term, expandVocab, options = ContextParser_1.defaultExpandOptions) {\n        const contextValue = this.contextRaw[term];\n        // Immediately return if the term was disabled in the context\n        if (contextValue === null || (contextValue && contextValue['@id'] === null)) {\n            return null;\n        }\n        // Check the @id\n        let validIriMapping = true;\n        if (contextValue && expandVocab) {\n            const value = Util_1.Util.getContextValueId(contextValue);\n            if (value && value !== term) {\n                if (typeof value !== 'string' || (!Util_1.Util.isValidIri(value) && !Util_1.Util.isValidKeyword(value))) {\n                    // Don't mark this mapping as invalid if we have an unknown keyword, but of the correct form.\n                    if (!Util_1.Util.isPotentialKeyword(value)) {\n                        validIriMapping = false;\n                    }\n                }\n                else {\n                    return value;\n                }\n            }\n        }\n        // Check if the term is prefixed\n        const prefix = Util_1.Util.getPrefix(term, this.contextRaw);\n        const vocab = this.contextRaw['@vocab'];\n        const vocabRelative = (!!vocab || vocab === '') && vocab.indexOf(':') < 0;\n        const base = this.contextRaw['@base'];\n        const potentialKeyword = Util_1.Util.isPotentialKeyword(term);\n        if (prefix) {\n            const contextPrefixValue = this.contextRaw[prefix];\n            const value = Util_1.Util.getContextValueId(contextPrefixValue);\n            if (value) {\n                if (typeof contextPrefixValue === 'string' || !options.allowPrefixForcing) {\n                    // If we have a simple term definition,\n                    // check the last character of the prefix to determine whether or not it is a prefix.\n                    // Validate that prefix ends with gen-delim character, unless @prefix is true\n                    if (!Util_1.Util.isSimpleTermDefinitionPrefix(value, options)) {\n                        // Treat the term as an absolute IRI\n                        return term;\n                    }\n                }\n                else {\n                    // If we have an expanded term definition, default to @prefix: false\n                    if (value[0] !== '_' && !potentialKeyword && !contextPrefixValue['@prefix'] && !(term in this.contextRaw)) {\n                        // Treat the term as an absolute IRI\n                        return term;\n                    }\n                }\n                return value + term.substr(prefix.length + 1);\n            }\n        }\n        else if (expandVocab && ((vocab || vocab === '') || (options.allowVocabRelativeToBase && (base && vocabRelative)))\n            && !potentialKeyword && !Util_1.Util.isCompactIri(term)) {\n            if (vocabRelative) {\n                if (options.allowVocabRelativeToBase) {\n                    return relative_to_absolute_iri_1.resolve(vocab, base) + term;\n                }\n                else {\n                    throw new ErrorCoded_1.ErrorCoded(`Relative vocab expansion for term '${term}' with vocab '${vocab}' is not allowed.`, ErrorCoded_1.ERROR_CODES.INVALID_VOCAB_MAPPING);\n                }\n            }\n            else {\n                return vocab + term;\n            }\n        }\n        else if (!expandVocab && base && !potentialKeyword && !Util_1.Util.isCompactIri(term)) {\n            return relative_to_absolute_iri_1.resolve(term, base);\n        }\n        // Return the term as-is, unless we discovered an invalid IRI mapping for this term in the context earlier.\n        if (validIriMapping) {\n            return term;\n        }\n        else {\n            throw new ErrorCoded_1.ErrorCoded(`Invalid IRI mapping found for context entry '${term}': '${JSON.stringify(contextValue)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n        }\n    }\n    /**\n     * Compact the given term using @base, @vocab, an aliased term, or a prefixed term.\n     *\n     * This will try to compact the IRI as much as possible.\n     *\n     * @param {string} iri An IRI to compact.\n     * @param {boolean} vocab If the term is a predicate or type and should be compacted based on @vocab,\n     *                        otherwise it is considered a regular term that is compacted based on @base.\n     * @return {string} The compacted term or the IRI as-is.\n     */\n    compactIri(iri, vocab) {\n        // Try @vocab compacting\n        if (vocab && this.contextRaw['@vocab'] && iri.startsWith(this.contextRaw['@vocab'])) {\n            return iri.substr(this.contextRaw['@vocab'].length);\n        }\n        // Try @base compacting\n        if (!vocab && this.contextRaw['@base'] && iri.startsWith(this.contextRaw['@base'])) {\n            return iri.substr(this.contextRaw['@base'].length);\n        }\n        // Loop over all terms in the context\n        // This will try to prefix as short as possible.\n        // Once a fully compacted alias is found, return immediately, as we can not go any shorter.\n        const shortestPrefixing = { prefix: '', suffix: iri };\n        for (const key in this.contextRaw) {\n            const value = this.contextRaw[key];\n            if (value && !Util_1.Util.isPotentialKeyword(key)) {\n                const contextIri = Util_1.Util.getContextValueId(value);\n                if (iri.startsWith(contextIri)) {\n                    const suffix = iri.substr(contextIri.length);\n                    if (!suffix) {\n                        if (vocab) {\n                            // Immediately return on compacted alias\n                            return key;\n                        }\n                    }\n                    else if (suffix.length < shortestPrefixing.suffix.length) {\n                        // Overwrite the shortest prefix\n                        shortestPrefixing.prefix = key;\n                        shortestPrefixing.suffix = suffix;\n                    }\n                }\n            }\n        }\n        // Return the shortest prefix\n        if (shortestPrefixing.prefix) {\n            return shortestPrefixing.prefix + ':' + shortestPrefixing.suffix;\n        }\n        return iri;\n    }\n}\nexports.JsonLdContextNormalized = JsonLdContextNormalized;\n//# sourceMappingURL=JsonLdContextNormalized.js.map","function DefaultGraph () {\n  this.value = ''\n}\n\nDefaultGraph.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType\n}\n\nDefaultGraph.prototype.termType = 'DefaultGraph'\n\nmodule.exports = DefaultGraph\n","function NamedNode (iri) {\n  this.value = iri\n}\n\nNamedNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nNamedNode.prototype.termType = 'NamedNode'\n\nmodule.exports = NamedNode\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Convert the given relative IRI to an absolute IRI\n * by taking into account the given optional baseIRI.\n *\n * @param {string} relativeIRI The relative IRI to convert to an absolute IRI.\n * @param {string} baseIRI The optional base IRI.\n * @return {string} an absolute IRI.\n */\nfunction resolve(relativeIRI, baseIRI) {\n    baseIRI = baseIRI || '';\n    const baseFragmentPos = baseIRI.indexOf('#');\n    // Ignore any fragments in the base IRI\n    if (baseFragmentPos > 0) {\n        baseIRI = baseIRI.substr(0, baseFragmentPos);\n    }\n    // Convert empty value directly to base IRI\n    if (!relativeIRI.length) {\n        // At this point, the baseIRI MUST be absolute, otherwise we error\n        if (baseIRI.indexOf(':') < 0) {\n            throw new Error(`Found invalid baseIRI '${baseIRI}' for value '${relativeIRI}'`);\n        }\n        return baseIRI;\n    }\n    // If the value starts with a query character, concat directly (but strip the existing query)\n    if (relativeIRI.startsWith('?')) {\n        const baseQueryPos = baseIRI.indexOf('?');\n        if (baseQueryPos > 0) {\n            baseIRI = baseIRI.substr(0, baseQueryPos);\n        }\n        return baseIRI + relativeIRI;\n    }\n    // If the value starts with a fragment character, concat directly\n    if (relativeIRI.startsWith('#')) {\n        return baseIRI + relativeIRI;\n    }\n    // Ignore baseIRI if it is empty\n    if (!baseIRI.length) {\n        const relativeColonPos = relativeIRI.indexOf(':');\n        if (relativeColonPos < 0) {\n            throw new Error(`Found invalid relative IRI '${relativeIRI}' for a missing baseIRI`);\n        }\n        return removeDotSegmentsOfPath(relativeIRI, relativeColonPos);\n    }\n    // Ignore baseIRI if the value is absolute\n    const valueColonPos = relativeIRI.indexOf(':');\n    if (valueColonPos >= 0) {\n        return removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n    }\n    // At this point, the baseIRI MUST be absolute, otherwise we error\n    const baseColonPos = baseIRI.indexOf(':');\n    if (baseColonPos < 0) {\n        throw new Error(`Found invalid baseIRI '${baseIRI}' for value '${relativeIRI}'`);\n    }\n    const baseIRIScheme = baseIRI.substr(0, baseColonPos + 1);\n    // Inherit the baseIRI scheme if the value starts with '//'\n    if (relativeIRI.indexOf('//') === 0) {\n        return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n    }\n    // Check cases where '://' occurs in the baseIRI, and where there is no '/' after a ':' anymore.\n    let baseSlashAfterColonPos;\n    if (baseIRI.indexOf('//', baseColonPos) === baseColonPos + 1) {\n        // If there is no additional '/' after the '//'.\n        baseSlashAfterColonPos = baseIRI.indexOf('/', baseColonPos + 3);\n        if (baseSlashAfterColonPos < 0) {\n            // If something other than a '/' follows the '://', append the value after a '/',\n            // otherwise, prefix the value with only the baseIRI scheme.\n            if (baseIRI.length > baseColonPos + 3) {\n                return baseIRI + '/' + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n            }\n            else {\n                return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n            }\n        }\n    }\n    else {\n        // If there is not even a single '/' after the ':'\n        baseSlashAfterColonPos = baseIRI.indexOf('/', baseColonPos + 1);\n        if (baseSlashAfterColonPos < 0) {\n            // If we don't have a '/' after the ':',\n            // prefix the value with only the baseIRI scheme.\n            return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n        }\n    }\n    // If the value starts with a '/', then prefix it with everything before the first effective slash of the base IRI.\n    if (relativeIRI.indexOf('/') === 0) {\n        return baseIRI.substr(0, baseSlashAfterColonPos) + removeDotSegments(relativeIRI);\n    }\n    let baseIRIPath = baseIRI.substr(baseSlashAfterColonPos);\n    const baseIRILastSlashPos = baseIRIPath.lastIndexOf('/');\n    // Ignore everything after the last '/' in the baseIRI path\n    if (baseIRILastSlashPos >= 0 && baseIRILastSlashPos < baseIRIPath.length - 1) {\n        baseIRIPath = baseIRIPath.substr(0, baseIRILastSlashPos + 1);\n        // Also remove the first character of the relative path if it starts with '.' (and not '..' or './')\n        // This change is only allowed if there is something else following the path\n        if (relativeIRI[0] === '.' && relativeIRI[1] !== '.' && relativeIRI[1] !== '/' && relativeIRI[2]) {\n            relativeIRI = relativeIRI.substr(1);\n        }\n    }\n    // Prefix the value with the baseIRI path where\n    relativeIRI = baseIRIPath + relativeIRI;\n    // Remove dot segment from the IRI\n    relativeIRI = removeDotSegments(relativeIRI);\n    // Prefix our transformed value with the part of the baseIRI until the first '/' after the first ':'.\n    return baseIRI.substr(0, baseSlashAfterColonPos) + relativeIRI;\n}\nexports.resolve = resolve;\n/**\n * Remove dot segments from the given path,\n * as described in https://www.ietf.org/rfc/rfc3986.txt (page 32).\n * @param {string} path An IRI path.\n * @return {string} A path, will always start with a '/'.\n */\nfunction removeDotSegments(path) {\n    // Prepare a buffer with segments between each '/.\n    // Each segment represents an array of characters.\n    const segmentBuffers = [];\n    let i = 0;\n    while (i < path.length) {\n        // Remove '/.' or '/..'\n        switch (path[i]) {\n            case '/':\n                if (path[i + 1] === '.') {\n                    if (path[i + 2] === '.') {\n                        // Start a new segment if we find an invalid character after the '.'\n                        if (!isCharacterAllowedAfterRelativePathSegment(path[i + 3])) {\n                            segmentBuffers.push([]);\n                            i++;\n                            break;\n                        }\n                        // Go to parent directory,\n                        // so we remove a parent segment\n                        segmentBuffers.pop();\n                        // Ensure that we end with a slash if there is a trailing '/..'\n                        if (!path[i + 3]) {\n                            segmentBuffers.push([]);\n                        }\n                        i += 3;\n                    }\n                    else {\n                        // Start a new segment if we find an invalid character after the '.'\n                        if (!isCharacterAllowedAfterRelativePathSegment(path[i + 2])) {\n                            segmentBuffers.push([]);\n                            i++;\n                            break;\n                        }\n                        // Ensure that we end with a slash if there is a trailing '/.'\n                        if (!path[i + 2]) {\n                            segmentBuffers.push([]);\n                        }\n                        // Go to the current directory,\n                        // so we do nothing\n                        i += 2;\n                    }\n                }\n                else {\n                    // Start a new segment\n                    segmentBuffers.push([]);\n                    i++;\n                }\n                break;\n            case '#':\n            case '?':\n                // Query and fragment string should be appended unchanged\n                if (!segmentBuffers.length) {\n                    segmentBuffers.push([]);\n                }\n                segmentBuffers[segmentBuffers.length - 1].push(path.substr(i));\n                // Break the while loop\n                i = path.length;\n                break;\n            default:\n                // Not a special character, just append it to our buffer\n                if (!segmentBuffers.length) {\n                    segmentBuffers.push([]);\n                }\n                segmentBuffers[segmentBuffers.length - 1].push(path[i]);\n                i++;\n                break;\n        }\n    }\n    return '/' + segmentBuffers.map((buffer) => buffer.join('')).join('/');\n}\nexports.removeDotSegments = removeDotSegments;\n/**\n * Removes dot segments of the given IRI.\n * @param {string} iri An IRI (or part of IRI).\n * @param {number} colonPosition The position of the first ':' in the IRI.\n * @return {string} The IRI where dot segments were removed.\n */\nfunction removeDotSegmentsOfPath(iri, colonPosition) {\n    // Determine where we should start looking for the first '/' that indicates the start of the path\n    let searchOffset = colonPosition + 1;\n    if (colonPosition >= 0) {\n        if (iri[colonPosition + 1] === '/' && iri[colonPosition + 2] === '/') {\n            searchOffset = colonPosition + 3;\n        }\n    }\n    else {\n        if (iri[0] === '/' && iri[1] === '/') {\n            searchOffset = 2;\n        }\n    }\n    // Determine the path\n    const pathSeparator = iri.indexOf('/', searchOffset);\n    if (pathSeparator < 0) {\n        return iri;\n    }\n    const base = iri.substr(0, pathSeparator);\n    const path = iri.substr(pathSeparator);\n    // Remove dot segments from the path\n    return base + removeDotSegments(path);\n}\nexports.removeDotSegmentsOfPath = removeDotSegmentsOfPath;\nfunction isCharacterAllowedAfterRelativePathSegment(character) {\n    return !character || character === '#' || character === '?' || character === '/';\n}\n//# sourceMappingURL=Resolve.js.map","'use strict'\n\nvar COMPATIBLE_ENCODING_PATTERN = /^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i\nvar WS_TRIM_PATTERN = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g\nvar WS_CHAR_PATTERN = /\\s|\\uFEFF|\\xA0/\nvar WS_FOLD_PATTERN = /\\r?\\n[\\x20\\x09]+/g\nvar DELIMITER_PATTERN = /[;,\"]/\nvar WS_DELIMITER_PATTERN = /[;,\"]|\\s/\n\nvar STATE = {\n  IDLE: 1 << 0,\n  URI: 1 << 1,\n  ATTR: 1 << 2,\n}\n\nfunction trim( value ) {\n  return value.replace( WS_TRIM_PATTERN, '' )\n}\n\nfunction hasWhitespace( value ) {\n  return WS_CHAR_PATTERN.test( value )\n}\n\nfunction skipWhitespace( value, offset ) {\n  while( hasWhitespace( value[offset] ) ) {\n    offset++\n  }\n  return offset\n}\n\nfunction needsQuotes( value ) {\n  return WS_DELIMITER_PATTERN.test( value )\n}\n\nclass Link {\n\n  /**\n   * Link\n   * @constructor\n   * @param {String} [value]\n   * @returns {Link}\n   */\n  constructor( value ) {\n\n    /** @type {Array} URI references */\n    this.refs = []\n\n    if( value ) {\n      this.parse( value )\n    }\n\n  }\n\n  /**\n   * Get refs with given relation type\n   * @param {String} value\n   * @returns {Array<Object>}\n   */\n  rel( value ) {\n\n    var links = []\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      if( this.refs[ i ].rel === value ) {\n        links.push( this.refs[ i ] )\n      }\n    }\n\n    return links\n\n  }\n\n  /**\n   * Get refs where given attribute has a given value\n   * @param {String} attr\n   * @param {String} value\n   * @returns {Array<Object>}\n   */\n  get( attr, value ) {\n\n    attr = attr.toLowerCase()\n\n    var links = []\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      if( this.refs[ i ][ attr ] === value ) {\n        links.push( this.refs[ i ] )\n      }\n    }\n\n    return links\n\n  }\n\n  set( link ) {\n    this.refs.push( link )\n    return this\n  }\n\n  has( attr, value ) {\n\n    attr = attr.toLowerCase()\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      if( this.refs[ i ][ attr ] === value ) {\n        return true\n      }\n    }\n\n    return false\n\n  }\n\n  parse( value, offset ) {\n\n    offset = offset || 0\n    value = offset ? value.slice( offset ) : value\n\n    // Trim & unfold folded lines\n    value = trim( value ).replace( WS_FOLD_PATTERN, '' )\n\n    var state = STATE.IDLE\n    var length = value.length\n    var offset = 0\n    var ref = null\n\n    while( offset < length ) {\n      if( state === STATE.IDLE ) {\n        if( hasWhitespace( value[offset] ) ) {\n          offset++\n          continue\n        } else if( value[offset] === '<' ) {\n          var end = value.indexOf( '>', offset )\n          if( end === -1 ) throw new Error( 'Expected end of URI delimiter at offset ' + offset )\n          ref = { uri: value.slice( offset + 1, end ) }\n          this.refs.push( ref )\n          offset = end\n          state = STATE.URI\n        } else {\n          throw new Error( 'Unexpected character \"' + value[offset] + '\" at offset ' + offset )\n        }\n        offset++\n      } else if( state === STATE.URI ) {\n        if( hasWhitespace( value[offset] ) ) {\n          offset++\n          continue\n        } else if( value[offset] === ';' ) {\n          state = STATE.ATTR\n          offset++\n        } else if( value[offset] === ',' ) {\n          state = STATE.IDLE\n          offset++\n        } else {\n          throw new Error( 'Unexpected character \"' + value[offset] + '\" at offset ' + offset )\n        }\n      } else if( state === STATE.ATTR ) {\n        if( value[offset] ===';' || hasWhitespace( value[offset] ) ) {\n          offset++\n          continue\n        }\n        var end = value.indexOf( '=', offset )\n        if( end === -1 ) throw new Error( 'Expected attribute delimiter at offset ' + offset )\n        var attr = trim( value.slice( offset, end ) ).toLowerCase()\n        var attrValue = ''\n        offset = end + 1\n        offset = skipWhitespace( value, offset )\n        if( value[offset] === '\"' ) {\n          offset++\n          while( offset < length ) {\n            if( value[offset] === '\"' ) {\n              offset++; break\n            }\n            if( value[offset] === '\\\\' ) {\n              offset++\n            }\n            attrValue += value[offset]\n            offset++\n          }\n        } else {\n          var end = offset + 1\n          while( !DELIMITER_PATTERN.test( value[end] ) && end < length ) {\n            end++\n          }\n          attrValue = value.slice( offset, end )\n          offset = end\n        }\n        if( ref[ attr ] && Link.isSingleOccurenceAttr( attr ) ) {\n          // Ignore multiples of attributes which may only appear once\n        } else if( attr[ attr.length - 1 ] === '*' ) {\n          ref[ attr ] = Link.parseExtendedValue( attrValue )\n        } else {\n          attrValue = attr === 'rel' || attr === 'type' ?\n            attrValue.toLowerCase() : attrValue\n          if( ref[ attr ] != null ) {\n            if( Array.isArray( ref[ attr ] ) ) {\n              ref[ attr ].push( attrValue )\n            } else {\n              ref[ attr ] = [ ref[ attr ], attrValue ]\n            }\n          } else {\n            ref[ attr ] = attrValue\n          }\n        }\n        switch( value[offset] ) {\n          case ',': state = STATE.IDLE; break\n          case ';': state = STATE.ATTR; break\n        }\n        offset++\n      } else {\n        throw new Error( 'Unknown parser state \"' + state + '\"' )\n      }\n    }\n\n    ref = null\n\n    return this\n\n  }\n\n  toString() {\n\n    var refs = []\n    var link = ''\n    var ref = null\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      ref = this.refs[i]\n      link = Object.keys( this.refs[i] ).reduce( function( link, attr ) {\n        if( attr === 'uri' ) return link\n        return link + '; ' + Link.formatAttribute( attr, ref[ attr ] )\n      }, '<' + ref.uri + '>' )\n      refs.push( link )\n    }\n\n    return refs.join( ', ' )\n\n  }\n\n}\n\n/**\n * Determines whether an encoding can be\n * natively handled with a `Buffer`\n * @param {String} value\n * @returns {Boolean}\n */\nLink.isCompatibleEncoding = function( value ) {\n  return COMPATIBLE_ENCODING_PATTERN.test( value )\n}\n\nLink.parse = function( value, offset ) {\n  return new Link().parse( value, offset )\n}\n\nLink.isSingleOccurenceAttr = function( attr ) {\n  return attr === 'rel' || attr === 'type' || attr === 'media' ||\n    attr === 'title' || attr === 'title*'\n}\n\nLink.isTokenAttr = function( attr ) {\n  return attr === 'rel' || attr === 'type' || attr === 'anchor'\n}\n\nLink.escapeQuotes = function( value ) {\n  return value.replace( /\"/g, '\\\\\"' )\n}\n\n/**\n * Parses an extended value and attempts to decode it\n * @internal\n * @param {String} value\n * @return {Object}\n */\nLink.parseExtendedValue = function( value ) {\n  var parts = /([^']+)?(?:'([^']+)')?(.+)/.exec( value )\n  return {\n    language: parts[2].toLowerCase(),\n    encoding: Link.isCompatibleEncoding( parts[1] ) ?\n      null : parts[1].toLowerCase(),\n    value: Link.isCompatibleEncoding( parts[1] ) ?\n      decodeURIComponent( parts[3] ) : parts[3]\n  }\n}\n\n/**\n * Format a given extended attribute and it's value\n * @param {String} attr\n * @param {Object} data\n * @return {String}\n */\nLink.formatExtendedAttribute = function( attr, data ) {\n\n  var encoding = ( data.encoding ||'utf-8' ).toUpperCase()\n  var language = data.language || 'en'\n\n  var encodedValue = ''\n\n  if( Buffer.isBuffer( data.value ) && Link.isCompatibleEncoding( encoding ) ) {\n    encodedValue = data.value.toString( encoding )\n  } else if( Buffer.isBuffer( data.value ) ) {\n    encodedValue = data.value.toString( 'hex' )\n      .replace( /[0-9a-f]{2}/gi, '%$1' )\n  } else {\n    encodedValue = encodeURIComponent( data.value )\n  }\n\n  return attr + '=' + encoding + '\\'' +\n    language + '\\'' + encodedValue\n\n}\n\n/**\n * Format a given attribute and it's value\n * @param {String} attr\n * @param {String|Object} value\n * @return {String}\n */\nLink.formatAttribute = function( attr, value ) {\n\n  if( Array.isArray( value ) ) {\n    return value.map(( item ) => {\n      return Link.formatAttribute( attr, item )\n    }).join( '; ' )\n  }\n\n  if( attr[ attr.length - 1 ] === '*' || typeof value !== 'string' ) {\n    return Link.formatExtendedAttribute( attr, value )\n  }\n\n  if( Link.isTokenAttr( attr ) ) {\n    value = needsQuotes( value ) ?\n      '\"' + Link.escapeQuotes( value ) + '\"' :\n      Link.escapeQuotes( value )\n  } else if( needsQuotes( value ) ) {\n    value = encodeURIComponent( value )\n    // We don't need to escape <SP> <,> <;> within quotes\n    value = value\n      .replace( /%20/g, ' ' )\n      .replace( /%2C/g, ',' )\n      .replace( /%3B/g, ';' )\n\n    value = '\"' + value + '\"'\n  }\n\n  return attr + '=' + value\n\n}\n\nmodule.exports = Link\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/* jshint esversion: 6 */\n/* jslint node: true */\n'use strict';\n\nmodule.exports = function (object) {\n  return serialize(object);\n\n  function serialize (object) {\n    if (object === null || typeof object !== 'object' || object.toJSON != null) {\n      return JSON.stringify(object);\n    }\n    if (Array.isArray(object) && object.length === 0) {\n      return '[]';\n    }\n    if (Array.isArray(object) && object.length === 1) {\n      return '[' + serialize(object[0]) + ']';\n    }\n    if (Array.isArray(object)) {\n      return '[' + object.reduce((t, cv, ci) => {\n        t = (ci === 1 ? serialize(t) : t);\n        return t + ',' + serialize(cv);\n      }) + ']';\n    }\n    const keys = Object.keys(object);\n    if (keys.length === 0) {\n      return '{}';\n    }\n    if (keys.length === 1) {\n      return '{' + serialize(keys[0]) + ':' + serialize(object[keys[0]]) + '}';\n    }\n    return '{' + keys.sort().reduce((t, cv, ci) => {\n      t = (ci === 1 ? serialize(t) + ':' + serialize(object[t]) : t);\n      return t + ',' + serialize(cv) + ':' + serialize(object[cv]);\n    }) + '}';\n  }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDocumentLoader.js.map","\"use strict\";\n// tslint:disable:max-line-length\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=JsonLdContext.js.map","var BlankNode = require('./blank-node')\nvar DefaultGraph = require('./default-graph')\nvar Literal = require('./literal')\nvar NamedNode = require('./named-node')\nvar Quad = require('./quad')\nvar Variable = require('./variable')\n\nfunction DataFactory () {}\n\nDataFactory.namedNode = function (value) {\n  return new NamedNode(value)\n}\n\nDataFactory.blankNode = function (value) {\n  return new BlankNode(value)\n}\n\nDataFactory.literal = function (value, languageOrDatatype) {\n  if (typeof languageOrDatatype === 'string') {\n    if (languageOrDatatype.indexOf(':') === -1) {\n      return new Literal(value, languageOrDatatype)\n    }\n\n    return new Literal(value, null, DataFactory.namedNode(languageOrDatatype))\n  }\n\n  return new Literal(value, null, languageOrDatatype)\n}\n\nDataFactory.defaultGraph = function () {\n  return DataFactory.defaultGraphInstance\n}\n\nDataFactory.variable = function (value) {\n  return new Variable(value)\n}\n\nDataFactory.triple = function (subject, predicate, object) {\n  return DataFactory.quad(subject, predicate, object)\n}\n\nDataFactory.quad = function (subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph || DataFactory.defaultGraphInstance)\n}\n\nDataFactory.defaultGraphInstance = new DefaultGraph()\n\nmodule.exports = DataFactory\n","function BlankNode (id) {\n  this.value = id || ('b' + (++BlankNode.nextId))\n}\n\nBlankNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nBlankNode.prototype.termType = 'BlankNode'\n\nBlankNode.nextId = 0\n\nmodule.exports = BlankNode\n","var NamedNode = require('./named-node')\n\nfunction Literal (value, language, datatype) {\n  this.value = value\n  this.datatype = Literal.stringDatatype\n  this.language = ''\n\n  if (language) {\n    this.language = language\n    this.datatype = Literal.langStringDatatype\n  } else if (datatype) {\n    this.datatype = datatype\n  }\n}\n\nLiteral.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value &&\n    other.language === this.language && other.datatype.equals(this.datatype)\n}\n\nLiteral.prototype.termType = 'Literal'\nLiteral.langStringDatatype = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString')\nLiteral.stringDatatype = new NamedNode('http://www.w3.org/2001/XMLSchema#string')\n\nmodule.exports = Literal\n","var DefaultGraph = require('./default-graph')\n\nfunction Quad (subject, predicate, object, graph) {\n  this.subject = subject\n  this.predicate = predicate\n  this.object = object\n\n  if (graph) {\n    this.graph = graph\n  } else {\n    this.graph = new DefaultGraph()\n  }\n}\n\nQuad.prototype.equals = function (other) {\n  // `|| !other.termType` is for backwards-compatibility with old factories without RDF* support.\n  return !!other && (other.termType === 'Quad' || !other.termType) &&\n    other.subject.equals(this.subject) && other.predicate.equals(this.predicate) &&\n    other.object.equals(this.object) && other.graph.equals(this.graph)\n}\n\nQuad.prototype.termType = 'Quad'\nQuad.prototype.value = ''\n\nmodule.exports = Quad\n","function Variable (name) {\n  this.value = name\n}\n\nVariable.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nVariable.prototype.termType = 'Variable'\n\nmodule.exports = Variable\n","const done = {};\n/**\n * Returns the elements of the iterable as an array\n */\n\nexport async function iterableToArray(iterable) {\n  const items = [];\n\n  for await (const item of iterable) items.push(item);\n\n  return items;\n}\n/**\n * Gets the first element of the iterable.\n */\n\nexport function getFirstItem(iterable) {\n  const iterator = iterable[Symbol.asyncIterator]();\n  return iterator.next().then(item => item.value);\n}\n/**\n * Creates an async iterator with the item as only element.\n */\n\nexport function iteratorFor(item) {\n  return {\n    async next() {\n      if (item !== done) {\n        const value = await item;\n        item = done;\n        return {\n          value\n        };\n      }\n\n      return {\n        done: true\n      };\n    }\n\n  };\n}","/**\n * Resolves to the given item in the path data.\n * For example, new DataHandler({}, 'foo', 'bar')\n * will return pathData.foo.bar.\n *\n * Resolution can optionally be async,\n * and/or be behind a function call.\n */\nexport default class DataHandler {\n  constructor(options, ...dataProperties) {\n    this._isAsync = options.async;\n    this._isFunction = options.function;\n    this._dataProperties = dataProperties;\n  }\n\n  static sync(...dataProperties) {\n    return new DataHandler({\n      async: false\n    }, ...dataProperties);\n  }\n\n  static syncFunction(...dataProperties) {\n    return new DataHandler({\n      async: false,\n      function: true\n    }, ...dataProperties);\n  }\n\n  static async(...dataProperties) {\n    return new DataHandler({\n      async: true\n    }, ...dataProperties);\n  }\n\n  static asyncFunction(...dataProperties) {\n    return new DataHandler({\n      async: true,\n      function: true\n    }, ...dataProperties);\n  } // Resolves the data path, or returns a function that does so\n\n\n  handle(pathData) {\n    return !this._isFunction ? this._resolveDataPath(pathData) : () => this._resolveDataPath(pathData);\n  } // Resolves the data path\n\n\n  _resolveDataPath(data) {\n    return !this._isAsync ? this._resolveSyncDataPath(data) : this._resolveAsyncDataPath(data);\n  } // Resolves synchronous property access\n\n\n  _resolveSyncDataPath(data) {\n    for (const property of this._dataProperties) data = data && data[property];\n\n    return data;\n  } // Resolves asynchronous property access\n\n\n  async _resolveAsyncDataPath(data) {\n    for (const property of this._dataProperties) data = data && (await data[property]);\n\n    return data;\n  }\n\n}","import { getFirstItem } from './iterableUtils';\n/**\n * Returns a lazy thenable to the created promise.\n */\n\nexport function lazyThenable(createPromise) {\n  return {\n    then: getThen(createPromise)\n  };\n}\n/**\n * Lazily returns the `then` function of the created promise.\n */\n\nexport function getThen(createPromise) {\n  return (onResolved, onRejected) => createPromise().then(onResolved, onRejected);\n}\n/**\n * Returns an iterable that is also a promise to the first element.\n */\n\nexport function toIterablePromise(iterable) {\n  // If called with a generator function,\n  // memoize it to enable multiple iterations\n  if (typeof iterable === 'function') iterable = memoizeIterable(iterable()); // Return an object that is iterable and a promise\n\n  return {\n    [Symbol.asyncIterator]() {\n      return iterable[Symbol.asyncIterator]();\n    },\n\n    get then() {\n      return getThen(() => getFirstItem(this));\n    },\n\n    catch(onRejected) {\n      return this.then(null, onRejected);\n    },\n\n    finally(callback) {\n      return this.then().finally(callback);\n    }\n\n  };\n}\n/**\n * Returns a memoized version of the iterable\n * that can be iterated over as many times as needed.\n */\n\nexport function memoizeIterable(iterable) {\n  const cache = [];\n  let iterator = iterable[Symbol.asyncIterator]();\n  return {\n    [Symbol.asyncIterator]() {\n      let i = 0;\n      return {\n        async next() {\n          // Return the item if it has been read already\n          if (i < cache.length) return cache[i++]; // Stop if there are no more items\n\n          if (!iterator) return {\n            done: true\n          }; // Read and cache an item from the iterable otherwise\n\n          const item = cache[i++] = iterator.next();\n          if ((await item).done) iterator = null;\n          return item;\n        }\n\n      };\n    }\n\n  };\n}","import { namedNode, literal } from '@rdfjs/data-model';\nconst xsd = 'http://www.w3.org/2001/XMLSchema#';\nconst xsdBoolean = `${xsd}boolean`;\nconst xsdDateTime = `${xsd}dateTime`;\nconst xsdDecimal = `${xsd}decimal`;\nconst xsdDouble = `${xsd}double`;\nconst xsdFloat = `${xsd}float`;\nconst xsdInteger = `${xsd}integer`;\nconst xsdBooleanTerm = namedNode(xsdBoolean);\nconst xsdDateTimeTerm = namedNode(xsdDateTime);\nconst xsdDecimalTerm = namedNode(xsdDecimal);\nconst xsdDoubleTerm = namedNode(xsdDouble);\nconst xsdIntegerTerm = namedNode(xsdInteger);\nconst xsdTrue = literal('true', xsdBooleanTerm);\nconst xsdFalse = literal('false', xsdBooleanTerm);\nconst xsdNaN = literal('NaN', xsdDoubleTerm);\nconst xsdInf = literal('INF', xsdDoubleTerm);\nconst xsdMinusInf = literal('-INF', xsdDoubleTerm);\nconst xsdPrimitives = {\n  NaN,\n  'INF': Infinity,\n  '-INF': -Infinity\n}; // Checks whether the value is asynchronously iterable\n\nexport function isAsyncIterable(value) {\n  return value && typeof value[Symbol.asyncIterator] === 'function';\n} // Checks whether the value is an object without special meaning to LDflex\n\nexport function isPlainObject(value) {\n  return value !== null && // Ignore non-objects\n  typeof value === 'object' && // Ignore arrays\n  !Array.isArray(value) && // Ignore dates\n  !(value instanceof Date) && // Ignore Promise instances\n  typeof value.then !== 'function' && // Ignore RDF/JS Term instances\n  typeof value.termType !== 'string' && // Ignore LDflex paths\n  !isAsyncIterable(value);\n} // Checks whether the arguments consist of exactly one plain object\n\nexport function hasPlainObjectArgs(args, allowMultiple = false) {\n  const hasPlainObject = args.some(isPlainObject);\n  if (hasPlainObject && !allowMultiple && args.length !== 1) throw new Error(`Expected only 1 plain object, but got ${args.length} arguments`);\n  return hasPlainObject;\n} // Ensures that the value is an array\n\nexport function ensureArray(value) {\n  if (Array.isArray(value)) return value;\n  return value ? [value] : [];\n} // Joins the arrays into a single array\n\nexport function joinArrays(arrays) {\n  return [].concat(...arrays);\n} // Ensures the value is an RDF/JS term\n\nexport function valueToTerm(value) {\n  switch (typeof value) {\n    // strings\n    case 'string':\n      return literal(value);\n    // booleans\n\n    case 'boolean':\n      return value ? xsdTrue : xsdFalse;\n    // numbers\n\n    case 'number':\n      if (Number.isInteger(value)) return literal(value.toString(), xsdIntegerTerm);else if (Number.isFinite(value)) return literal(value.toString(), xsdDecimalTerm);else if (value === Infinity) return xsdInf;else if (value === -Infinity) return xsdMinusInf;\n      return xsdNaN;\n    // other objects\n\n    default:\n      if (value) {\n        // RDF/JS Term\n        if (typeof value.termType === 'string') return value; // Date\n\n        if (value instanceof Date) return literal(value.toISOString(), xsdDateTimeTerm);\n      }\n\n  } // invalid objects\n\n\n  throw new Error(`Invalid object: ${value}`);\n} // Converts the term into a primitive value\n\nexport function termToPrimitive(term) {\n  const {\n    termType,\n    value\n  } = term; // Some literals convert into specific primitive values\n\n  if (termType === 'Literal') {\n    const datatype = term.datatype.value;\n\n    if (datatype.startsWith(xsd)) {\n      switch (datatype) {\n        case xsdBoolean:\n          return value === 'true' || value === '1';\n\n        case xsdInteger:\n          return Number.parseInt(value, 10);\n\n        case xsdDecimal:\n          return Number.parseFloat(value);\n\n        case xsdDouble:\n        case xsdFloat:\n          if (value in xsdPrimitives) return xsdPrimitives[value];\n          return Number.parseFloat(value);\n\n        case xsdDateTime:\n          return new Date(Date.parse(value));\n\n        default:\n      }\n    }\n  } // All other nodes convert to their value\n\n\n  return value;\n}","import { lazyThenable } from './promiseUtils';\nimport { iterableToArray } from './iterableUtils';\nimport { ensureArray, joinArrays, valueToTerm, hasPlainObjectArgs, isAsyncIterable } from './valueUtils';\n/**\n * Returns a function that, when called with arguments,\n * extends the path with mutationExpressions.\n *\n * Mutation functions can be called in two equivalent ways:\n * - path.property.set(object, object)\n * - path.set({ property: [object, object] })\n * Objects can be strings, terms, or path expressions.\n * The second syntax allows setting multiple properties at once.\n * It also has `null` and `undefined` as shortcuts for the empty array,\n * and a direct value as shortcut for a single-valued array.\n *\n * Requires:\n * - a pathExpression property on the path proxy and all non-raw arguments.\n */\n\nexport default class MutationFunctionHandler {\n  constructor(mutationType, allowZeroArgs) {\n    this._mutationType = mutationType;\n    this._allowZeroArgs = allowZeroArgs;\n  } // Creates a function that performs a mutation\n\n\n  handle(pathData, path) {\n    return (...args) => {\n      // Check if the given arguments are valid\n      if (!this._allowZeroArgs && !args.length) throw new Error('Mutation cannot be invoked without arguments'); // Create a lazy Promise to the mutation expressions\n\n      const mutationExpressions = lazyThenable(() => this.createMutationExpressions(pathData, path, args));\n      return pathData.extendPath({\n        mutationExpressions\n      });\n    };\n  } // Creates expressions that represent the requested mutation\n\n\n  async createMutationExpressions(pathData, path, args) {\n    // The mutation targets a single property on the path by passing objects\n    if (!hasPlainObjectArgs(args)) return [await this.createMutationExpression(pathData, path, args)]; // The mutation targets multiple properties through a map of property-objects pairs\n\n    const pairs = Object.entries(args[0]);\n    const expressions = await Promise.all(pairs.map(([property, values]) => this.createMutationExpression(pathData, path[property], ensureArray(values)))); // Group expressions together to maintain the same structure as the singular case\n    // (All properties have the same parent path, and hence the same condition)\n\n    return [expressions.length === 0 ? {} : { ...expressions[0],\n      predicateObjects: joinArrays(expressions.map(e => e.predicateObjects))\n    }];\n  } // Creates an expression that represents a mutation with the given objects\n\n\n  async createMutationExpression(pathData, path, values) {\n    // Obtain the path segments, which are the selection conditions for the mutation\n    const conditions = await path.pathExpression;\n    if (!Array.isArray(conditions)) throw new Error(`${pathData} has no pathExpression property`);\n    if (conditions.length < 2) throw new Error(`${pathData} should at least contain a subject and a predicate`); // Obtain the predicate and target objects\n\n    const {\n      predicate,\n      reverse\n    } = conditions[conditions.length - 1];\n    if (!predicate) throw new Error(`Expected predicate in ${pathData}`);\n    const objects = await this.extractObjects(pathData, path, values); // Create a mutation, unless no objects are affected (`null` means all)\n\n    return objects !== null && objects.length === 0 ? {} : {\n      mutationType: this._mutationType,\n      conditions: conditions.slice(0, -1),\n      predicateObjects: [{\n        predicate,\n        reverse,\n        objects\n      }]\n    };\n  } // Extracts individual objects from a set of values passed to a mutation function\n\n\n  async extractObjects(pathData, path, values) {\n    // If no specific values are specified, match all (represented by `null`)\n    if (values.length === 0) return null; // Otherwise, expand singular values, promises, and paths\n\n    const objects = [];\n\n    for (const value of values) {\n      if (!isAsyncIterable(value)) // Add a (promise to) a single value\n        objects.push((await value)); // Add multiple values from a path\n      else objects.push(...(await iterableToArray(value)));\n    }\n\n    return objects.map(valueToTerm);\n  }\n\n}","import MutationFunctionHandler from './MutationFunctionHandler';\n/**\n * A MutationFunctionHandler for deletions.\n */\n\nexport default class DeleteFunctionHandler extends MutationFunctionHandler {\n  constructor() {\n    super('DELETE', true);\n  }\n\n}","const VARIABLE = /(SELECT\\s+)(\\?\\S+)/;\nconst QUERY_TAIL = /\\}[^}]*$/;\n/**\n * Returns a function that preloads and caches\n * certain properties of results on the current path.\n *\n * Requires:\n * - a predicate handler on the path proxy\n * - a queryEngine property in the path settings\n *\n * Creates:\n * - a resultsCache property on the path data\n */\n\nexport default class PreloadHandler {\n  /**\n   * Creates a preload function.\n   */\n  handle(pathData, pathProxy) {\n    return async (...properties) => {\n      if (properties.length > 0) {\n        // Map the properties to predicates\n        const predicates = await Promise.all(properties.map(async p => (await pathProxy[p].predicate).value)); // Create and attach the results cache to the path data\n\n        pathData.resultsCache = await this.createResultsCache(predicates, pathData, pathProxy);\n      }\n\n      return pathProxy;\n    };\n  }\n  /**\n   * Creates a cache for the results of\n   * resolving the given predicates against the path.\n   */\n\n\n  async createResultsCache(predicates, pathData, path) {\n    // Execute the preloading query\n    const {\n      query,\n      vars,\n      resultVar\n    } = await this.createQuery(predicates, path);\n    const {\n      settings: {\n        queryEngine\n      }\n    } = pathData;\n    const bindings = queryEngine.execute(query); // Extract all results and their preloaded property values\n\n    const resultsCache = {};\n    const propertyCaches = {};\n\n    for await (const binding of bindings) {\n      // Initialize the result's cache if needed\n      const result = binding.get(resultVar),\n            hash = hashTerm(result);\n\n      if (!(hash in resultsCache)) {\n        // Create the property cache\n        const propertyCache = propertyCaches[hash] = {};\n\n        for (const predicate of predicates) propertyCache[predicate] = []; // Create the result path\n\n\n        const resultData = {\n          subject: result,\n          propertyCache\n        };\n        resultsCache[hash] = pathData.extendPath(resultData, null);\n      } // Create and cache a possible property value path from the binding\n\n\n      const propertyCache = propertyCaches[hash];\n\n      for (let i = 0; i < vars.length; i++) {\n        const value = binding.get(vars[i]);\n\n        if (value) {\n          const valuePath = pathData.extendPath({\n            subject: value\n          }, null);\n          propertyCache[predicates[i]].push(valuePath);\n        }\n      }\n    }\n\n    return Object.values(resultsCache);\n  }\n  /**\n   * Creates the query for preloading the given predicates on the path\n   */\n\n\n  async createQuery(predicates, path) {\n    // Obtain the query for the current path, and its main variable\n    const parentQuery = await path.sparql;\n    const variableMatch = VARIABLE.exec(parentQuery);\n    if (!variableMatch) throw new Error(`Unexpected path query: ${parentQuery}`);\n    const resultVar = variableMatch[2]; // Modify the query to include the preload clauses\n    // TODO: instead of query manipulation, adjust the query generator\n    // TODO: support reverse predicates\n\n    const vars = predicates.map((p, i) => `?preload_${i}`);\n    const preloadClauses = predicates.map((predicate, i) => `    { ${resultVar} <${predicate}> ${vars[i]}. }`).join('\\n    UNION\\n');\n    const query = parentQuery.replace(VARIABLE, `$1$2 ${vars.join(' ')}`).replace(QUERY_TAIL, `  OPTIONAL {\\n${preloadClauses}\\n  }\\n$&`);\n    return {\n      query,\n      vars,\n      resultVar\n    };\n  }\n\n} // Returns a unique string representation of the term\n\nfunction hashTerm(term) {\n  const {\n    termType,\n    value\n  } = term;\n\n  switch (termType) {\n    case 'NamedNode':\n      return value;\n\n    case 'Literal':\n      const {\n        language,\n        datatype\n      } = term;\n      return `${termType}|${language}|${datatype.value}|${value}`;\n\n    default:\n      return `${termType}|${value}`;\n  }\n}","/**\n * Returns a function that creates a new path with the same values,\n * but sorted on the given property.\n * The function accepts multiple properties to sort on a deeper path.\n *\n * Requires:\n *  - a predicate on the path proxy\n *  - a sort function on the path proxy (for multi-property sorting)\n */\nexport default class SortHandler {\n  constructor(order = 'ASC') {\n    this.order = order;\n  }\n\n  handle(pathData, pathProxy) {\n    return (...properties) => {\n      // Do nothing if no sort properties were given\n      if (properties.length === 0) return pathProxy; // Split off the first sort property and obtain its predicate\n\n      const [property, ...rest] = properties;\n      const {\n        predicate\n      } = pathProxy[property]; // Sort on the first property, and create paths for the next one\n\n      const childData = {\n        property,\n        predicate,\n        sort: this.order\n      };\n      const childPath = pathData.extendPath(childData);\n      return rest.length === 0 ? childPath : childPath.sort(...rest);\n    };\n  }\n\n}","import { namedNode } from '@rdfjs/data-model';\nconst NEEDS_ESCAPE = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019\\ud800-\\udbff]/,\n      ESCAPE_ALL = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019]|[\\ud800-\\udbff][\\udc00-\\udfff]/g,\n      ESCAPED_CHARS = {\n  '\\\\': '\\\\\\\\',\n  '\"': '\\\\\"',\n  '\\t': '\\\\t',\n  '\\n': '\\\\n',\n  '\\r': '\\\\r',\n  '\\b': '\\\\b',\n  '\\f': '\\\\f'\n};\n/**\n * Expresses a path or mutation as a SPARQL query.\n *\n * Requires:\n * - a mutationExpressions or pathExpression property on the path proxy\n */\n\nexport default class SparqlHandler {\n  async handle(pathData, path) {\n    // First check if we have a mutation expression\n    const mutationExpressions = await path.mutationExpressions;\n    if (Array.isArray(mutationExpressions) && mutationExpressions.length) // Remove empty results to prevent dangling semicolons\n      return mutationExpressions.map(e => this.mutationExpressionToQuery(e)).filter(Boolean).join('\\n;\\n'); // Otherwise, fall back to checking for a path expression\n\n    const pathExpression = await path.pathExpression;\n    if (!Array.isArray(pathExpression)) throw new Error(`${pathData} has no pathExpression property`);\n    return this.pathExpressionToQuery(pathData, path, pathExpression);\n  }\n\n  pathExpressionToQuery(pathData, path, pathExpression) {\n    if (pathExpression.length < 2 && !pathData.finalClause) throw new Error(`${pathData} should at least contain a subject and a predicate`); // Create triple patterns\n\n    let queryVar = '?subject',\n        sorts = [],\n        clauses = [];\n\n    if (pathExpression.length > 1) {\n      queryVar = this.createVar(pathData.property);\n      ({\n        queryVar,\n        sorts,\n        clauses\n      } = this.expressionToTriplePatterns(pathExpression, queryVar));\n    }\n\n    if (pathData.finalClause) clauses.push(pathData.finalClause(queryVar)); // Create SPARQL query body\n\n    const distinct = pathData.distinct ? 'DISTINCT ' : '';\n    const select = `SELECT ${distinct}${pathData.select ? pathData.select : queryVar}`;\n    const where = ` WHERE {\\n  ${clauses.join('\\n  ')}\\n}`;\n    const orderClauses = sorts.map(({\n      order,\n      variable\n    }) => `${order}(${variable})`);\n    const orderBy = orderClauses.length === 0 ? '' : `\\nORDER BY ${orderClauses.join(' ')}`;\n    return `${select}${where}${orderBy}`;\n  }\n\n  mutationExpressionToQuery({\n    mutationType,\n    conditions,\n    predicateObjects\n  }) {\n    // If there are no mutations, there is no query\n    if (!mutationType || !conditions || predicateObjects && predicateObjects.length === 0) return ''; // Create the WHERE clauses\n\n    const scope = {};\n    let subject, where; // If the only condition is a subject, we need no WHERE clause\n\n    if (conditions.length === 1) {\n      subject = this.termToString(conditions[0].subject);\n      where = [];\n    } // Otherwise, create a WHERE clause from all conditions\n    else {\n        const lastPredicate = conditions[conditions.length - 1].predicate;\n        subject = this.createVar(lastPredicate.value, scope);\n        ({\n          queryVar: subject,\n          clauses: where\n        } = this.expressionToTriplePatterns(conditions, subject, scope));\n      } // Create the mutation clauses\n\n\n    const mutations = [];\n\n    for (const {\n      predicate,\n      reverse,\n      objects\n    } of predicateObjects) {\n      // Mutate either only the specified objects, or all of them\n      const objectStrings = objects ? objects.map(o => this.termToString(o)) : [this.createVar(predicate.value, scope)]; // Generate a triple pattern for all subjects\n\n      mutations.push(...this.triplePatterns(subject, predicate, objectStrings, reverse));\n    }\n\n    const mutationClauses = `{\\n  ${mutations.join('\\n  ')}\\n}`; // Join clauses into a SPARQL query\n\n    return where.length === 0 ? // If there are no WHERE clauses, just mutate raw data\n    `${mutationType} DATA ${mutationClauses}` : // Otherwise, return a DELETE/INSERT ... WHERE ... query\n    `${mutationType} ${mutationClauses} WHERE {\\n  ${where.join('\\n  ')}\\n}`;\n  }\n\n  expressionToTriplePatterns([root, ...pathExpression], lastVar, scope = {}) {\n    const lastIndex = pathExpression.length - 1;\n    const clauses = [];\n    const sorts = [];\n    let object = this.termToString(skolemize(root.subject));\n    let queryVar = object;\n    let allowValues = false;\n    pathExpression.forEach((segment, index) => {\n      // Obtain components and generate triple pattern\n      const subject = object;\n      const {\n        predicate,\n        reverse,\n        sort,\n        values\n      } = segment; // Use fixed object values values if they were specified\n\n      let objects;\n\n      if (values && values.length > 0) {\n        if (!allowValues) throw new Error('Specifying fixed values is not allowed here');\n        objects = values.map(this.termToString);\n        allowValues = false; // disallow subsequent fixed values for this predicate\n      } // Otherwise, use a variable subject\n      else {\n          object = index < lastIndex ? this.createVar(`v${index}`, scope) : lastVar;\n          objects = [object];\n          allowValues = true;\n        }\n\n      clauses.push(...this.triplePatterns(subject, predicate, objects, reverse)); // If the sort option was not set, use this object as a query variable\n\n      if (!sort) {\n        queryVar = object;\n      } // If sort was set, use this object as a sorting variable\n      else {\n          // TODO: handle when an object is used for sorting, and later also for querying\n          sorts.push({\n            variable: object,\n            order: sort\n          }); // TODO: use a descriptive lastVar in case of sorting\n\n          object = queryVar;\n        }\n    });\n    return {\n      queryVar,\n      sorts,\n      clauses\n    };\n  } // Creates a unique query variable within the given scope, based on the suggestion\n\n\n  createVar(suggestion = '', scope) {\n    let counter = 0;\n    let label = `?${suggestion.match(/[a-z0-9]*$/i)[0] || 'result'}`;\n\n    if (scope) {\n      suggestion = label;\n\n      while (scope[label]) label = `${suggestion}_${counter++}`;\n\n      scope[label] = true;\n    }\n\n    return label;\n  } // Converts an RDFJS term to a string that we can use in a query\n\n\n  termToString(term) {\n    // Determine escaped value\n    let {\n      value\n    } = term;\n    if (NEEDS_ESCAPE.test(value)) value = value.replace(ESCAPE_ALL, escapeCharacter);\n\n    switch (term.termType) {\n      case 'NamedNode':\n        return `<${value}>`;\n\n      case 'BlankNode':\n        return `_:${value}`;\n\n      case 'Literal':\n        // Determine optional language or datatype\n        let suffix = '';\n        if (term.language) suffix = `@${term.language}`;else if (term.datatype.value !== 'http://www.w3.org/2001/XMLSchema#string') suffix = `^^<${term.datatype.value}>`;\n        return `\"${value}\"${suffix}`;\n\n      default:\n        throw new Error(`Could not convert a term of type ${term.termType}`);\n    }\n  } // Creates triple patterns for the given subject, predicate, and objects\n\n\n  triplePatterns(subjectString, predicateTerm, objectStrings, reverse = false) {\n    let subjectStrings = [subjectString];\n    if (reverse) [subjectStrings, objectStrings] = [objectStrings, subjectStrings];\n    const objects = objectStrings.join(', ');\n    return subjectStrings.map(s => `${s} <${predicateTerm.value}> ${objects}.`);\n  }\n\n} // Replaces a character by its escaped version\n// (borrowed from https://www.npmjs.com/package/n3)\n\nfunction escapeCharacter(character) {\n  // Replace a single character by its escaped version\n  let result = ESCAPED_CHARS[character];\n\n  if (result === undefined) {\n    // Replace a single character with its 4-bit unicode escape sequence\n    if (character.length === 1) {\n      result = character.charCodeAt(0).toString(16);\n      result = '\\\\u0000'.substr(0, 6 - result.length) + result;\n    } // Replace a surrogate pair with its 8-bit unicode escape sequence\n    else {\n        result = ((character.charCodeAt(0) - 0xD800) * 0x400 + character.charCodeAt(1) + 0x2400).toString(16);\n        result = '\\\\U00000000'.substr(0, 10 - result.length) + result;\n      }\n  }\n\n  return result;\n} // Skolemizes the given term if it is a blank node\n\n\nlet skolemId = 0;\n\nfunction skolemize(term) {\n  if (term.termType !== 'BlankNode') return term;\n  if (!term.skolemized) term.skolemized = namedNode(`urn:ldflex:sk${skolemId++}`);\n  return term.skolemized;\n}","import AsyncIteratorHandler from './AsyncIteratorHandler';\nimport DataHandler from './DataHandler';\nimport DeleteFunctionHandler from './DeleteFunctionHandler';\nimport ExecuteQueryHandler from './ExecuteQueryHandler';\nimport GetHandler from './GetFunctionHandler';\nimport InsertFunctionHandler from './InsertFunctionHandler';\nimport MutationExpressionsHandler from './MutationExpressionsHandler';\nimport PathExpressionHandler from './PathExpressionHandler';\nimport PredicateHandler from './PredicateHandler';\nimport PredicatesHandler from './PredicatesHandler';\nimport PreloadHandler from './PreloadHandler';\nimport PropertiesHandler from './PropertiesHandler';\nimport ReplaceFunctionHandler from './ReplaceFunctionHandler';\nimport SetFunctionHandler from './SetFunctionHandler';\nimport SortHandler from './SortHandler';\nimport SparqlHandler from './SparqlHandler';\nimport StringToLDflexHandler from './StringToLDflexHandler';\nimport SubjectHandler from './SubjectHandler';\nimport SubjectsHandler from './SubjectsHandler';\nimport ThenHandler from './ThenHandler';\nimport ToArrayHandler from './ToArrayHandler';\nimport { termToPrimitive } from './valueUtils';\n/**\n * A map with default property handlers.\n */\n\nexport default {\n  // Flag to loaders that exported paths are not ES6 modules\n  __esModule: () => undefined,\n  // Add thenable and async iterable behavior\n  then: new ThenHandler(),\n  [Symbol.asyncIterator]: new AsyncIteratorHandler(),\n  // Add read and query functionality\n  get: new GetHandler(),\n  subject: new SubjectHandler(),\n  predicate: new PredicateHandler(),\n  properties: new PropertiesHandler(),\n  predicates: new PredicatesHandler(),\n  pathExpression: new PathExpressionHandler(),\n  sparql: new SparqlHandler(),\n  subjects: new SubjectsHandler(),\n  results: new ExecuteQueryHandler(),\n  sort: new SortHandler('ASC'),\n  sortDesc: new SortHandler('DESC'),\n  preload: new PreloadHandler(),\n  // Add write functionality\n  mutationExpressions: new MutationExpressionsHandler(),\n  add: new InsertFunctionHandler(),\n  set: new SetFunctionHandler(),\n  replace: new ReplaceFunctionHandler(),\n  delete: new DeleteFunctionHandler(),\n  // Add RDFJS term handling\n  termType: termPropertyHandler('termType'),\n  value: termPropertyHandler('value'),\n  datatype: termPropertyHandler('datatype'),\n  language: termPropertyHandler('language'),\n  canonical: termPropertyHandler('canonical'),\n  equals: DataHandler.sync('subject', 'equals'),\n  toString: DataHandler.syncFunction('subject', 'value'),\n  valueOf: subjectToPrimitiveHandler(),\n  toPrimitive: subjectToPrimitiveHandler(),\n  // Add iteration helpers\n  toArray: new ToArrayHandler(),\n  termTypes: handler((_, path) => path.toArray(term => term.termType)),\n  values: handler((_, path) => path.toArray(term => term.value)),\n  datatypes: handler((_, path) => path.toArray(term => term.datatype)),\n  languages: handler((_, path) => path.toArray(term => term.language)),\n  // Parse a string into an LDflex object\n  resolve: new StringToLDflexHandler()\n}; // Creates a handler from the given function\n\nfunction handler(handle) {\n  return {\n    handle\n  };\n} // Creates a handler for the given RDF/JS Term property\n\n\nfunction termPropertyHandler(property) {\n  // If a resolved subject is present,\n  // behave as an RDF/JS term and synchronously expose the property;\n  // otherwise, return a promise to the property value\n  return handler(({\n    subject\n  }, path) => subject && property in subject ? subject[property] : path.then && path.then(term => term === null || term === void 0 ? void 0 : term[property]));\n} // Creates a handler that converts the subject into a primitive\n\n\nfunction subjectToPrimitiveHandler() {\n  return handler(({\n    subject\n  }) => () => typeof (subject === null || subject === void 0 ? void 0 : subject.termType) !== 'string' ? undefined : termToPrimitive(subject));\n}","import { getThen } from './promiseUtils';\nimport { getFirstItem } from './iterableUtils';\n/**\n * Thenable handler that resolves to either the subject\n * of the first item of the results.\n *\n * Requires:\n *  - (optional) a subject on the path data\n *  - (optional) a subject on the path proxy\n *  - (optional) results on the path proxy\n */\n\nexport default class ThenHandler {\n  handle({\n    subject\n  }, pathProxy) {\n    // Resolve to either the subject (zero-length path) or the first result\n    return subject ? // If the subject is not a promise, it has already been resolved;\n    // consumers should not resolve it, but access its properties directly.\n    // This avoids infinite `then` chains when `await`ing this path.\n    subject.then && getThen(() => pathProxy.subject) : // Otherwise, return the first result of this path\n    getThen(() => getFirstItem(pathProxy.results));\n  }\n\n}","import { iteratorFor } from './iterableUtils';\n/**\n * AsyncIterator handler that yields either the subject or all results.\n *\n * Requires:\n *  - (optional) a subject on the path data\n *  - (optional) a subject on the path proxy\n *  - (optional) results on the path proxy\n */\n\nexport default class AsyncIteratorHandler {\n  handle({\n    subject\n  }, pathProxy) {\n    // Return a one-item iterator of the subject if present;\n    // otherwise, return all results of this path\n    return subject ? () => iteratorFor(pathProxy.subject) : () => pathProxy.results[Symbol.asyncIterator]();\n  }\n\n}","import { isPlainObject, isAsyncIterable } from './valueUtils';\nimport { iterableToArray } from './iterableUtils';\n/**\n * Returns a function that requests the values of multiple properties.\n * You can use this function to access properties as follows:\n * - fn() returns []\n * - fn(p1) returns [path[p1]]\n * - fn(p1, p2) returns [path[p1], path[p2]]\n * - fn([p1, p2]) returns [path[p1], path[p2]]\n * - fn(asyncIterable) returns [path[p1], path[p2]]\n * - fn({ p1: null, p2: null }) returns { p1: path[p1], p2: path[p2] }\n * Combinations of the above are possible by passing them in arrays.\n */\n\nexport default class GetFunctionHandler {\n  handle(pathData, path) {\n    return (...args) => this.readProperties(path, args.length === 1 ? args[0] : args, true);\n  }\n\n  async readProperties(path, properties, wrapSingleValues = false) {\n    // Convert an async iterable to an array\n    if (isAsyncIterable(properties)) properties = await iterableToArray(properties); // If passed an array, read every property\n\n    if (Array.isArray(properties)) {\n      const values = properties.map(p => this.readProperties(path, p));\n      return Promise.all(values);\n    } // If passed an object with property names as keys,\n    // return an object with the values filled in\n\n\n    if (isPlainObject(properties)) {\n      // Use the key as property value if none is specified\n      const keys = Object.keys(properties);\n      properties = keys.map(key => properties[key] || key); // Store the resolved properties by key\n\n      const results = {};\n      const values = await this.readProperties(path, properties);\n\n      for (let i = 0; i < keys.length; i++) results[keys[i]] = values[i];\n\n      return results;\n    } // Otherwise, perform a single property access\n\n\n    const value = path[properties];\n    return wrapSingleValues ? [value] : value;\n  }\n\n}","/**\n * Returns a new path starting from the subject of the current path.\n *\n * Requires:\n * - (optional) a subject property on the path data\n * - (optional) a parent property on the path data\n */\nexport default class SubjectHandler {\n  handle(pathData) {\n    // Traverse parents until we find a subject\n    let {\n      subject,\n      parent\n    } = pathData;\n\n    while (!subject && parent) ({\n      subject,\n      parent\n    } = parent); // Resolve the subject if it exists,\n    // and return a path starting from that subject\n\n\n    return !subject ? undefined : Promise.resolve(subject).then(value => pathData.extendPath({\n      subject: value\n    }, null));\n  }\n\n}","/**\n * Returns a new path starting from the predicate of the current path.\n *\n * Requires:\n * - (optional) a predicate property on the path data\n */\nexport default class PredicateHandler {\n  handle(pathData) {\n    const {\n      predicate\n    } = pathData;\n    return !predicate ? undefined : Promise.resolve(predicate).then(subject => pathData.extendPath({\n      subject\n    }, null));\n  }\n\n}","/**\n * Queries for all compacted predicates of a path subject\n */\nimport { JsonLdContextNormalized } from 'jsonld-context-parser';\nimport { toIterablePromise } from './promiseUtils';\nexport default class PropertiesHandler {\n  handle(pathData, path) {\n    return toIterablePromise(this._handle(pathData, path));\n  }\n\n  async *_handle(pathData, path) {\n    const contextRaw = (await pathData.settings.parsedContext) || {};\n    const context = new JsonLdContextNormalized(contextRaw);\n\n    for await (const predicate of path.predicates) yield context.compactIri(`${await predicate}`, true);\n  }\n\n}","/**\n * Queries for all predicates of a path subject\n */\nexport default class PredicatesHandler {\n  handle(pathData) {\n    return pathData.extendPath({\n      distinct: true,\n      select: '?predicate',\n      finalClause: queryVar => `${queryVar} ?predicate ?object.`,\n      property: pathData.property\n    });\n  }\n\n}","/**\n * Traverses a path to collect links and nodes into an expression.\n */\nexport default class PathExpressionHandler {\n  async handle(pathData) {\n    const segments = [];\n    let current = pathData; // Add all predicates to the path\n\n    while (current.parent) {\n      // Obtain and store predicate\n      if (current.predicate) {\n        segments.unshift({\n          predicate: await current.predicate,\n          reverse: await current.reverse,\n          sort: current.sort,\n          values: current.values\n        });\n      } // Move to parent link\n\n\n      current = current.parent;\n    } // Add the root subject to the path\n\n\n    if (!current.subject) throw new Error(`Expected root subject in ${current}`);\n    const subject = await current.subject;\n    segments.unshift({\n      subject\n    });\n    return segments;\n  }\n\n}","/**\n * Queries for all subjects of a document\n */\nexport default class SubjectsHandler {\n  handle(pathData) {\n    return pathData.extendPath({\n      distinct: true,\n      select: '?subject',\n      finalClause: () => '?subject ?predicate ?object.',\n      property: pathData.property\n    });\n  }\n\n}","/**\n * Executes the query represented by a path.\n *\n * Requires:\n * - a queryEngine property in the path settings\n * - a sparql property on the path proxy\n * - (optional) a resultsCache property on the path data\n */\nexport default class ExecuteQueryHandler {\n  async *handle(pathData, path) {\n    // Try to retrieve the result from cache\n    const resultsCache = await pathData.resultsCache;\n\n    if (resultsCache) {\n      for (const result of resultsCache) yield result;\n\n      return;\n    } // Retrieve the query engine and query\n\n\n    const {\n      queryEngine\n    } = pathData.settings;\n    if (!queryEngine) throw new Error(`${pathData} has no queryEngine setting`);\n    const query = await path.sparql;\n    if (query === null || query === undefined) throw new Error(`${pathData} has no sparql property`); // No results if the query is empty\n\n    if (query.length === 0) return; // Extract the term from every query result\n\n    for await (const bindings of queryEngine.execute(query)) yield this.extractTerm(bindings, pathData);\n  }\n  /**\n   * Extracts the first term from a query result binding as a new path.\n   */\n\n\n  extractTerm(binding, pathData) {\n    // Extract the first term from the binding map\n    if (binding.size !== 1) throw new Error('Only single-variable queries are supported');\n    const subject = binding.values().next().value; // Each result is a new path that starts from the term as subject\n\n    return pathData.extendPath({\n      subject\n    }, null);\n  }\n\n}","/**\n * Traverses a path to collect mutationExpressions into an expression.\n * This is needed because mutations can be chained.\n *\n * Requires:\n * - a mutationExpressions property on the path proxy\n */\nexport default class MutationExpressionsHandler {\n  async handle(pathData) {\n    const mutationExpressions = []; // Add all mutationExpressions to the path\n\n    let current = pathData;\n\n    while (current) {\n      // Obtain and store mutationExpressions\n      if (current.mutationExpressions) mutationExpressions.unshift(...(await current.mutationExpressions)); // Move to parent link\n\n      current = current.parent;\n    }\n\n    return mutationExpressions;\n  }\n\n}","import MutationFunctionHandler from './MutationFunctionHandler';\n/**\n * A MutationFunctionHandler for insertions.\n */\n\nexport default class InsertFunctionHandler extends MutationFunctionHandler {\n  constructor() {\n    super('INSERT', false);\n  }\n\n}","import MutationFunctionHandler from './MutationFunctionHandler';\nimport { hasPlainObjectArgs } from './valueUtils';\n/**\n * Returns a function that deletes all existing values\n * for the path, and then adds the given values to the path.\n *\n * Requires:\n * - a delete function on the path proxy.\n * - an add function on the path proxy.\n */\n\nexport default class SetFunctionHandler extends MutationFunctionHandler {\n  handle(pathData, path) {\n    return (...args) => {\n      // First, delete all existing values for the property/properties\n      const deletePath = !hasPlainObjectArgs(args) ? // When a single property is given, delete all of its values\n      path.delete() : // When a map of properties is given, delete all of their values\n      Object.keys(args[0]).reduce((previousPath, property) => previousPath.delete({\n        [property]: []\n      }), path); // Next, insert the new values\n\n      return deletePath.add(...args);\n    };\n  }\n\n}","/**\n * Returns a function that deletes the given value\n * for the path, and then adds the given values to the path.\n *\n * Requires:\n * - a delete function on the path proxy.\n * - an add function on the path proxy.\n */\nexport default class ReplaceFunctionHandler {\n  handle(pathData, path) {\n    return function (oldValue, ...newValues) {\n      if (!oldValue || !newValues.length) throw new Error('Replacing values requires at least two arguments, old value followed by all new values');\n      return path.delete(oldValue).add(...newValues);\n    };\n  }\n\n}","import { isAsyncIterable } from './valueUtils';\n/**\n * Converts an asynchronously iterable path into an array.\n *\n * Requires:\n * - (optional) an iterable path\n */\n\nexport default class ToArrayHandler {\n  handle(pathData, path) {\n    return async map => {\n      const items = [];\n\n      if (isAsyncIterable(path)) {\n        // Ensure the mapping function is valid\n        if (typeof map !== 'function') map = item => item; // Retrieve and map all elements\n\n        let index = 0;\n\n        for await (const item of path) items.push((await map(item, index++)));\n      }\n\n      return items;\n    };\n  }\n\n}","/**\n * Yields a function that interprets a string expression as an LDflex path.\n */\nexport default class StringToLDflexHandler {\n  handle(pathData, path) {\n    // Resolves the given string expression against the LDflex object\n    return (expression = '', ldflex = path) => {\n      // An expression starts with a property access in dot or bracket notation\n      const propertyPath = expression // Add brackets around a single URL\n      .replace(/^(https?:\\/\\/[^()[\\]'\"]+)$/, '[\"$1\"]') // Add the starting dot if omitted\n      .replace(/^(?=[a-z$_])/i, '.') // Add quotes inside of brackets if omitted\n      .replace(/\\[([^'\"`\\](]*)\\]/g, '[\"$1\"]'); // Create a function to evaluate the expression\n\n      const body = `\"use strict\";return ldflex${propertyPath}`;\n      let evaluator;\n\n      try {\n        /* eslint no-new-func: off */\n        evaluator = Function('ldflex', body);\n      } catch ({\n        message\n      }) {\n        throw new Error(`Expression \"${expression}\" is invalid: ${message}`);\n      } // Evaluate the function\n\n\n      return evaluator(ldflex);\n    };\n  }\n\n}","const EMPTY = Object.create(null);\n/**\n * A PathProxy creates path expressions,\n * to which functionality can be attached.\n *\n * To users, these paths act as regular JavaScript objects\n * (such as `path.foo.bar.prop`) thanks to Proxy.\n * Behind the scenes, they carry around internal data\n * that can be used to influence their functionality.\n *\n * A path's functionality is realized by:\n * - handlers, which handle a specific named property\n * - resolvers, which can handle arbitrary properties\n * Only handlers and resolvers see the internal data.\n *\n * A path can have arbitrary internal data fields, but these are reserved:\n * - settings, an object that is passed on as-is to child paths\n * - proxy, a reference to the proxied object the user sees\n * - parent, a reference to the parent path\n * - apply, a function the will be invoked when the path is called as a function\n * - extendPath, a method to create a child path with this path as parent\n */\n\nexport default class PathProxy {\n  constructor({\n    handlers = EMPTY,\n    resolvers = []\n  } = {}) {\n    this._handlers = handlers;\n    this._resolvers = resolvers;\n  }\n  /**\n   * Creates a path Proxy with the given settings and internal data fields.\n   */\n\n\n  createPath(settings = {}, data) {\n    // The settings parameter is optional\n    if (data === undefined) [data, settings] = [settings, {}]; // Create the path's internal data object and the proxy that wraps it\n\n    const {\n      apply,\n      ...rawData\n    } = data;\n    const path = apply ? Object.assign(callPathFunction, rawData) : rawData;\n    const proxy = new Proxy(path, this);\n    path.proxy = proxy;\n    path.settings = settings;\n\n    function callPathFunction(...args) {\n      return apply(args, path, proxy);\n    } // Add an extendPath method to create child paths\n\n\n    if (!path.extendPath) {\n      const pathProxy = this;\n\n      path.extendPath = function extendPath(newData, parent = this) {\n        return pathProxy.createPath(settings, {\n          parent,\n          extendPath,\n          ...newData\n        });\n      };\n    } // Return the proxied path\n\n\n    return proxy;\n  }\n  /**\n   * Handles access to a property\n   */\n\n\n  get(pathData, property) {\n    // Handlers provide functionality for a specific property,\n    // so check if we find a handler first\n    const handler = this._handlers[property];\n    if (handler && typeof handler.handle === 'function') return handler.handle(pathData, pathData.proxy); // Resolvers provide functionality for arbitrary properties,\n    // so find a resolver that can handle this property\n\n    for (const resolver of this._resolvers) {\n      if (resolver.supports(property)) return resolver.resolve(property, pathData, pathData.proxy);\n    } // Otherwise, the property does not exist\n\n\n    return undefined;\n  }\n\n}","import { ContextParser, Util as ContextUtil } from 'jsonld-context-parser';\nimport { namedNode } from '@rdfjs/data-model';\nimport { lazyThenable } from './promiseUtils';\nimport { valueToTerm } from './valueUtils';\n/**\n * Resolves property names of a path\n * to their corresponding IRIs through a JSON-LD context.\n */\n\nexport default class JSONLDResolver {\n  /**\n   * Creates a new resolver for the given context(s).\n   */\n  constructor(...contexts) {\n    this._context = Promise.resolve({});\n    this.extendContext(...contexts);\n  }\n  /**\n   * The JSON-LD resolver supports all string properties.\n   */\n\n\n  supports(property) {\n    return typeof property === 'string';\n  }\n  /**\n   * When resolving a JSON-LD property,\n   * we create a new chainable path segment corresponding to the predicate.\n   *\n   * Example usage: person.friends.firstName\n   */\n\n\n  resolve(property, pathData) {\n    const predicate = lazyThenable(() => this.expandProperty(property));\n    const reverse = lazyThenable(() => this._context.then(({\n      contextRaw\n    }) => contextRaw[property] && contextRaw[property]['@reverse']));\n    const resultsCache = this.getResultsCache(pathData, predicate, reverse);\n    const newData = {\n      property,\n      predicate,\n      resultsCache,\n      reverse,\n      apply: this.apply\n    };\n    return pathData.extendPath(newData);\n  }\n  /**\n   * When the property is called as a function,\n   * it adds property-object constraints to the path.\n   *\n   * Example usage: person.friends.location(place).firstName\n   */\n\n\n  apply(args, pathData, path) {\n    if (args.length === 0) {\n      const {\n        property\n      } = pathData;\n      throw new Error(`Specify at least one term when calling .${property}() on a path`);\n    } // With the property constraint added, continue from the previous path\n\n\n    pathData.values = args.map(valueToTerm);\n    return path;\n  }\n  /**\n   * Expands a JSON property key into a full IRI.\n   */\n\n\n  async expandProperty(property) {\n    // JavaScript requires keys containing colons to be quoted,\n    // so prefixed names would need to written as path['foaf:knows'].\n    // We thus allow writing path.foaf_knows or path.foaf$knows instead.\n    property = property.replace(/^([a-z][a-z0-9]*)[_$]/i, '$1:'); // Expand the property to a full IRI\n\n    const context = await this._context;\n    const expandedProperty = context.expandTerm(property, true);\n    if (!ContextUtil.isValidIri(expandedProperty)) throw new Error(`The JSON-LD context cannot expand the '${property}' property`);\n    return namedNode(expandedProperty);\n  }\n  /**\n   * Extends the current JSON-LD context with the given context(s).\n   */\n\n\n  async extendContext(...contexts) {\n    await (this._context = this._context.then(({\n      contextRaw\n    }) => new ContextParser().parse([contextRaw, ...contexts])));\n  }\n  /**\n   * Gets the results cache for the given predicate.\n   */\n\n\n  getResultsCache(pathData, predicate, reverse) {\n    let {\n      propertyCache\n    } = pathData;\n    return propertyCache && lazyThenable(async () => {\n      // Preloading does not work with reversed predicates\n      propertyCache = !(await reverse) && (await propertyCache);\n      return propertyCache && propertyCache[(await predicate).value];\n    });\n  }\n\n}","import PathProxy from './PathProxy';\nimport JSONLDResolver from './JSONLDResolver';\nimport defaultHandlers from './defaultHandlers';\nimport { ContextParser } from 'jsonld-context-parser';\n/**\n * A PathFactory creates paths with default settings.\n */\n\nexport default class PathFactory {\n  constructor(settings, data) {\n    // Store settings and data\n    this._settings = settings = { ...settings\n    };\n    this._data = data = { ...data\n    }; // Prepare the handlers\n\n    const handlers = settings.handlers || defaultHandlers;\n\n    for (const key in handlers) handlers[key] = toHandler(handlers[key]);\n\n    for (const key of Object.getOwnPropertySymbols(handlers)) handlers[key] = toHandler(handlers[key]); // Prepare the resolvers\n\n\n    const resolvers = (settings.resolvers || []).map(toResolver);\n\n    if (settings.context) {\n      resolvers.push(new JSONLDResolver(settings.context));\n      settings.parsedContext = new ContextParser().parse(settings.context).then(({\n        contextRaw\n      }) => contextRaw);\n    } else {\n      settings.context = settings.parsedContext = {};\n    } // Instantiate PathProxy that will create the paths\n\n\n    this._pathProxy = new PathProxy({\n      handlers,\n      resolvers\n    }); // Remove PathProxy settings from the settings object\n\n    delete settings.handlers;\n    delete settings.resolvers;\n  }\n  /**\n   * Creates a path with the given (optional) settings and data.\n   */\n\n\n  create(settings = {}, data) {\n    // The settings parameter is optional\n    if (!data) [data, settings] = [settings, null]; // Apply defaults on settings and data\n\n    return this._pathProxy.createPath(Object.assign(Object.create(null), this._settings, settings), Object.assign(Object.create(null), this._data, data));\n  }\n\n}\nPathFactory.defaultHandlers = defaultHandlers;\n/**\n * Converts a handler function into a handler object.\n */\n\nexport function toHandler(handle) {\n  return typeof handle.handle === 'function' ? handle : {\n    handle\n  };\n}\n/**\n * Converts a resolver function into a catch-all resolver object.\n */\n\nexport function toResolver(resolve) {\n  return typeof resolve.resolve === 'function' ? resolve : {\n    supports,\n    resolve\n  };\n} // Catch-all resolvers support everything\n\nfunction supports() {\n  return true;\n}","import { toIterablePromise } from 'ldflex';\nimport { namedNode } from '@rdfjs/data-model';\nimport context from '@solid/context';\n\nconst { as } = context['@context'];\n\n/**\n * Base class for handlers that manipulate activities\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class ActivityHandler {\n  requireUser = true;\n\n  constructor({ activitiesPath = '/public/activities' } = {}) {\n    this.activitiesPath = activitiesPath;\n  }\n\n  handle(pathData, path) {\n    const self = this;\n    const { root } = path;\n    const { settings: { queryEngine } } = pathData;\n\n    // Return an iterator over the activity paths\n    return (type = `${as}Like`) => toIterablePromise(async function* () {\n      // Only process activities if a user is logged in\n      let user;\n      try {\n        user = await root.user;\n      }\n      catch (error) {\n        if (self.requireUser)\n          throw error;\n        return;\n      }\n\n      // Determine the storage location\n      const storage = await root.user.pim$storage;\n      const document = new URL(self.activitiesPath, storage || user).href;\n\n      // Obtain results for every activity on the path\n      const results = [];\n      const actor = namedNode(user);\n      type = namedNode(type);\n      for await (const object of path) {\n        if (object.termType === 'NamedNode') {\n          const activity = { actor, type, object };\n          for await (const result of self.createResults(activity, document, queryEngine))\n            results.push(result);\n        }\n      }\n\n      // Process all results and return paths starting from the returned terms\n      for (const term of await self.processResults(results, document, queryEngine))\n        yield root[term.value];\n    });\n  }\n\n  async processResults(results) {\n    return results;\n  }\n}\n","import { SparqlHandler } from 'ldflex';\n\nexport const { termToString } = SparqlHandler.prototype;\n\nexport function replaceVariables(template, terms) {\n  for (const name in terms)\n    template = template.replace(new RegExp(`_:${name}`, 'g'), termToString(terms[name]));\n  return template;\n}\n\n// Transforms the arguments into an Immutable.js-style list\nexport function asList(...items) {\n  return {\n    size: items.length,\n    values: () => ({\n      next: () => ({ value: items.shift() }),\n    }),\n  };\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","import ActivityHandler from './ActivityHandler';\nimport activityTemplate from './activity.ttl';\nimport { replaceVariables } from '../util';\nimport { namedNode, literal } from '@rdfjs/data-model';\nimport { v4 as uuidv4 } from 'uuid';\nimport context from '@solid/context';\n\nconst { xsd } = context['@context'];\n\n/**\n * Handler that creates an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class CreateActivityHandler extends ActivityHandler {\n  // Creates an activity for insertion in the given document\n  async* createResults(activity, document) {\n    const id = namedNode(new URL(`#${uuidv4()}`, document).href);\n    const published = literal(new Date().toISOString(), `${xsd}dateTime`);\n    activity = { id, published, ...activity };\n\n    const insert = replaceVariables(activityTemplate, activity);\n    yield { id, insert };\n  }\n\n  // Inserts the activities into the document\n  async processResults(results, document, queryEngine) {\n    const sparql = `INSERT {\\n${results.map(r => r.insert).join('')}}`;\n    await queryEngine.executeUpdate(sparql, document).next();\n    return results.map(r => r.id);\n  }\n}\n","import ActivityHandler from './ActivityHandler';\nimport queryTemplate from './activity-triples.sparql';\nimport { replaceVariables, termToString } from '../util';\n\nconst components = ['?subject', '?predicate', '?object'];\n\n/**\n * Handler that deletes an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class DeleteActivityHandler extends ActivityHandler {\n  // Finds activity triples for deletion\n  async* createResults(activity, document, queryEngine) {\n    const query = replaceVariables(queryTemplate, activity);\n    for await (const triple of queryEngine.execute(query, document)) {\n      const terms = components.map(c => termToString(triple.get(c)));\n      yield `${terms.join(' ')}.\\n`;\n    }\n  }\n\n  // Deletes the activity triples from the document\n  async processResults(results, document, queryEngine) {\n    const sparql = `DELETE {\\n${results.join('')}}`;\n    await queryEngine.executeUpdate(sparql, document).next();\n    return [];\n  }\n}\n","import { namedNode } from '@rdfjs/data-model';\n\n/**\n * LDflex property resolver that returns a new path\n * starting from the property name as a subject.\n *\n * For example, when triggered as\n *     data['http://person.example/#me'].friends.firstName\n * it will create a path with `http://person.example/#me` as subject\n * and then resolve `friends` and `firstName` against the JSON-LD context.\n *\n * In case a source object is given as input, data will be pulled from there.\n */\nexport default class SubjectPathResolver {\n  constructor(pathFactory, source) {\n    this._paths = pathFactory;\n    this._source = source;\n  }\n\n  /** Resolve all string properties (not Symbols) */\n  supports(property) {\n    return typeof property === 'string';\n  }\n\n  resolve(property, { settings }) {\n    return this._createSubjectPath(namedNode(property), settings);\n  }\n\n  _createSubjectPath(subject, { createQueryEngine }) {\n    const source = this._source || Promise.resolve(subject).catch(() => null);\n    const queryEngine = createQueryEngine(source);\n    return this._paths.create({ queryEngine }, { subject });\n  }\n}\n","import { PathFactory, defaultHandlers } from 'ldflex';\nimport SubjectPathResolver from '../resolvers/SubjectPathResolver';\n\nexport default class SourcePathHandler {\n  constructor(pathFactory) {\n    this._paths = pathFactory;\n  }\n\n  handle({ settings }) {\n    return source => new PathFactory({\n      handlers: { ...defaultHandlers },\n      resolvers: [new SubjectPathResolver(this._paths, source)],\n    }).create(settings, {});\n  }\n}\n","import SubjectPathResolver from '../resolvers/SubjectPathResolver';\nimport auth from 'solid-auth-client';\nimport { namedNode } from '@rdfjs/data-model';\n\n/**\n * Creates a path with the current user as a subject.\n */\nexport default class UserPathHandler extends SubjectPathResolver {\n  handle({ settings }) {\n    const subject = this.getWebId().then(namedNode);\n    return this._createSubjectPath(subject, settings);\n  }\n\n  /** Gets the WebID of the logged in user */\n  async getWebId() {\n    const session = await auth.currentSession();\n    if (!session)\n      throw new Error('Cannot resolve user path: no user logged in');\n    return session.webId;\n  }\n}\n","import { PathFactory, defaultHandlers } from 'ldflex';\nimport context from '@solid/context';\nimport PutHandler from './handlers/PutHandler';\nimport SolidDeleteFunctionHandler from './handlers/SolidDeleteFunctionHandler';\nimport FindActivityHandler from './handlers/FindActivityHandler';\nimport CreateActivityHandler from './handlers/CreateActivityHandler';\nimport DeleteActivityHandler from './handlers/DeleteActivityHandler';\nimport SourcePathHandler from './handlers/SourcePathHandler';\nimport UserPathHandler from './handlers/UserPathHandler';\nimport ContextResolver from './resolvers/ContextResolver';\nimport SubjectPathResolver from './resolvers/SubjectPathResolver';\n\nconst { as } = context['@context'];\nconst contextResolver = new ContextResolver(context);\n\n// Handlers for subject paths\nconst subjectHandlers = {\n  ...defaultHandlers,\n\n  // HTTP PUT handler\n  put: new PutHandler(),\n\n  // Custom delete handler to match node-solid-server behavior\n  delete: new SolidDeleteFunctionHandler(),\n\n  // Find activities\n  findActivity: new FindActivityHandler(),\n  likes: (_, path) => path.findActivity(`${as}Like`),\n  dislikes: (_, path) => path.findActivity(`${as}Dislike`),\n  follows: (_, path) => path.findActivity(`${as}Follow`),\n\n  // Create activities\n  createActivity: new CreateActivityHandler(),\n  like: (_, path) => () => path.createActivity(`${as}Like`),\n  dislike: (_, path) => () => path.createActivity(`${as}Dislike`),\n  follow: (_, path) => () => path.createActivity(`${as}Follow`),\n\n  // Delete activities\n  deleteActivity: new DeleteActivityHandler(),\n  unlike: (_, path) => () => path.deleteActivity(`${as}Like`),\n  undislike: (_, path) => () => path.deleteActivity(`${as}Dislike`),\n  unfollow: (_, path) => () => path.deleteActivity(`${as}Follow`),\n};\n\n// Creates an LDflex for Solid root path with the given settings\nexport default function createRootPath(defaultSettings) {\n  let rootPath = null;\n\n  // Factory for data paths that start from a given subject\n  const subjectPathFactory = new PathFactory({\n    handlers: { ...subjectHandlers, root: () => rootPath },\n    resolvers: [contextResolver],\n  });\n\n  // Root path that resolves the first property access\n  rootPath = new PathFactory({\n    // Handlers of specific named properties\n    handlers: {\n      ...defaultHandlers,\n\n      // The `from` function takes a source as input\n      from: new SourcePathHandler(subjectPathFactory),\n      // The `user` property starts a path with the current user as subject\n      user: new UserPathHandler(subjectPathFactory),\n\n      // Clears the cache for the given document (or everything, if undefined)\n      clearCache: ({ settings }) => doc =>\n        settings.createQueryEngine().clearCache(doc),\n\n      // Expose the JSON-LD context\n      context: contextResolver,\n    },\n    // Resolvers for all remaining properties\n    resolvers: [\n      // `data[url]` starts a path with the property as subject\n      new SubjectPathResolver(subjectPathFactory),\n    ],\n    ...defaultSettings,\n  }).create();\n  return rootPath;\n}\n","import { JSONLDResolver } from 'ldflex';\n\n/**\n * A ContextResolver is a combined resolver/handler that:\n * - resolves a JSON-LD context\n * - handles by returning an object that\n *   - is the initial context passed to the constructor\n *   - allows extending that context by calling `.extend`\n *   - when `await`ed, resolves to the expanded context\n */\nexport default class ContextResolver extends JSONLDResolver {\n  constructor(context) {\n    super(context);\n\n    // Create an exposed version of the initial context, with additional functionality\n    const exposedContext = this._exposedContext = Object.create(context['@context']);\n    // Allow extending the context\n    Object.defineProperty(exposedContext, 'extend', {\n      value: (...contexts) => this.extendContext(...contexts),\n    });\n    // Resolve to the expanded context\n    Object.defineProperty(exposedContext, 'then', {\n      value: (resolve, reject) => this._context\n        .then(ctx => ctx.contextRaw).then(resolve, reject),\n    });\n  }\n\n  handle() {\n    return this._exposedContext;\n  }\n}\n","import { toIterablePromise } from 'ldflex';\nimport auth from 'solid-auth-client';\n\n/**\n * Creates a document for every result with the given contents.\n * Requires:\n * - the `root[...]` resolver\n */\nexport default class PutHandler {\n  handle(pathData, path) {\n    const { root } = path;\n\n    // Return an iterator over the created documents\n    return (body = '', contentType = 'text/turtle') =>\n      toIterablePromise(async function* () {\n        // Collect all unique URLs from the path\n        const urls = new Set();\n        for await (const result of path) {\n          const match = /^https?:\\/\\/[^#]+/.exec(result ? result.value : '');\n          if (match)\n            urls.add(match[0]);\n        }\n\n        // Create and execute HTTP requests for every URL\n        const requests = [...urls].map(url => auth.fetch(url, {\n          method: 'PUT',\n          headers: { 'Content-Type': contentType },\n          body,\n        }));\n        await Promise.all(requests);\n\n        // Return paths to the created documents\n        for (const url of urls)\n          yield root[url];\n      });\n  }\n}\n","import { DeleteFunctionHandler } from 'ldflex';\n\n/**\n * node-solid-server deviates from the SPARQL UPDATE spec:\n * whereas the spec asks for DELETE on non-existing triples to silently succeed,\n * node-solid-server will only DELETE if exactly one triple matches.\n *\n * This delete handler works around that limitation\n * by first requesting all existing values for a path,\n * and then only issuing DELETE statements for those that exist.\n */\nexport default class SolidDeleteFunctionHandler extends DeleteFunctionHandler {\n  async extractObjects(pathData, path, args) {\n    // Obtain all values whose deletion was requested\n    const objects = await super.extractObjects(pathData, path, args);\n\n    // Obtain all values that currently exist\n    const existing = [];\n    for await (const term of path) {\n      if (term.termType !== 'BlankNode')\n        existing.push(term);\n    }\n\n    // Perform deletions only for values that exist\n    return !objects ? existing : existing.filter(e => objects.some(o => o.equals(e)));\n  }\n}\n","import ActivityHandler from './ActivityHandler';\nimport queryTemplate from './activity.sparql';\nimport { replaceVariables } from '../util';\n\n/**\n * Handler that finds an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class FindActivityHandler extends ActivityHandler {\n  requireUser = false;\n\n  // Finds all activities in the document matching the given pattern\n  async* createResults(activity, document, queryEngine) {\n    const query = replaceVariables(queryTemplate, activity);\n    for await (const binding of queryEngine.execute(query, document))\n      yield binding.values().next().value;\n  }\n}\n","import auth from 'solid-auth-client';\nimport { asList } from './util';\n\n/**\n * A wrapper around a query engine\n * that uses Solid authenticated requests for updates.\n */\nexport default class SolidUpdateEngine {\n  /**\n   * Creates a wrapper around the given query engine.\n   */\n  constructor(sources, baseEngine) {\n    // Preload source but silence errors; they will be thrown during execution\n    this._source = this.getUpdateSource(sources);\n    this._source.catch(() => null);\n    this._engine = baseEngine;\n  }\n\n  /**\n   * Creates an asynchronous iterable of results for the given SPARQL query.\n   */\n  async* execute(sparql, sources) {\n    yield* /^\\s*(?:INSERT|DELETE)/i.test(sparql) ?\n      this.executeUpdate(sparql, sources) :\n      this._engine.execute(sparql, sources);\n  }\n\n  /**\n   * Creates an asynchronous iterable with the results of the SPARQL UPDATE query.\n   */\n  executeUpdate(sparql, sources) {\n    let done = false;\n    const next = async () => {\n      if (done)\n        return { done };\n      done = true;\n\n      // Send authenticated PATCH request to the document\n      const source = await (sources ? this.getUpdateSource(sources) : this._source);\n      const { ok, status, statusText } = await auth.fetch(source, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/sparql-update',\n        },\n        body: sparql,\n      });\n      if (!ok)\n        throw new Error(`Update query failed (${status}): ${statusText}`);\n\n      // Clear stale cached versions of the document\n      await this.clearCache(source);\n\n      // Return success\n      return { value: asList({ ok }) };\n    };\n    return {\n      next,\n      return: noop, throw: noop, // required by the interface\n      [Symbol.asyncIterator]() { return this; },\n    };\n  }\n\n  /**\n   * Parses the source(s) into the source to update.\n   */\n  async getUpdateSource(sources) {\n    let source = await sources;\n\n    // Transform URLs or terms into strings\n    if (source instanceof URL)\n      source = source.href;\n    else if (source && typeof source.value === 'string')\n      source = source.value;\n\n    // Parse a string URL source\n    if (typeof source === 'string') {\n      if (!/^https?:\\/\\//.test(source))\n        throw new Error('Can only update an HTTP(S) document.');\n      return source.replace(/#.*/, '');\n    }\n\n    // Flatten recursive calls to this function\n    if (Array.isArray(source)) {\n      source = await Promise.all(source.map(s => this.getUpdateSource(s)));\n      source = [].concat(...source).filter(s => !!s);\n      if (source.length !== 1)\n        throw new Error('Can only update a single source.');\n      return source[0];\n    }\n\n    // Error on unsupported sources\n    throw new Error(`Unsupported source: ${source}`);\n  }\n\n  /**\n   * Removes the given document (or all, if not specified) from the cache,\n   * such that fresh results are obtained next time.\n   */\n  clearCache(document) {\n    return this._engine.clearCache(document);\n  }\n}\n\nfunction noop() { /* empty */ }\n","import RdflibQueryEngine from './RdflibQueryEngine';\nexport default RdflibQueryEngine;\n","import {\n  graph,\n  Fetcher,\n  SPARQLToQuery as sparqlToQuery,\n} from 'rdflib';\n\n/**\n * Asynchronous iterator wrapper for the rdflib.js SPARQL query engine.\n */\nexport default class RdflibQueryEngine {\n  /**\n   * Creates a query engine with the given sources as default.\n   */\n  constructor(defaultSources) {\n    // Preload sources but silence errors; they will be thrown during execution\n    this._defaultStore = this.readSources(defaultSources);\n    this._defaultStore.catch(() => null);\n  }\n\n  /**\n   * Creates an asynchronous iterable of results for the given SPARQL query.\n   */\n  async* execute(sparql, sources) {\n    if ((/^\\s*(?:INSERT|DELETE)/i).test(sparql))\n      yield* this.executeUpdate(sparql, sources);\n\n    // Parse the SPARQL query\n    const query = sparqlToQuery(sparql, true, graph());\n    // Load the sources if passed, the default sources otherwise\n    const store = await (sources ? this.readSources(sources) : this._defaultStore);\n    // Disable link traversal for now (slow, and unreliable error handling)\n    store.fetcher = null;\n\n    // Execute the query and store the results in an array\n    const results = [];\n    await new Promise((resolve, reject) => {\n      store.query(query, result => results.push(result), null,\n        error => error ? reject(error) : resolve(results));\n    });\n\n    // Convert every result to a map\n    const vars = new Set(query.vars.map(v => `?${v.value}`));\n    for (const result of results) {\n      // Only return explicitly requested variables\n      // (workaround for https://github.com/linkeddata/rdflib.js/issues/393)\n      const bindings = Object.entries(result).filter(([v]) => vars.has(v));\n      yield new Map(bindings);\n    }\n  }\n\n  /**\n   * Creates an asynchronous iterable with the results of the SPARQL UPDATE query.\n   */\n  async* executeUpdate(sparql, sources) {\n    throw new Error(`SPARQL UPDATE queries are unsupported, received: ${sparql}`);\n  }\n\n  /**\n   * Reads the specified stores into a store.\n   */\n  async readSources(sourceList, store = graph()) {\n    let source = await sourceList;\n    if (source) {\n      // Transform URLs or terms into strings\n      if (source instanceof URL)\n        source = source.href;\n      else if (source.termType === 'NamedNode')\n        source = source.value;\n\n      // Read a document from a URL\n      if (typeof source === 'string') {\n        const document = source.replace(/#.*/, '');\n        const fetcher = new Fetcher(store);\n        await fetcher.load(document);\n      }\n      // Read an array of sources\n      else if (Array.isArray(source)) {\n        await Promise.all(source.map(s => this.readSources(s, store)));\n      }\n      // Read an RDF/JS source\n      else if (typeof source.match === 'function') {\n        const results = source.match(null, null, null, null);\n        await new Promise((resolve, reject) => {\n          results.on('data', addQuad);\n          results.on('end', finish);\n          results.on('error', finish);\n          // Adds a quad to the store\n          function addQuad(quad) {\n            try {\n              store.add(quad.subject, quad.predicate, quad.object, quad.graph);\n            }\n            catch (error) {\n              finish(error);\n            }\n          }\n          // Finishes reading the source\n          function finish(error) {\n            results.removeListener('data', addQuad);\n            results.removeListener('end', finish);\n            results.removeListener('error', finish);\n            return error ? reject(error) : resolve(null);\n          }\n        });\n      }\n      // Error on unsupported sources\n      else {\n        throw new Error(`Unsupported source: ${source}`);\n      }\n    }\n    return store;\n  }\n\n  /**\n   * Removes the given document (or all, if not specified) from the cache,\n   * such that fresh results are obtained next time.\n   */\n  async clearCache(document) {\n    // No action required, since we need a new fetcher for every store\n  }\n}\n","import RootPath from '../RootPath';\nimport SolidUpdateEngine from '../SolidUpdateEngine';\nimport RdflibQueryEngine from '@ldflex/rdflib';\n\n// Export the root path with rdflib.js as query engine\nexport default new RootPath({\n  createQueryEngine: sources =>\n    new SolidUpdateEngine(sources, new RdflibQueryEngine(sources)),\n});\n"],"sourceRoot":""}