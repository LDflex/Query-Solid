{"version":3,"sources":["webpack://solid.data/webpack/bootstrap","webpack://solid.data/./node_modules/@rdfjs/data-model/index.js","webpack://solid.data/./node_modules/ldflex/node_modules/jsonld-context-parser/index.js","webpack://solid.data/external \"$rdf\"","webpack://solid.data/external [\"solid\",\"auth\"]","webpack://solid.data/./node_modules/isomorphic-fetch/fetch-npm-browserify.js","webpack://solid.data/./node_modules/ldflex/node_modules/jsonld-context-parser/lib/FetchDocumentLoader.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/default-graph.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/named-node.js","webpack://solid.data/./node_modules/uuid/v4.js","webpack://solid.data/./node_modules/ldflex/node_modules/jsonld-context-parser/lib/ContextParser.js","webpack://solid.data/./node_modules/whatwg-fetch/fetch.js","webpack://solid.data/./node_modules/relative-to-absolute-iri/index.js","webpack://solid.data/./node_modules/relative-to-absolute-iri/lib/Resolve.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/data-factory.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/blank-node.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/literal.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/quad.js","webpack://solid.data/./node_modules/@rdfjs/data-model/lib/variable.js","webpack://solid.data/./node_modules/uuid/deprecate.js","webpack://solid.data/./node_modules/util/util.js","webpack://solid.data/./browser/process.js","webpack://solid.data/./node_modules/timers-browserify/main.js","webpack://solid.data/(webpack)/buildin/global.js","webpack://solid.data/./browser/setImmediate.js","webpack://solid.data/./node_modules/util/support/isBufferBrowser.js","webpack://solid.data/./node_modules/util/node_modules/inherits/inherits_browser.js","webpack://solid.data/./node_modules/uuid/dist/v4.js","webpack://solid.data/./node_modules/uuid/dist/rng-browser.js","webpack://solid.data/./node_modules/uuid/dist/bytesToUuid.js","webpack://solid.data/./node_modules/ldflex/module/iterableUtils.js","webpack://solid.data/./node_modules/ldflex/module/DataHandler.js","webpack://solid.data/./node_modules/ldflex/module/promiseUtils.js","webpack://solid.data/./node_modules/ldflex/module/MutationFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/DeleteFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/PreloadHandler.js","webpack://solid.data/./node_modules/ldflex/module/SortHandler.js","webpack://solid.data/./node_modules/ldflex/module/SparqlHandler.js","webpack://solid.data/./node_modules/ldflex/module/defaultHandlers.js","webpack://solid.data/./node_modules/ldflex/module/ThenHandler.js","webpack://solid.data/./node_modules/ldflex/module/AsyncIteratorHandler.js","webpack://solid.data/./node_modules/ldflex/module/SubjectHandler.js","webpack://solid.data/./node_modules/ldflex/module/PredicateHandler.js","webpack://solid.data/./node_modules/ldflex/module/PropertiesHandler.js","webpack://solid.data/./node_modules/ldflex/module/PredicatesHandler.js","webpack://solid.data/./node_modules/ldflex/module/PathExpressionHandler.js","webpack://solid.data/./node_modules/ldflex/module/SubjectsHandler.js","webpack://solid.data/./node_modules/ldflex/module/ExecuteQueryHandler.js","webpack://solid.data/./node_modules/ldflex/module/MutationExpressionsHandler.js","webpack://solid.data/./node_modules/ldflex/module/InsertFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/SetFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/ReplaceFunctionHandler.js","webpack://solid.data/./node_modules/ldflex/module/ToArrayHandler.js","webpack://solid.data/./node_modules/ldflex/module/StringToLDflexHandler.js","webpack://solid.data/./node_modules/ldflex/module/PathProxy.js","webpack://solid.data/./node_modules/ldflex/module/JSONLDResolver.js","webpack://solid.data/./node_modules/ldflex/module/PathFactory.js","webpack://solid.data/./src/handlers/ActivityHandler.js","webpack://solid.data/./src/util.js","webpack://solid.data/./src/handlers/CreateActivityHandler.js","webpack://solid.data/./src/handlers/DeleteActivityHandler.js","webpack://solid.data/./src/resolvers/SubjectPathResolver.js","webpack://solid.data/./src/handlers/SourcePathHandler.js","webpack://solid.data/./src/handlers/UserPathHandler.js","webpack://solid.data/./src/RootPath.js","webpack://solid.data/./src/resolvers/ContextResolver.js","webpack://solid.data/./src/handlers/SolidDeleteFunctionHandler.js","webpack://solid.data/./src/handlers/FindActivityHandler.js","webpack://solid.data/./src/SolidUpdateEngine.js","webpack://solid.data/./node_modules/@ldflex/rdflib/src/index.js","webpack://solid.data/./node_modules/@ldflex/rdflib/src/RdflibQueryEngine.js","webpack://solid.data/./src/exports/rdflib.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","DataFactory","__export","$rdf","solid","self","fetch","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","FetchDocumentLoader","url","response","headers","accept","ok","json","Error","statusText","DefaultGraph","equals","other","termType","NamedNode","iri","deprecate","v4","relative_to_absolute_iri_1","FetchDocumentLoader_1","ContextParser","options","documentLoader","documentCache","validate","skipValidation","expandContentTypeToBase","term","indexOf","context","separatorPos","length","charAt","prefix","substr","contextValue","id","vocab","assertNormalized","getContextValueId","getPrefix","isCompactIri","startsWith","shortestPrefixing","suffix","contextIri","Array","isArray","IRI_REGEX","test","keys","EXPAND_KEYS_BLACKLIST","ALIAS_KEYS_BLACKLIST","isPrefixValue","changed","expandTerm","type","toLowerCase","valueType","JSON","stringify","objectKey","objectValue","isValidIri","CONTAINERS","join","baseIri","parentContext","external","parse","load","normalizeContextIri","all","map","subContext","reduce","accContextPromise","contextEntry","accContext","newContext","assign","idifyReverseTerms","expandPrefixedTerms","normalize","cached","slice","support","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","toString","normalizeName","String","TypeError","normalizeValue","iteratorFor","items","iterator","shift","undefined","Headers","forEach","append","header","getOwnPropertyNames","consumed","body","bodyUsed","fileReaderReady","reader","onload","onerror","error","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","arrayBuffer","text","readAsText","chars","fromCharCode","readArrayBufferAsText","formData","decode","oldValue","has","callback","push","values","entries","methods","Request","input","method","upcased","credentials","signal","toUpperCase","referrer","form","trim","split","bytes","replace","decodeURIComponent","Response","bodyInit","status","clone","redirectStatuses","redirect","RangeError","location","DOMException","err","message","stack","constructor","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","removeDotSegments","path","segmentBuffers","isCharacterAllowedAfterRelativePathSegment","pop","removeDotSegmentsOfPath","colonPosition","searchOffset","pathSeparator","character","relativeIRI","baseIRI","baseFragmentPos","baseQueryPos","valueColonPos","baseColonPos","baseIRIScheme","baseSlashAfterColonPos","baseIRIPath","baseIRILastSlashPos","lastIndexOf","BlankNode","Literal","Quad","Variable","namedNode","blankNode","literal","languageOrDatatype","defaultGraph","defaultGraphInstance","variable","triple","subject","predicate","quad","graph","nextId","language","datatype","stringDatatype","langStringDatatype","fn","msg","warned","console","warn","arguments","getOwnPropertyDescriptors","descriptors","getOwnPropertyDescriptor","formatRegExp","format","f","isString","objects","inspect","args","len","str","x","Number","_","isNull","isObject","process","noDeprecation","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","isFunction","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","array","hash","val","idx","arrayToHash","isError","formatError","isRegExp","RegExp","isDate","Date","output","base","braces","toUTCString","formatProperty","match","formatArray","prev","cur","numLinesEst","reduceToSingleString","desc","ar","arg","re","objectToString","pad","debuglog","env","NODE_DEBUG","pid","isNullOrUndefined","isSymbol","isPrimitive","isBuffer","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","log","inherits","origin","add","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","writable","configurable","promiseResolve","promiseReject","setPrototypeOf","getPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","nextTick","rej","noop","setImmediate","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","window","Function","Timeout","clearFn","_id","_clearFn","setTimeout","scope","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","global","clearImmediate","g","resolved","copy","fill","readUInt8","ctor","superCtor","super_","TempCtor","default","_rng","_interopRequireDefault","_bytesToUuid","_default","offset","rnds","random","rng","ii","getRandomValues","rnds8","crypto","msCrypto","byteToHex","bth","getFirstItem","iterable","asyncIterator","DataHandler","dataProperties","_isAsync","async","_isFunction","function","_dataProperties","pathData","_resolveDataPath","data","_resolveAsyncDataPath","_resolveSyncDataPath","lazyThenable","createPromise","getThen","onResolved","onRejected","toIterablePromise","cache","memoizeIterable","finally","mutationType","allowZeroArgs","_mutationType","_allowZeroArgs","concat","mutationExpressions","createMutationExpressions","extendPath","conditions","pathExpression","extractObjects","extractObject","super","VARIABLE","QUERY_TAIL","hashTerm","SortHandler","order","pathProxy","properties","rest","childData","sort","childPath","NEEDS_ESCAPE","ESCAPE_ALL","ESCAPED_CHARS","SparqlHandler","mutationExpressionToQuery","pathExpressionToQuery","finalClause","queryVar","sorts","clauses","createVar","expressionToTriplePatterns","distinct","select","where","orderClauses","orderBy","termToString","lastPredicate","objectList","mutationPattern","root","lastVar","lastIndex","skolemized","skolemId","skolemize","segment","index","suggestion","counter","label","escapeCharacter","charCodeAt","results","parent","_handle","settings","parsedContext","predicates","compactIri","segments","current","unshift","sparql","subjects","resultsCache","queryEngine","query","bindings","execute","extractTerm","size","sortDesc","preload","createResultsCache","vars","resultVar","createQuery","propertyCaches","propertyCache","resultData","valuePath","parentQuery","variableMatch","exec","preloadClauses","delete","newValues","termPropertyHandler","sync","syncFunction","toPrimitive","toArray","termTypes","handler","datatypes","languages","expression","ldflex","propertyPath","evaluator","handle","subjectValue","EMPTY","PathProxy","handlers","resolvers","_handlers","_resolvers","proxy","Proxy","newData","createPath","resolver","supports","contexts","_context","extendContext","expandProperty","getResultsCache","expandedProperty","currentContext","_settings","_data","defaultHandlers","toHandler","getOwnPropertySymbols","toResolver","_pathProxy","as","ActivityHandler","activitiesPath","requireUser","user","storage","pim$storage","document","URL","href","actor","activity","createResults","processResults","replaceVariables","template","terms","asList","xsd","components","SubjectPathResolver","pathFactory","source","_paths","_source","_createSubjectPath","createQueryEngine","catch","SourcePathHandler","PathFactory","UserPathHandler","getWebId","session","auth","currentSession","webId","contextResolver","JSONLDResolver","exposedContext","_exposedContext","subjectHandlers","DeleteFunctionHandler","existing","filter","some","findActivity","likes","dislikes","follows","createActivity","uuid","insert","published","toISOString","executeUpdate","like","dislike","follow","deleteActivity","unlike","undislike","unfollow","SolidUpdateEngine","sources","baseEngine","getUpdateSource","_engine","clearCache","defaultSources","_defaultStore","readSources","store","fetcher","Set","v","Map","sourceList","addQuad","finish","defaultSettings","rootPath","subjectPathFactory","from","doc","RdflibQueryEngine"],"mappings":"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","file":"solid-query-ldflex.rdflib.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n","var DataFactory = require('./lib/data-factory')\n\nmodule.exports = DataFactory\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/ContextParser\"));\n__export(require(\"./lib/FetchDocumentLoader\"));\n//# sourceMappingURL=index.js.map","module.exports = $rdf;","module.exports = solid[\"auth\"];","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"isomorphic-fetch\");\n/**\n * Loads documents via the fetch API.\n */\nclass FetchDocumentLoader {\n    load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield fetch(url, { headers: { accept: 'application/ld+json' } });\n            if (response.ok) {\n                return (yield response.json());\n            }\n            else {\n                throw new Error(`No valid context was found at ${url}: ${response.statusText}`);\n            }\n        });\n    }\n}\nexports.FetchDocumentLoader = FetchDocumentLoader;\n//# sourceMappingURL=FetchDocumentLoader.js.map","function DefaultGraph () {\n  this.value = ''\n}\n\nDefaultGraph.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType\n}\n\nDefaultGraph.prototype.termType = 'DefaultGraph'\n\nmodule.exports = DefaultGraph\n","function NamedNode (iri) {\n  this.value = iri\n}\n\nNamedNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nNamedNode.prototype.termType = 'NamedNode'\n\nmodule.exports = NamedNode\n","const deprecate = require('./deprecate.js');\n\nconst v4 = require('./dist/v4.js');\n\nmodule.exports = deprecate(\n  v4,\n  \"Deep requiring like `const uuidv4 = require('uuid/v4');` is deprecated as of uuid@7.x. Please require the top-level module when using the Node.js CommonJS module or use ECMAScript Modules when bundling for the browser. See https://github.com/uuidjs/uuid#deep-requires-now-deprecated for more information.\",\n);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"isomorphic-fetch\");\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\nconst FetchDocumentLoader_1 = require(\"./FetchDocumentLoader\");\n/**\n * Parses JSON-LD contexts.\n */\nclass ContextParser {\n    constructor(options) {\n        options = options || {};\n        this.documentLoader = options.documentLoader || new FetchDocumentLoader_1.FetchDocumentLoader();\n        this.documentCache = {};\n        this.validate = !options.skipValidation;\n        this.expandContentTypeToBase = options.expandContentTypeToBase;\n    }\n    /**\n     * Check if the given term is a valid compact IRI.\n     * Otherwise, it may be an IRI.\n     * @param {string} term A term.\n     * @return {boolean} If it is a compact IRI.\n     */\n    static isCompactIri(term) {\n        return term.indexOf(':') >= 0 && !(term && term[0] === '#');\n    }\n    /**\n     * Get the prefix from the given term.\n     * @see https://json-ld.org/spec/latest/json-ld/#compact-iris\n     * @param {string} term A term that is an URL or a prefixed URL.\n     * @param {IJsonLdContextNormalized} context A context.\n     * @return {string} The prefix or null.\n     */\n    static getPrefix(term, context) {\n        // Do not consider relative IRIs starting with a hash as compact IRIs\n        if (term && term[0] === '#') {\n            return null;\n        }\n        const separatorPos = term.indexOf(':');\n        if (separatorPos >= 0) {\n            // Suffix can not begin with two slashes\n            if (term.length > separatorPos + 1\n                && term.charAt(separatorPos + 1) === '/'\n                && term.charAt(separatorPos + 2) === '/') {\n                return null;\n            }\n            const prefix = term.substr(0, separatorPos);\n            // Prefix can not be an underscore (this is a blank node)\n            if (prefix === '_') {\n                return null;\n            }\n            // Prefix must match a term in the active context\n            if (context[prefix]) {\n                return prefix;\n            }\n        }\n        return null;\n    }\n    /**\n     * From a given context entry value, get the string value, or the @id field.\n     * @param contextValue A value for a term in a context.\n     * @return {string} The id value, or null.\n     */\n    static getContextValueId(contextValue) {\n        if (contextValue === null || typeof contextValue === 'string') {\n            return contextValue;\n        }\n        const id = contextValue['@id'];\n        return id ? id : null;\n    }\n    /**\n     * Expand the term or prefix of the given term if it has one,\n     * otherwise return the term as-is.\n     *\n     * This will try to expand the IRI as much as possible.\n     *\n     * Iff in vocab-mode, then other references to other terms in the context can be used,\n     * such as to `myTerm`:\n     * ```\n     * {\n     *   \"myTerm\": \"http://example.org/myLongTerm\"\n     * }\n     * ```\n     *\n     * @param {string} term A term that is an URL or a prefixed URL.\n     * @param {IJsonLdContextNormalized} context A context.\n     * @param {boolean} vocab If the term is a predicate or type and should be expanded based on @vocab,\n     *                        otherwise it is considered a regular term that is expanded based on @base.\n     * @return {string} The expanded term, the term as-is, or null if it was explicitly disabled in the context.\n     */\n    static expandTerm(term, context, vocab) {\n        ContextParser.assertNormalized(context);\n        const contextValue = context[term];\n        // Immediately return if the term was disabled in the context\n        if (contextValue === null || (contextValue && contextValue['@id'] === null)) {\n            return null;\n        }\n        // Check the @id\n        if (contextValue && vocab) {\n            const value = this.getContextValueId(contextValue);\n            if (value && value !== term) {\n                return value;\n            }\n        }\n        // Check if the term is prefixed\n        const prefix = ContextParser.getPrefix(term, context);\n        if (prefix) {\n            const value = this.getContextValueId(context[prefix]);\n            if (value) {\n                return value + term.substr(prefix.length + 1);\n            }\n        }\n        else if (vocab && context['@vocab'] && term.charAt(0) !== '@' && !ContextParser.isCompactIri(term)) {\n            return context['@vocab'] + term;\n        }\n        else if (!vocab && context['@base'] && term.charAt(0) !== '@' && !ContextParser.isCompactIri(term)) {\n            return relative_to_absolute_iri_1.resolve(term, context['@base']);\n        }\n        return term;\n    }\n    /**\n     * Compact the given term using @base, @vocab, an aliased term, or a prefixed term.\n     *\n     * This will try to compact the IRI as much as possible.\n     *\n     * @param {string} iri An IRI to compact.\n     * @param {IJsonLdContextNormalized} context The context to compact with.\n     * @param {boolean} vocab If the term is a predicate or type and should be compacted based on @vocab,\n     *                        otherwise it is considered a regular term that is compacted based on @base.\n     * @return {string} The compacted term or the IRI as-is.\n     */\n    static compactIri(iri, context, vocab) {\n        ContextParser.assertNormalized(context);\n        // Try @vocab compacting\n        if (vocab && context['@vocab'] && iri.startsWith(context['@vocab'])) {\n            return iri.substr(context['@vocab'].length);\n        }\n        // Try @base compacting\n        if (!vocab && context['@base'] && iri.startsWith(context['@base'])) {\n            return iri.substr(context['@base'].length);\n        }\n        // Loop over all terms in the context\n        // This will try to prefix as short as possible.\n        // Once a fully compacted alias is found, return immediately, as we can not go any shorter.\n        const shortestPrefixing = { prefix: '', suffix: iri };\n        for (const key in context) {\n            const value = context[key];\n            if (value && !key.startsWith('@')) {\n                const contextIri = this.getContextValueId(value);\n                if (iri.startsWith(contextIri)) {\n                    const suffix = iri.substr(contextIri.length);\n                    if (!suffix) {\n                        if (vocab) {\n                            // Immediately return on compacted alias\n                            return key;\n                        }\n                    }\n                    else if (suffix.length < shortestPrefixing.suffix.length) {\n                        // Overwrite the shortest prefix\n                        shortestPrefixing.prefix = key;\n                        shortestPrefixing.suffix = suffix;\n                    }\n                }\n            }\n        }\n        // Return the shortest prefix\n        if (shortestPrefixing.prefix) {\n            return shortestPrefixing.prefix + ':' + shortestPrefixing.suffix;\n        }\n        return iri;\n    }\n    /**\n     * An an assert to check if the given context has been normalized.\n     * An error will be thrown otherwise.\n     * @param {JsonLdContext} context A context.\n     */\n    static assertNormalized(context) {\n        if (typeof context === 'string' || Array.isArray(context) || context['@context']) {\n            throw new Error('The given context is not normalized. Make sure to call ContextParser.parse() first.');\n        }\n    }\n    /**\n     * Check if the given context value can be a prefix value.\n     * @param value A context value.\n     * @return {boolean} If it can be a prefix value.\n     */\n    static isPrefixValue(value) {\n        return value && (typeof value === 'string' || value['@id'] || value['@type']);\n    }\n    /**\n     * Check if the given IRI is valid.\n     * @param {string} iri A potential IRI.\n     * @return {boolean} If the given IRI is valid.\n     */\n    static isValidIri(iri) {\n        return ContextParser.IRI_REGEX.test(iri);\n    }\n    /**\n     * Add an @id term for all @reverse terms.\n     * @param {IJsonLdContextNormalized} context A context.\n     * @return {IJsonLdContextNormalized} The mutated input context.\n     */\n    static idifyReverseTerms(context) {\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            if (value && typeof value === 'object') {\n                if (value['@reverse'] && !value['@id']) {\n                    if (typeof value['@reverse'] !== 'string') {\n                        throw new Error(`Invalid @reverse value: '${value['@reverse']}'`);\n                    }\n                    value['@id'] = value['@reverse'];\n                    value['@reverse'] = true;\n                }\n            }\n        }\n        return context;\n    }\n    /**\n     * Expand all prefixed terms in the given context.\n     * @param {IJsonLdContextNormalized} context A context.\n     * @param {boolean} expandContentTypeToBase If @type inside the context may be expanded\n     *                                          via @base if @vocab is set to null.\n     * @return {IJsonLdContextNormalized} The mutated input context.\n     */\n    static expandPrefixedTerms(context, expandContentTypeToBase) {\n        for (const key of Object.keys(context)) {\n            // Only expand allowed keys\n            if (ContextParser.EXPAND_KEYS_BLACKLIST.indexOf(key) < 0) {\n                // Error if we try to alias a keyword to something else.\n                if (key[0] === '@' && ContextParser.ALIAS_KEYS_BLACKLIST.indexOf(key) >= 0) {\n                    throw new Error(`Keywords can not be aliased to something else.\nTried mapping ${key} to ${context[key]}`);\n                }\n                // Loop because prefixes might be nested\n                while (ContextParser.isPrefixValue(context[key])) {\n                    const value = context[key];\n                    let changed = false;\n                    if (typeof value === 'string') {\n                        context[key] = ContextParser.expandTerm(value, context, true);\n                        changed = changed || value !== context[key];\n                    }\n                    else {\n                        const id = value['@id'];\n                        const type = value['@type'];\n                        if (id) {\n                            context[key]['@id'] = ContextParser.expandTerm(id, context, true);\n                            changed = changed || id !== context[key]['@id'];\n                        }\n                        if (type && type !== '@vocab') {\n                            // First check @vocab, then fallback to @base\n                            context[key]['@type'] = ContextParser.expandTerm(type, context, true);\n                            if (expandContentTypeToBase && type === context[key]['@type']) {\n                                context[key]['@type'] = ContextParser.expandTerm(type, context, false);\n                            }\n                            changed = changed || type !== context[key]['@type'];\n                        }\n                    }\n                    if (!changed) {\n                        break;\n                    }\n                }\n            }\n        }\n        return context;\n    }\n    /**\n     * Normalize the @language entries in the given context to lowercase.\n     * @param {IJsonLdContextNormalized} context A context.\n     * @return {IJsonLdContextNormalized} The mutated input context.\n     */\n    static normalize(context) {\n        for (const key of Object.keys(context)) {\n            if (key === '@language' && typeof context[key] === 'string') {\n                context[key] = context[key].toLowerCase();\n            }\n            else {\n                const value = context[key];\n                if (value && typeof value === 'object') {\n                    if (typeof value['@language'] === 'string') {\n                        value['@language'] = value['@language'].toLowerCase();\n                    }\n                }\n            }\n        }\n        return context;\n    }\n    /**\n     * Validate the entries of the given context.\n     * @param {IJsonLdContextNormalized} context A context.\n     */\n    static validate(context) {\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            const valueType = typeof value;\n            // First check if the key is a keyword\n            if (key[0] === '@') {\n                switch (key.substr(1)) {\n                    case 'vocab':\n                        if (value !== null && valueType !== 'string') {\n                            throw new Error(`Found an invalid @vocab IRI: ${value}`);\n                        }\n                        break;\n                    case 'base':\n                        if (value !== null && valueType !== 'string') {\n                            throw new Error(`Found an invalid @base IRI: ${context[key]}`);\n                        }\n                        break;\n                    case 'language':\n                        if (value !== null && valueType !== 'string') {\n                            throw new Error(`Found an invalid @language string: ${value}`);\n                        }\n                        break;\n                }\n            }\n            // Otherwise, consider the key a term\n            if (value !== null) {\n                switch (valueType) {\n                    case 'string':\n                        // Always valid\n                        break;\n                    case 'object':\n                        if (!ContextParser.isCompactIri(key) && !('@id' in value)\n                            && (value['@type'] === '@id' ? !context['@base'] : !context['@vocab'])) {\n                            throw new Error(`Missing @id in context entry: '${key}': '${JSON.stringify(value)}'`);\n                        }\n                        for (const objectKey of Object.keys(value)) {\n                            const objectValue = value[objectKey];\n                            if (!objectValue) {\n                                continue;\n                            }\n                            switch (objectKey) {\n                                case '@id':\n                                    if (objectValue[0] === '@' && objectValue !== '@type' && objectValue !== '@id') {\n                                        throw new Error(`Illegal keyword alias in term value, found: '${key}': '${JSON.stringify(value)}'`);\n                                    }\n                                    break;\n                                case '@type':\n                                    if (objectValue !== '@id' && objectValue !== '@vocab'\n                                        && (objectValue[0] === '_' || !ContextParser.isValidIri(objectValue))) {\n                                        throw new Error(`A context @type must be an absolute IRI, found: '${key}': '${objectValue}'`);\n                                    }\n                                    break;\n                                case '@reverse':\n                                    if (typeof objectValue === 'string' && value['@id'] && value['@id'] !== objectValue) {\n                                        throw new Error(`Found non-matching @id and @reverse term values in '${key}':\\\n'${objectValue}' and '${value['@id']}'`);\n                                    }\n                                    break;\n                                case '@container':\n                                    if (objectValue === '@list' && value['@reverse']) {\n                                        throw new Error(`Term value can not be @container: @list and @reverse at the same time on '${key}'`);\n                                    }\n                                    if (ContextParser.CONTAINERS.indexOf(objectValue) < 0) {\n                                        throw new Error(`Invalid term @container for '${key}' ('${objectValue}'), \\\nmust be one of ${ContextParser.CONTAINERS.join(', ')}`);\n                                    }\n                                    break;\n                                case '@language':\n                                    if (objectValue !== null && typeof objectValue !== 'string') {\n                                        throw new Error(`Found an invalid term @language string in: '${key}': '${JSON.stringify(value)}'`);\n                                    }\n                                    break;\n                            }\n                        }\n                        break;\n                    default:\n                        throw new Error(`Found an invalid term value: '${key}': '${value}'`);\n                }\n            }\n        }\n    }\n    /**\n     * Resolve relative context IRIs, or return full IRIs as-is.\n     * @param {string} contextIri A context IRI.\n     * @param {string} baseIri A base IRI.\n     * @return {string} The normalized context IRI.\n     */\n    static normalizeContextIri(contextIri, baseIri) {\n        if (!ContextParser.isValidIri(contextIri)) {\n            contextIri = relative_to_absolute_iri_1.resolve(contextIri, baseIri);\n            if (!ContextParser.isValidIri(contextIri)) {\n                throw new Error(`Invalid context IRI: ${contextIri}`);\n            }\n        }\n        return contextIri;\n    }\n    /**\n     * Parse a JSON-LD context in any form.\n     * @param {JsonLdContext} context A context, URL to a context, or an array of contexts/URLs.\n     * @param {IParseOptions} options Optional parsing options.\n     * @return {Promise<IJsonLdContextNormalized>} A promise resolving to the context.\n     */\n    parse(context, { baseIri, parentContext, external } = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context === null || context === undefined) {\n                // Context that are explicitly set to null are empty.\n                return baseIri ? { '@base': baseIri } : {};\n            }\n            else if (typeof context === 'string') {\n                return this.parse(yield this.load(ContextParser.normalizeContextIri(context, baseIri)), { baseIri, parentContext, external: true });\n            }\n            else if (Array.isArray(context)) {\n                // As a performance consideration, first load all external contexts in parallel.\n                const contexts = yield Promise.all(context.map((subContext) => {\n                    if (typeof subContext === 'string') {\n                        return this.load(ContextParser.normalizeContextIri(subContext, baseIri));\n                    }\n                    else {\n                        return subContext;\n                    }\n                }));\n                return contexts.reduce((accContextPromise, contextEntry) => accContextPromise\n                    .then((accContext) => this.parse(contextEntry, {\n                    baseIri: accContext && accContext['@base'] || baseIri,\n                    external,\n                    parentContext: accContext,\n                })), Promise.resolve(parentContext));\n            }\n            else if (typeof context === 'object') {\n                if (context['@context']) {\n                    return yield this.parse(context['@context'], { baseIri, parentContext, external });\n                }\n                // Make a deep clone of the given context, to avoid modifying it.\n                context = JSON.parse(JSON.stringify(context)); // No better way in JS at the moment...\n                // We have an actual context object.\n                let newContext = {};\n                // According to the JSON-LD spec, @base must be ignored from external contexts.\n                if (external) {\n                    delete context['@base'];\n                }\n                // Override the base IRI if provided.\n                if (baseIri) {\n                    if (!('@base' in context)) {\n                        // The context base is the document base\n                        context['@base'] = baseIri;\n                    }\n                    else if (context['@base'] !== null && !ContextParser.isValidIri(context['@base'])) {\n                        // The context base is relative to the document base\n                        context['@base'] = relative_to_absolute_iri_1.resolve(context['@base'], baseIri);\n                    }\n                }\n                newContext = Object.assign({}, newContext, parentContext, context);\n                ContextParser.idifyReverseTerms(newContext);\n                ContextParser.expandPrefixedTerms(newContext, this.expandContentTypeToBase);\n                ContextParser.normalize(newContext);\n                if (this.validate) {\n                    ContextParser.validate(newContext);\n                }\n                return newContext;\n            }\n            else {\n                throw new Error(`Tried parsing a context that is not a string, array or object, but got ${context}`);\n            }\n        });\n    }\n    load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cached = this.documentCache[url];\n            if (cached) {\n                return Array.isArray(cached) ? cached.slice() : Object.assign({}, cached);\n            }\n            return this.documentCache[url] = (yield this.documentLoader.load(url))['@context'];\n        });\n    }\n}\n// Regex for valid IRIs\nContextParser.IRI_REGEX = /^([A-Za-z][A-Za-z0-9+-.]*|_):[^ \"<>{}|\\\\\\[\\]`]*$/;\n// Keys in the contexts that will not be expanded based on the base IRI\nContextParser.EXPAND_KEYS_BLACKLIST = [\n    '@base',\n    '@vocab',\n    '@language',\n];\n// Keys in the contexts that may not be aliased\nContextParser.ALIAS_KEYS_BLACKLIST = [\n    '@container',\n    '@graph',\n    '@id',\n    '@index',\n    '@list',\n    '@nest',\n    '@none',\n    '@prefix',\n    '@reverse',\n    '@set',\n    '@type',\n    '@value',\n];\n// All valid @container values\nContextParser.CONTAINERS = [\n    '@list',\n    '@set',\n    '@index',\n    '@language',\n];\nexports.ContextParser = ContextParser;\n//# sourceMappingURL=ContextParser.js.map","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/Resolve\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Convert the given relative IRI to an absolute IRI\n * by taking into account the given optional baseIRI.\n *\n * @param {string} relativeIRI The relative IRI to convert to an absolute IRI.\n * @param {string} baseIRI The optional base IRI.\n * @return {string} an absolute IRI.\n */\nfunction resolve(relativeIRI, baseIRI) {\n    baseIRI = baseIRI || '';\n    const baseFragmentPos = baseIRI.indexOf('#');\n    // Ignore any fragments in the base IRI\n    if (baseFragmentPos > 0) {\n        baseIRI = baseIRI.substr(0, baseFragmentPos);\n    }\n    // Convert empty value directly to base IRI\n    if (!relativeIRI.length) {\n        return baseIRI;\n    }\n    // If the value starts with a query character, concat directly (but strip the existing query)\n    if (relativeIRI.startsWith('?')) {\n        const baseQueryPos = baseIRI.indexOf('?');\n        if (baseQueryPos > 0) {\n            baseIRI = baseIRI.substr(0, baseQueryPos);\n        }\n        return baseIRI + relativeIRI;\n    }\n    // If the value starts with a fragment character, concat directly\n    if (relativeIRI.startsWith('#')) {\n        return baseIRI + relativeIRI;\n    }\n    // Ignore baseIRI if it is empty\n    if (!baseIRI.length) {\n        return removeDotSegmentsOfPath(relativeIRI, relativeIRI.indexOf(':'));\n    }\n    // Ignore baseIRI if the value is absolute\n    const valueColonPos = relativeIRI.indexOf(':');\n    if (valueColonPos >= 0) {\n        return removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n    }\n    // At this point, the baseIRI MUST be absolute, otherwise we error\n    const baseColonPos = baseIRI.indexOf(':');\n    if (baseColonPos < 0) {\n        throw new Error(`Found invalid baseIRI '${baseIRI}' for value '${relativeIRI}'`);\n    }\n    const baseIRIScheme = baseIRI.substr(0, baseColonPos + 1);\n    // Inherit the baseIRI scheme if the value starts with '//'\n    if (relativeIRI.indexOf('//') === 0) {\n        return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n    }\n    // Check cases where '://' occurs in the baseIRI, and where there is no '/' after a ':' anymore.\n    let baseSlashAfterColonPos;\n    if (baseIRI.indexOf('//', baseColonPos) === baseColonPos + 1) {\n        // If there is no additional '/' after the '//'.\n        baseSlashAfterColonPos = baseIRI.indexOf('/', baseColonPos + 3);\n        if (baseSlashAfterColonPos < 0) {\n            // If something other than a '/' follows the '://', append the value after a '/',\n            // otherwise, prefix the value with only the baseIRI scheme.\n            if (baseIRI.length > baseColonPos + 3) {\n                return baseIRI + '/' + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n            }\n            else {\n                return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n            }\n        }\n    }\n    else {\n        // If there is not even a single '/' after the ':'\n        baseSlashAfterColonPos = baseIRI.indexOf('/', baseColonPos + 1);\n        if (baseSlashAfterColonPos < 0) {\n            // If we don't have a '/' after the ':',\n            // prefix the value with only the baseIRI scheme.\n            return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n        }\n    }\n    // If the value starts with a '/', then prefix it with everything before the first effective slash of the base IRI.\n    if (relativeIRI.indexOf('/') === 0) {\n        return baseIRI.substr(0, baseSlashAfterColonPos) + removeDotSegments(relativeIRI);\n    }\n    let baseIRIPath = baseIRI.substr(baseSlashAfterColonPos);\n    const baseIRILastSlashPos = baseIRIPath.lastIndexOf('/');\n    // Ignore everything after the last '/' in the baseIRI path\n    if (baseIRILastSlashPos >= 0 && baseIRILastSlashPos < baseIRIPath.length - 1) {\n        baseIRIPath = baseIRIPath.substr(0, baseIRILastSlashPos + 1);\n        // Also remove the first character of the relative path if it starts with '.' (and not '..' or './')\n        // This change is only allowed if there is something else following the path\n        if (relativeIRI[0] === '.' && relativeIRI[1] !== '.' && relativeIRI[1] !== '/' && relativeIRI[2]) {\n            relativeIRI = relativeIRI.substr(1);\n        }\n    }\n    // Prefix the value with the baseIRI path where\n    relativeIRI = baseIRIPath + relativeIRI;\n    // Remove dot segment from the IRI\n    relativeIRI = removeDotSegments(relativeIRI);\n    // Prefix our transformed value with the part of the baseIRI until the first '/' after the first ':'.\n    return baseIRI.substr(0, baseSlashAfterColonPos) + relativeIRI;\n}\nexports.resolve = resolve;\n/**\n * Remove dot segments from the given path,\n * as described in https://www.ietf.org/rfc/rfc3986.txt (page 32).\n * @param {string} path An IRI path.\n * @return {string} A path, will always start with a '/'.\n */\nfunction removeDotSegments(path) {\n    // Prepare a buffer with segments between each '/.\n    // Each segment represents an array of characters.\n    const segmentBuffers = [];\n    let i = 0;\n    while (i < path.length) {\n        // Remove '/.' or '/..'\n        switch (path[i]) {\n            case '/':\n                if (path[i + 1] === '.') {\n                    if (path[i + 2] === '.') {\n                        // Start a new segment if we find an invalid character after the '.'\n                        if (!isCharacterAllowedAfterRelativePathSegment(path[i + 3])) {\n                            segmentBuffers.push([]);\n                            i++;\n                            break;\n                        }\n                        // Go to parent directory,\n                        // so we remove a parent segment\n                        segmentBuffers.pop();\n                        // Ensure that we end with a slash if there is a trailing '/..'\n                        if (!path[i + 3]) {\n                            segmentBuffers.push([]);\n                        }\n                        i += 3;\n                    }\n                    else {\n                        // Start a new segment if we find an invalid character after the '.'\n                        if (!isCharacterAllowedAfterRelativePathSegment(path[i + 2])) {\n                            segmentBuffers.push([]);\n                            i++;\n                            break;\n                        }\n                        // Ensure that we end with a slash if there is a trailing '/.'\n                        if (!path[i + 2]) {\n                            segmentBuffers.push([]);\n                        }\n                        // Go to the current directory,\n                        // so we do nothing\n                        i += 2;\n                    }\n                }\n                else {\n                    // Start a new segment\n                    segmentBuffers.push([]);\n                    i++;\n                }\n                break;\n            case '#':\n            case '?':\n                // Query and fragment string should be appended unchanged\n                if (!segmentBuffers.length) {\n                    segmentBuffers.push([]);\n                }\n                segmentBuffers[segmentBuffers.length - 1].push(path.substr(i));\n                // Break the while loop\n                i = path.length;\n                break;\n            default:\n                // Not a special character, just append it to our buffer\n                if (!segmentBuffers.length) {\n                    segmentBuffers.push([]);\n                }\n                segmentBuffers[segmentBuffers.length - 1].push(path[i]);\n                i++;\n                break;\n        }\n    }\n    return '/' + segmentBuffers.map((buffer) => buffer.join('')).join('/');\n}\nexports.removeDotSegments = removeDotSegments;\n/**\n * Removes dot segments of the given IRI.\n * @param {string} iri An IRI (or part of IRI).\n * @param {number} colonPosition The position of the first ':' in the IRI.\n * @return {string} The IRI where dot segments were removed.\n */\nfunction removeDotSegmentsOfPath(iri, colonPosition) {\n    // Determine where we should start looking for the first '/' that indicates the start of the path\n    let searchOffset = colonPosition + 1;\n    if (colonPosition >= 0) {\n        if (iri[colonPosition + 1] === '/' && iri[colonPosition + 2] === '/') {\n            searchOffset = colonPosition + 3;\n        }\n    }\n    else {\n        if (iri[0] === '/' && iri[1] === '/') {\n            searchOffset = 2;\n        }\n    }\n    // Determine the path\n    const pathSeparator = iri.indexOf('/', searchOffset);\n    if (pathSeparator < 0) {\n        return iri;\n    }\n    const base = iri.substr(0, pathSeparator);\n    const path = iri.substr(pathSeparator);\n    // Remove dot segments from the path\n    return base + removeDotSegments(path);\n}\nexports.removeDotSegmentsOfPath = removeDotSegmentsOfPath;\nfunction isCharacterAllowedAfterRelativePathSegment(character) {\n    return !character || character === '#' || character === '?' || character === '/';\n}\n//# sourceMappingURL=Resolve.js.map","var BlankNode = require('./blank-node')\nvar DefaultGraph = require('./default-graph')\nvar Literal = require('./literal')\nvar NamedNode = require('./named-node')\nvar Quad = require('./quad')\nvar Variable = require('./variable')\n\nfunction DataFactory () {}\n\nDataFactory.namedNode = function (value) {\n  return new NamedNode(value)\n}\n\nDataFactory.blankNode = function (value) {\n  return new BlankNode(value)\n}\n\nDataFactory.literal = function (value, languageOrDatatype) {\n  if (typeof languageOrDatatype === 'string') {\n    if (languageOrDatatype.indexOf(':') === -1) {\n      return new Literal(value, languageOrDatatype)\n    }\n\n    return new Literal(value, null, DataFactory.namedNode(languageOrDatatype))\n  }\n\n  return new Literal(value, null, languageOrDatatype)\n}\n\nDataFactory.defaultGraph = function () {\n  return DataFactory.defaultGraphInstance\n}\n\nDataFactory.variable = function (value) {\n  return new Variable(value)\n}\n\nDataFactory.triple = function (subject, predicate, object) {\n  return DataFactory.quad(subject, predicate, object)\n}\n\nDataFactory.quad = function (subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph || DataFactory.defaultGraphInstance)\n}\n\nDataFactory.defaultGraphInstance = new DefaultGraph()\n\nmodule.exports = DataFactory\n","function BlankNode (id) {\n  this.value = id || ('b' + (++BlankNode.nextId))\n}\n\nBlankNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nBlankNode.prototype.termType = 'BlankNode'\n\nBlankNode.nextId = 0\n\nmodule.exports = BlankNode\n","var NamedNode = require('./named-node')\n\nfunction Literal (value, language, datatype) {\n  this.value = value\n  this.datatype = Literal.stringDatatype\n  this.language = ''\n\n  if (language) {\n    this.language = language\n    this.datatype = Literal.langStringDatatype\n  } else if (datatype) {\n    this.datatype = datatype\n  }\n}\n\nLiteral.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value &&\n    other.language === this.language && other.datatype.equals(this.datatype)\n}\n\nLiteral.prototype.termType = 'Literal'\nLiteral.langStringDatatype = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString')\nLiteral.stringDatatype = new NamedNode('http://www.w3.org/2001/XMLSchema#string')\n\nmodule.exports = Literal\n","var DefaultGraph = require('./default-graph')\n\nfunction Quad (subject, predicate, object, graph) {\n  this.subject = subject\n  this.predicate = predicate\n  this.object = object\n\n  if (graph) {\n    this.graph = graph\n  } else {\n    this.graph = new DefaultGraph()\n  }\n}\n\nQuad.prototype.equals = function (other) {\n  return !!other && other.subject.equals(this.subject) && other.predicate.equals(this.predicate) &&\n    other.object.equals(this.object) && other.graph.equals(this.graph)\n}\n\nmodule.exports = Quad\n","function Variable (name) {\n  this.value = name\n}\n\nVariable.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nVariable.prototype.termType = 'Variable'\n\nmodule.exports = Variable\n","// Extracted from: https://github.com/TooTallNate/util-deprecate\nlet deprecate;\ntry {\n  const util = require('util');\n  deprecate = util.deprecate;\n} catch (err) {\n  deprecate = function deprecate(fn, msg) {\n    var warned = false;\n    function deprecated() {\n      if (!warned) {\n        console.warn(msg);\n        warned = true;\n      }\n      return fn.apply(this, arguments);\n    }\n\n    return deprecated;\n  };\n}\nmodule.exports = deprecate;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// Based on https://github.com/defunctzombie/node-process\n// Copyright (c) 2013 Roman Shtylman <shtylman@gmail.com>\n\n// Changes:\n// - use setImmediate for process.nextTick\n\nvar process = module.exports = {};\n\nprocess.nextTick = setImmediate;\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Install a promised-based shim for setImmediate\nconst resolved = Promise.resolve(null);\nwindow.setImmediate = function setImmediatePromiseShim(callback, ...args) {\n  resolved.then(args.length === 0 ? callback : () => callback(...args));\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _bytesToUuid = _interopRequireDefault(require(\"./bytesToUuid.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || (0, _bytesToUuid.default)(rnds);\n}\n\nvar _default = v4;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rng;\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nvar _default = bytesToUuid;\nexports.default = _default;\nmodule.exports = exports.default;","const done = {};\n/**\n * Gets the first element of the iterable.\n */\n\nexport function getFirstItem(iterable) {\n  const iterator = iterable[Symbol.asyncIterator]();\n  return iterator.next().then(item => item.value);\n}\n/**\n * Creates an async iterator with the item as only element.\n */\n\nexport function iteratorFor(item) {\n  return {\n    async next() {\n      if (item !== done) {\n        const value = await item;\n        item = done;\n        return {\n          value\n        };\n      }\n\n      return {\n        done: true\n      };\n    }\n\n  };\n}","/**\n * Resolves to the given item in the path data.\n * For example, new DataHandler({}, 'foo', 'bar')\n * will return pathData.foo.bar.\n *\n * Resolution can optionally be async,\n * and/or be behind a function call.\n */\nexport default class DataHandler {\n  constructor(options, ...dataProperties) {\n    this._isAsync = options.async;\n    this._isFunction = options.function;\n    this._dataProperties = dataProperties;\n  }\n\n  static sync(...dataProperties) {\n    return new DataHandler({\n      async: false\n    }, ...dataProperties);\n  }\n\n  static syncFunction(...dataProperties) {\n    return new DataHandler({\n      async: false,\n      function: true\n    }, ...dataProperties);\n  }\n\n  static async(...dataProperties) {\n    return new DataHandler({\n      async: true\n    }, ...dataProperties);\n  }\n\n  static asyncFunction(...dataProperties) {\n    return new DataHandler({\n      async: true,\n      function: true\n    }, ...dataProperties);\n  } // Resolves the data path, or returns a function that does so\n\n\n  handle(pathData) {\n    return !this._isFunction ? this._resolveDataPath(pathData) : () => this._resolveDataPath(pathData);\n  } // Resolves the data path\n\n\n  _resolveDataPath(data) {\n    return !this._isAsync ? this._resolveSyncDataPath(data) : this._resolveAsyncDataPath(data);\n  } // Resolves synchronous property access\n\n\n  _resolveSyncDataPath(data) {\n    for (const property of this._dataProperties) data = data && data[property];\n\n    return data;\n  } // Resolves asynchronous property access\n\n\n  async _resolveAsyncDataPath(data) {\n    for (const property of this._dataProperties) data = data && (await data[property]);\n\n    return data;\n  }\n\n}","import { getFirstItem } from './iterableUtils';\n/**\n * Returns a lazy thenable to the created promise.\n */\n\nexport function lazyThenable(createPromise) {\n  return {\n    then: getThen(createPromise)\n  };\n}\n/**\n * Lazily returns the `then` function of the created promise.\n */\n\nexport function getThen(createPromise) {\n  return (onResolved, onRejected) => createPromise().then(onResolved, onRejected);\n}\n/**\n * Returns an iterable that is also a promise to the first element.\n */\n\nexport function toIterablePromise(iterable) {\n  // If called with a generator function,\n  // memoize it to enable multiple iterations\n  if (typeof iterable === 'function') iterable = memoizeIterable(iterable()); // Return an object that is iterable and a promise\n\n  return {\n    [Symbol.asyncIterator]() {\n      return iterable[Symbol.asyncIterator]();\n    },\n\n    get then() {\n      return getThen(() => getFirstItem(this));\n    },\n\n    catch(onRejected) {\n      return this.then(null, onRejected);\n    },\n\n    finally(callback) {\n      return this.then().finally(callback);\n    }\n\n  };\n}\n/**\n * Returns a memoized version of the iterable\n * that can be iterated over as many times as needed.\n */\n\nexport function memoizeIterable(iterable) {\n  const cache = [];\n  let iterator = iterable[Symbol.asyncIterator]();\n  return {\n    [Symbol.asyncIterator]() {\n      let i = 0;\n      return {\n        async next() {\n          // Return the item if it has been read already\n          if (i < cache.length) return cache[i++]; // Stop if there are no more items\n\n          if (!iterator) return {\n            done: true\n          }; // Read and cache an item from the iterable otherwise\n\n          const item = cache[i++] = iterator.next();\n          if ((await item).done) iterator = null;\n          return item;\n        }\n\n      };\n    }\n\n  };\n}","import { literal } from '@rdfjs/data-model';\nimport { lazyThenable } from './promiseUtils';\n/**\n * Returns a function that, when called with arguments,\n * extends the path with mutationExpressions.\n *\n * It uses the current path expression as domain expression\n * and the given arguments as range expression.\n * These arguments can either be raw, or other path expressions.\n *\n * Requires:\n * - a pathExpression property on the path proxy and all non-raw arguments.\n */\n\nexport default class MutationFunctionHandler {\n  constructor(mutationType, allowZeroArgs) {\n    this._mutationType = mutationType;\n    this._allowZeroArgs = allowZeroArgs;\n  }\n\n  handle(pathData, path) {\n    return (...args) => {\n      // Check if the given arguments are valid\n      if (!this._allowZeroArgs && !args.length) throw new Error(\"Mutation on \".concat(pathData, \" can not be invoked without arguments\")); // Create a lazy Promise to the mutation expressions\n\n      const mutationExpressions = lazyThenable(() => this.createMutationExpressions(pathData, path, args));\n      return pathData.extendPath({\n        mutationExpressions\n      });\n    };\n  }\n\n  async createMutationExpressions(pathData, path, args) {\n    // Check if we have a valid path\n    const conditions = await path.pathExpression;\n    if (!Array.isArray(conditions)) throw new Error(\"\".concat(pathData, \" has no pathExpression property\"));\n    if (conditions.length < 2) throw new Error(\"\".concat(pathData, \" should at least contain a subject and a predicate\")); // The arguments are the affected objects\n\n    const objects = await this.extractObjects(pathData, path, args); // If no objects were specified, mutate all objects in the domain\n\n    const mutationType = this._mutationType;\n    if (!objects) return [{\n      mutationType,\n      conditions\n    }]; // If no objects are affected, do not perform any mutations\n\n    if (objects.length === 0) return []; // Otherwise, mutate the affected objects\n\n    const {\n      predicate\n    } = conditions.pop();\n    if (!predicate) throw new Error(\"Expected predicate in \".concat(pathData));\n    return [{\n      mutationType,\n      conditions,\n      predicate,\n      objects\n    }];\n  }\n\n  async extractObjects(pathData, path, args) {\n    // No arguments means a wildcard\n    if (args.length === 0) return null; // Expand strings, promises, and paths\n\n    const objects = [];\n\n    for (const arg of args) {\n      // Process an asynchronously iterable argument\n      if (arg && arg[Symbol.asyncIterator]) {\n        for await (const item of arg) objects.push(this.extractObject(pathData, path, item));\n      } else {\n        // Process a (promise to) a string or term\n        objects.push(this.extractObject(pathData, path, (await arg)));\n      }\n    }\n\n    return objects;\n  }\n\n  extractObject(pathData, path, arg) {\n    if (typeof arg === 'string') return literal(arg);\n    if (arg && arg.termType) return arg;\n    throw new Error(\"Invalid object: \".concat(arg));\n  }\n\n}","import MutationFunctionHandler from './MutationFunctionHandler';\n/**\n * A MutationFunctionHandler for deletions.\n */\n\nexport default class DeleteFunctionHandler extends MutationFunctionHandler {\n  constructor() {\n    super('DELETE', true);\n  }\n\n}","const VARIABLE = /(SELECT\\s+)(\\?\\S+)/;\nconst QUERY_TAIL = /\\}[^}]*$/;\n/**\n * Returns a function that preloads and caches\n * certain properties of results on the current path.\n *\n * Requires:\n * - a predicate handler on the path proxy\n * - a queryEngine property in the path settings\n *\n * Creates:\n * - a resultsCache property on the path data\n */\n\nexport default class PreloadHandler {\n  /**\n   * Creates a preload function.\n   */\n  handle(pathData, pathProxy) {\n    return async (...properties) => {\n      if (properties.length > 0) {\n        // Map the properties to predicates\n        const predicates = await Promise.all(properties.map(async p => (await pathProxy[p].predicate).value)); // Create and attach the results cache to the path data\n\n        pathData.resultsCache = await this.createResultsCache(predicates, pathData, pathProxy);\n      }\n\n      return pathProxy;\n    };\n  }\n  /**\n   * Creates a cache for the results of\n   * resolving the given predicates against the path.\n   */\n\n\n  async createResultsCache(predicates, pathData, path) {\n    // Execute the preloading query\n    const {\n      query,\n      vars,\n      resultVar\n    } = await this.createQuery(predicates, path);\n    const {\n      settings: {\n        queryEngine\n      }\n    } = pathData;\n    const bindings = queryEngine.execute(query); // Extract all results and their preloaded property values\n\n    const resultsCache = {};\n    const propertyCaches = {};\n\n    for await (const binding of bindings) {\n      // Initialize the result's cache if needed\n      const result = binding.get(resultVar),\n            hash = hashTerm(result);\n\n      if (!(hash in resultsCache)) {\n        // Create the property cache\n        const propertyCache = propertyCaches[hash] = {};\n\n        for (const predicate of predicates) propertyCache[predicate] = []; // Create the result path\n\n\n        const resultData = {\n          subject: result,\n          propertyCache\n        };\n        resultsCache[hash] = pathData.extendPath(resultData, null);\n      } // Create and cache a possible property value path from the binding\n\n\n      const propertyCache = propertyCaches[hash];\n\n      for (let i = 0; i < vars.length; i++) {\n        const value = binding.get(vars[i]);\n\n        if (value) {\n          const valuePath = pathData.extendPath({\n            subject: value\n          }, null);\n          propertyCache[predicates[i]].push(valuePath);\n        }\n      }\n    }\n\n    return Object.values(resultsCache);\n  }\n  /**\n   * Creates the query for preloading the given predicates on the path\n   */\n\n\n  async createQuery(predicates, path) {\n    // Obtain the query for the current path, and its main variable\n    const parentQuery = await path.sparql;\n    const variableMatch = VARIABLE.exec(parentQuery);\n    if (!variableMatch) throw new Error(\"Unexpected path query: \".concat(parentQuery));\n    const resultVar = variableMatch[2]; // Modify the query to include the preload clauses\n    // TODO: instead of query manipulation, adjust the query generator\n\n    const vars = predicates.map((p, i) => \"?preload_\".concat(i));\n    const preloadClauses = predicates.map((predicate, i) => \"    { \".concat(resultVar, \" <\").concat(predicate, \"> \").concat(vars[i], \". }\")).join('\\n    UNION\\n');\n    const query = parentQuery.replace(VARIABLE, \"$1$2 \".concat(vars.join(' '))).replace(QUERY_TAIL, \"  OPTIONAL {\\n\".concat(preloadClauses, \"\\n  }\\n$&\"));\n    return {\n      query,\n      vars,\n      resultVar\n    };\n  }\n\n} // Returns a unique string representation of the term\n\nfunction hashTerm(term) {\n  const {\n    termType,\n    value\n  } = term;\n\n  switch (termType) {\n    case 'NamedNode':\n      return value;\n\n    case 'Literal':\n      const {\n        language,\n        datatype\n      } = term;\n      return \"\".concat(termType, \"|\").concat(language, \"|\").concat(datatype.value, \"|\").concat(value);\n\n    default:\n      return \"\".concat(termType, \"|\").concat(value);\n  }\n}","/**\n * Returns a function that creates a new path with the same values,\n * but sorted on the given property.\n * The function accepts multiple properties to sort on a deeper path.\n *\n * Requires:\n *  - a predicate on the path proxy\n *  - a sort function on the path proxy (for multi-property sorting)\n */\nexport default class SortHandler {\n  constructor(order = 'ASC') {\n    this.order = order;\n  }\n\n  handle(pathData, pathProxy) {\n    return (...properties) => {\n      // Do nothing if no sort properties were given\n      if (properties.length === 0) return pathProxy; // Split off the first sort property and obtain its predicate\n\n      const [property, ...rest] = properties;\n      const {\n        predicate\n      } = pathProxy[property]; // Sort on the first property, and create paths for the next one\n\n      const childData = {\n        property,\n        predicate,\n        sort: this.order\n      };\n      const childPath = pathData.extendPath(childData);\n      return rest.length === 0 ? childPath : childPath.sort(...rest);\n    };\n  }\n\n}","import { namedNode } from '@rdfjs/data-model';\nconst NEEDS_ESCAPE = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019\\ud800-\\udbff]/,\n      ESCAPE_ALL = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019]|[\\ud800-\\udbff][\\udc00-\\udfff]/g,\n      ESCAPED_CHARS = {\n  '\\\\': '\\\\\\\\',\n  '\"': '\\\\\"',\n  '\\t': '\\\\t',\n  '\\n': '\\\\n',\n  '\\r': '\\\\r',\n  '\\b': '\\\\b',\n  '\\f': '\\\\f'\n};\n/**\n * Expresses a path or mutation as a SPARQL query.\n *\n * Requires:\n * - a mutationExpressions or pathExpression property on the path proxy\n */\n\nexport default class SparqlHandler {\n  async handle(pathData, path) {\n    // First check if we have a mutation expression\n    const mutationExpressions = await path.mutationExpressions;\n    if (Array.isArray(mutationExpressions) && mutationExpressions.length) return mutationExpressions.map(e => this.mutationExpressionToQuery(e)).join('\\n;\\n'); // Otherwise, fall back to checking for a path expression\n\n    const pathExpression = await path.pathExpression;\n    if (!Array.isArray(pathExpression)) throw new Error(\"\".concat(pathData, \" has no pathExpression property\"));\n    return this.pathExpressionToQuery(pathData, path, pathExpression);\n  }\n\n  pathExpressionToQuery(pathData, path, pathExpression) {\n    if (pathExpression.length < 2 && !pathData.finalClause) throw new Error(\"\".concat(pathData, \" should at least contain a subject and a predicate\")); // Create triple patterns\n\n    let queryVar = '?subject',\n        sorts = [],\n        clauses = [];\n\n    if (pathExpression.length > 1) {\n      queryVar = this.createVar(pathData.property);\n      ({\n        queryVar,\n        sorts,\n        clauses\n      } = this.expressionToTriplePatterns(pathExpression, queryVar));\n    }\n\n    if (pathData.finalClause) clauses.push(pathData.finalClause(queryVar)); // Create SPARQL query body\n\n    const distinct = pathData.distinct ? 'DISTINCT ' : '';\n    const select = \"SELECT \".concat(distinct).concat(pathData.select ? pathData.select : queryVar);\n    const where = \" WHERE {\\n  \".concat(clauses.join('\\n  '), \"\\n}\");\n    const orderClauses = sorts.map(({\n      order,\n      variable\n    }) => \"\".concat(order, \"(\").concat(variable, \")\"));\n    const orderBy = orderClauses.length === 0 ? '' : \"\\nORDER BY \".concat(orderClauses.join(' '));\n    return \"\".concat(select).concat(where).concat(orderBy);\n  }\n\n  mutationExpressionToQuery({\n    mutationType,\n    conditions,\n    predicate,\n    objects\n  }) {\n    // If the only condition is a subject, we need no WHERE clause\n    const scope = {};\n    let subject, where;\n\n    if (conditions.length === 1) {\n      subject = this.termToString(conditions[0].subject);\n      where = [];\n    } // Otherwise, create a WHERE clause from all conditions\n    else {\n        const lastPredicate = conditions[conditions.length - 1].predicate;\n        subject = this.createVar(lastPredicate.value, scope);\n        ({\n          queryVar: subject,\n          clauses: where\n        } = this.expressionToTriplePatterns(conditions, subject, scope));\n      } // If a list of objects was specified, the mutation is \"<s> <p> objects\"\n\n\n    const objectList = objects && objects.map(o => this.termToString(o)).join(', ');\n    const mutationPattern = objectList ? \"\".concat(subject, \" \").concat(this.termToString(predicate), \" \").concat(objectList, \".\") : // Otherwise, the mutation is the unconstrained last segment\n    where[where.length - 1];\n    return where.length === 0 ? // If there are no WHERE clauses, just mutate raw data\n    \"\".concat(mutationType, \" DATA {\\n  \").concat(mutationPattern, \"\\n}\") : // Otherwise, return a DELETE/INSERT ... WHERE ... query\n    \"\".concat(mutationType, \" {\\n  \").concat(mutationPattern, \"\\n} WHERE {\\n  \").concat(where.join('\\n  '), \"\\n}\");\n  }\n\n  expressionToTriplePatterns([root, ...pathExpression], lastVar, scope = {}) {\n    const lastIndex = pathExpression.length - 1;\n    let object = this.termToString(skolemize(root.subject));\n    let queryVar = object;\n    const sorts = [];\n    const clauses = pathExpression.map((segment, index) => {\n      // Obtain components and generate triple pattern\n      const subject = object;\n      const {\n        predicate\n      } = segment;\n      object = index < lastIndex ? this.createVar(\"v\".concat(index), scope) : lastVar;\n      const result = \"\".concat(subject, \" \").concat(this.termToString(predicate), \" \").concat(object, \".\"); // If the sort option was not set, use this object as a query variable\n\n      if (!segment.sort) {\n        queryVar = object;\n      } // If sort was set, use this object as a sorting variable\n      else {\n          // TODO: handle when an object is used for sorting, and later also for querying\n          sorts.push({\n            variable: object,\n            order: segment.sort\n          }); // TODO: use a descriptive lastVar in case of sorting\n\n          object = queryVar;\n        }\n\n      return result;\n    });\n    return {\n      queryVar,\n      sorts,\n      clauses\n    };\n  } // Creates a unique query variable within the given scope, based on the suggestion\n\n\n  createVar(suggestion = '', scope) {\n    let counter = 0;\n    let label = \"?\".concat(suggestion.match(/[a-z0-9]*$/i)[0] || 'result');\n\n    if (scope) {\n      while (scope[label]) label = \"?\".concat(suggestion, \"_\").concat(counter++);\n\n      scope[label] = true;\n    }\n\n    return label;\n  } // Converts an RDFJS term to a string that we can use in a query\n\n\n  termToString(term) {\n    // Determine escaped value\n    let {\n      value\n    } = term;\n    if (NEEDS_ESCAPE.test(value)) value = value.replace(ESCAPE_ALL, escapeCharacter);\n\n    switch (term.termType) {\n      case 'NamedNode':\n        return \"<\".concat(value, \">\");\n\n      case 'BlankNode':\n        return \"_:\".concat(value);\n\n      case 'Literal':\n        // Determine optional language or datatype\n        let suffix = '';\n        if (term.language) suffix = \"@\".concat(term.language);else if (term.datatype.value !== 'http://www.w3.org/2001/XMLSchema#string') suffix = \"^^<\".concat(term.datatype.value, \">\");\n        return \"\\\"\".concat(value, \"\\\"\").concat(suffix);\n\n      default:\n        throw new Error(\"Could not convert a term of type \".concat(term.termType));\n    }\n  }\n\n} // Replaces a character by its escaped version\n// (borrowed from https://www.npmjs.com/package/n3)\n\nfunction escapeCharacter(character) {\n  // Replace a single character by its escaped version\n  let result = ESCAPED_CHARS[character];\n\n  if (result === undefined) {\n    // Replace a single character with its 4-bit unicode escape sequence\n    if (character.length === 1) {\n      result = character.charCodeAt(0).toString(16);\n      result = '\\\\u0000'.substr(0, 6 - result.length) + result;\n    } // Replace a surrogate pair with its 8-bit unicode escape sequence\n    else {\n        result = ((character.charCodeAt(0) - 0xD800) * 0x400 + character.charCodeAt(1) + 0x2400).toString(16);\n        result = '\\\\U00000000'.substr(0, 10 - result.length) + result;\n      }\n  }\n\n  return result;\n} // Skolemizes the given term if it is a blank node\n\n\nlet skolemId = 0;\n\nfunction skolemize(term) {\n  if (term.termType !== 'BlankNode') return term;\n  if (!term.skolemized) term.skolemized = namedNode(\"urn:ldflex:sk\".concat(skolemId++));\n  return term.skolemized;\n}","import AsyncIteratorHandler from './AsyncIteratorHandler';\nimport DataHandler from './DataHandler';\nimport DeleteFunctionHandler from './DeleteFunctionHandler';\nimport ExecuteQueryHandler from './ExecuteQueryHandler';\nimport InsertFunctionHandler from './InsertFunctionHandler';\nimport MutationExpressionsHandler from './MutationExpressionsHandler';\nimport PathExpressionHandler from './PathExpressionHandler';\nimport PredicateHandler from './PredicateHandler';\nimport PredicatesHandler from './PredicatesHandler';\nimport PreloadHandler from './PreloadHandler';\nimport PropertiesHandler from './PropertiesHandler';\nimport ReplaceFunctionHandler from './ReplaceFunctionHandler';\nimport SetFunctionHandler from './SetFunctionHandler';\nimport SortHandler from './SortHandler';\nimport SparqlHandler from './SparqlHandler';\nimport StringToLDflexHandler from './StringToLDflexHandler';\nimport SubjectHandler from './SubjectHandler';\nimport SubjectsHandler from './SubjectsHandler';\nimport ThenHandler from './ThenHandler';\nimport ToArrayHandler from './ToArrayHandler';\n/**\n * A map with default property handlers.\n */\n\nexport default {\n  // Flag to loaders that exported paths are not ES6 modules\n  __esModule: () => undefined,\n  // Add thenable and async iterable behavior\n  then: new ThenHandler(),\n  [Symbol.asyncIterator]: new AsyncIteratorHandler(),\n  // Add read and query functionality\n  subject: new SubjectHandler(),\n  predicate: new PredicateHandler(),\n  properties: new PropertiesHandler(),\n  predicates: new PredicatesHandler(),\n  pathExpression: new PathExpressionHandler(),\n  sparql: new SparqlHandler(),\n  subjects: new SubjectsHandler(),\n  results: new ExecuteQueryHandler(),\n  sort: new SortHandler('ASC'),\n  sortDesc: new SortHandler('DESC'),\n  preload: new PreloadHandler(),\n  // Add write functionality\n  mutationExpressions: new MutationExpressionsHandler(),\n  add: new InsertFunctionHandler(),\n  set: new SetFunctionHandler(),\n  replace: new ReplaceFunctionHandler(),\n  delete: new DeleteFunctionHandler(),\n  // Add RDFJS term handling\n  termType: termPropertyHandler('termType'),\n  value: termPropertyHandler('value'),\n  datatype: termPropertyHandler('datatype'),\n  language: termPropertyHandler('language'),\n  equals: DataHandler.sync('subject', 'equals'),\n  toString: DataHandler.syncFunction('subject', 'value'),\n  toPrimitive: DataHandler.syncFunction('subject', 'value'),\n  // Add iteration helpers\n  toArray: new ToArrayHandler(),\n  termTypes: handler((_, path) => path.toArray(t => t.termType)),\n  values: handler((_, path) => path.toArray(t => t.value)),\n  datatypes: handler((_, path) => path.toArray(t => t.datatype)),\n  languages: handler((_, path) => path.toArray(t => t.language)),\n  // Parse a string into an LDflex object\n  resolve: new StringToLDflexHandler()\n}; // Creates a handler from the given function\n\nfunction handler(handle) {\n  return {\n    handle\n  };\n} // Creates a handler for the given RDF/JS Term property\n\n\nfunction termPropertyHandler(property) {\n  return handler((pathData, path) => {\n    // If a resolved subject is present,\n    // synchronously expose the RDF/JS property\n    const {\n      subject\n    } = pathData;\n    const subjectValue = subject && subject[property];\n    if (typeof subjectValue !== 'undefined') return subjectValue; // Otherwise, return a promise to the property value\n\n    return path.then(term => term && term[property]);\n  });\n}","import { getThen } from './promiseUtils';\nimport { getFirstItem } from './iterableUtils';\n/**\n * Thenable handler that resolves to either the subject\n * of the first item of the results.\n *\n * Requires:\n *  - (optional) a subject on the path data\n *  - (optional) a subject on the path proxy\n *  - (optional) results on the path proxy\n */\n\nexport default class ThenHandler {\n  handle({\n    subject\n  }, pathProxy) {\n    // Resolve to either the subject (zero-length path) or the first result\n    return subject ? // If the subject is not a promise, it has already been resolved;\n    // consumers should not resolve it, but access its properties directly.\n    // This avoids infinite `then` chains when `await`ing this path.\n    subject.then && getThen(() => pathProxy.subject) : // Otherwise, return the first result of this path\n    getThen(() => getFirstItem(pathProxy.results));\n  }\n\n}","import { iteratorFor } from './iterableUtils';\n/**\n * AsyncIterator handler that yields either the subject or all results.\n *\n * Requires:\n *  - (optional) a subject on the path data\n *  - (optional) a subject on the path proxy\n *  - (optional) results on the path proxy\n */\n\nexport default class AsyncIteratorHandler {\n  handle({\n    subject\n  }, pathProxy) {\n    // Return a one-item iterator of the subject if present;\n    // otherwise, return all results of this path\n    return subject ? () => iteratorFor(pathProxy.subject) : () => pathProxy.results[Symbol.asyncIterator]();\n  }\n\n}","/**\n * Returns a new path starting from the subject of the current path.\n *\n * Requires:\n * - (optional) a subject property on the path data\n * - (optional) a parent property on the path data\n */\nexport default class SubjectHandler {\n  handle(pathData) {\n    // Traverse parents until we find a subject\n    let {\n      subject,\n      parent\n    } = pathData;\n\n    while (!subject && parent) ({\n      subject,\n      parent\n    } = parent); // Resolve the subject if it exists,\n    // and return a path starting from that subject\n\n\n    return !subject ? undefined : Promise.resolve(subject).then(value => pathData.extendPath({\n      subject: value\n    }, null));\n  }\n\n}","/**\n * Returns a new path starting from the predicate of the current path.\n *\n * Requires:\n * - (optional) a predicate property on the path data\n */\nexport default class PredicateHandler {\n  handle(pathData) {\n    const {\n      predicate\n    } = pathData;\n    return !predicate ? undefined : Promise.resolve(predicate).then(subject => pathData.extendPath({\n      subject\n    }, null));\n  }\n\n}","/**\n * Queries for all compacted predicates of a path subject\n */\nimport { ContextParser } from 'jsonld-context-parser';\nimport { toIterablePromise } from './promiseUtils';\nexport default class PropertiesHandler {\n  handle(pathData, path) {\n    return toIterablePromise(this._handle(pathData, path));\n  }\n\n  async *_handle(pathData, path) {\n    const context = (await pathData.settings.parsedContext) || {};\n\n    for await (const predicate of path.predicates) yield ContextParser.compactIri(\"\".concat((await predicate)), context, true);\n  }\n\n}","/**\n * Queries for all predicates of a path subject\n */\nexport default class PredicatesHandler {\n  handle(pathData) {\n    return pathData.extendPath({\n      distinct: true,\n      select: '?predicate',\n      finalClause: queryVar => \"\".concat(queryVar, \" ?predicate ?object.\"),\n      property: pathData.property\n    });\n  }\n\n}","/**\n * Traverses a path to collect links and nodes into an expression.\n */\nexport default class PathExpressionHandler {\n  async handle(pathData) {\n    const segments = [];\n    let current = pathData; // Add all predicates to the path\n\n    while (current.parent) {\n      // Obtain and store predicate\n      if (current.predicate) {\n        segments.unshift({\n          predicate: await current.predicate,\n          sort: current.sort\n        });\n      } // Move to parent link\n\n\n      current = current.parent;\n    } // Add the root subject to the path\n\n\n    if (!current.subject) throw new Error(\"Expected root subject in \".concat(current));\n    const subject = await current.subject;\n    segments.unshift({\n      subject\n    });\n    return segments;\n  }\n\n}","/**\n * Queries for all subjects of a document\n */\nexport default class SubjectsHandler {\n  handle(pathData) {\n    return pathData.extendPath({\n      distinct: true,\n      select: '?subject',\n      finalClause: () => '?subject ?predicate ?object.',\n      property: pathData.property\n    });\n  }\n\n}","/**\n * Executes the query represented by a path.\n *\n * Requires:\n * - a queryEngine property in the path settings\n * - a sparql property on the path proxy\n * - (optional) a resultsCache property on the path data\n */\nexport default class ExecuteQueryHandler {\n  async *handle(pathData, path) {\n    // Try to retrieve the result from cache\n    const resultsCache = await pathData.resultsCache;\n\n    if (resultsCache) {\n      for (const result of resultsCache) yield result;\n\n      return;\n    } // Retrieve the query engine and query\n\n\n    const {\n      queryEngine\n    } = pathData.settings;\n    if (!queryEngine) throw new Error(\"\".concat(pathData, \" has no queryEngine setting\"));\n    const query = await path.sparql;\n    if (!query) throw new Error(\"\".concat(pathData, \" has no sparql property\")); // Extract the term from every query result\n\n    for await (const bindings of queryEngine.execute(query)) yield this.extractTerm(bindings, pathData);\n  }\n  /**\n   * Extracts the first term from a query result binding as a new path.\n   */\n\n\n  extractTerm(binding, pathData) {\n    // Extract the first term from the binding map\n    if (binding.size !== 1) throw new Error('Only single-variable queries are supported');\n    const subject = binding.values().next().value; // Each result is a new path that starts from the term as subject\n\n    return pathData.extendPath({\n      subject\n    }, null);\n  }\n\n}","/**\n * Traverses a path to collect mutationExpressions into an expression.\n * This is needed because mutations can be chained.\n *\n * Requires:\n * - a mutationExpressions property on the path proxy\n */\nexport default class MutationExpressionsHandler {\n  async handle(pathData) {\n    const mutationExpressions = []; // Add all mutationExpressions to the path\n\n    let current = pathData;\n\n    while (current) {\n      // Obtain and store mutationExpressions\n      if (current.mutationExpressions) mutationExpressions.unshift(...(await current.mutationExpressions)); // Move to parent link\n\n      current = current.parent;\n    }\n\n    return mutationExpressions;\n  }\n\n}","import MutationFunctionHandler from './MutationFunctionHandler';\n/**\n * A MutationFunctionHandler for insertions.\n */\n\nexport default class InsertFunctionHandler extends MutationFunctionHandler {\n  constructor() {\n    super('INSERT', false);\n  }\n\n}","/**\n * Returns a function that deletes all existing values\n * for the path, and then adds the given values to the path.\n *\n * Requires:\n * - a delete function on the path proxy.\n * - an add function on the path proxy.\n */\nexport default class SetFunctionHandler {\n  handle(pathData, path) {\n    return (...args) => path.delete().add(...args);\n  }\n\n}","/**\n * Returns a function that deletes the given value\n * for the path, and then adds the given values to the path.\n *\n * Requires:\n * - a delete function on the path proxy.\n * - an add function on the path proxy.\n */\nexport default class ReplaceFunctionHandler {\n  handle(pathData, path) {\n    return function (oldValue, ...newValues) {\n      if (!oldValue || !newValues.length) throw new Error('Replacing values requires at least two arguments, old value followed by all new values');\n      return path.delete(oldValue).add(...newValues);\n    };\n  }\n\n}","/**\n * Converts an asynchronously iterable path into an array.\n *\n * Requires:\n * - (optional) an iterable path\n */\nexport default class ToArrayHandler {\n  handle(pathData, path) {\n    return async map => {\n      const items = []; // Verify the path is async iterable\n\n      if (path && typeof path[Symbol.asyncIterator] === 'function') {\n        // Ensure the mapping function is valid\n        if (typeof map !== 'function') map = item => item; // Retrieve and map all elements\n\n        let index = 0;\n\n        for await (const item of path) items.push((await map(item, index++)));\n      }\n\n      return items;\n    };\n  }\n\n}","/**\n * Yields a function that interprets a string expression as an LDflex path.\n */\nexport default class StringToLDflexHandler {\n  handle(pathData, path) {\n    // Resolves the given string expression against the LDflex object\n    return (expression = '', ldflex = path) => {\n      // An expression starts with a property access in dot or bracket notation\n      const propertyPath = expression // Add brackets around a single URL\n      .replace(/^(https?:\\/\\/[^()[\\]'\"]+)$/, '[\"$1\"]') // Add the starting dot if omitted\n      .replace(/^(?=[a-z$_])/i, '.') // Add quotes inside of brackets if omitted\n      .replace(/\\[([^'\"`\\](]*)\\]/g, '[\"$1\"]'); // Create a function to evaluate the expression\n\n      const body = \"\\\"use strict\\\";return ldflex\".concat(propertyPath);\n      let evaluator;\n\n      try {\n        /* eslint no-new-func: off */\n        evaluator = Function('ldflex', body);\n      } catch ({\n        message\n      }) {\n        throw new Error(\"Expression \\\"\".concat(expression, \"\\\" is invalid: \").concat(message));\n      } // Evaluate the function\n\n\n      return evaluator(ldflex);\n    };\n  }\n\n}","const EMPTY = Object.create(null);\n/**\n * A PathProxy creates path expressions,\n * to which functionality can be attached.\n *\n * To users, these paths act as regular JavaScript objects\n * (such as `path.foo.bar.prop`) thanks to Proxy.\n * Behind the scenes, they carry around internal data\n * that can be used to influence their functionality.\n *\n * A path's functionality is realized by:\n * - handlers, which handle a specific named property\n * - resolvers, which can handle arbitrary properties\n * Only handlers and resolvers see the internal data.\n *\n * A path can have arbitrary internal data fields, but these are reserved:\n * - settings, an object that is passed on as-is to child paths\n * - proxy, a reference to the proxied object the user sees\n * - parent, a reference to the parent path\n * - extendPath, a method to create a child path with this path as parent\n */\n\nexport default class PathProxy {\n  constructor({\n    handlers = EMPTY,\n    resolvers = []\n  } = {}) {\n    this._handlers = handlers;\n    this._resolvers = resolvers;\n  }\n  /**\n   * Creates a path Proxy with the given settings and internal data fields.\n   */\n\n\n  createPath(settings = {}, data) {\n    // The settings parameter is optional\n    if (data === undefined) [data, settings] = [settings, {}]; // Create the path's internal data object and the proxy that wraps it\n\n    const path = {\n      settings,\n      ...data\n    };\n    const proxy = path.proxy = new Proxy(path, this); // Add an extendPath method to create child paths\n\n    if (!path.extendPath) {\n      const pathProxy = this;\n\n      path.extendPath = function extendPath(newData, parent = this) {\n        return pathProxy.createPath(settings, {\n          parent,\n          extendPath,\n          ...newData\n        });\n      };\n    } // Return the proxied path\n\n\n    return proxy;\n  }\n  /**\n   * Handles access to a property\n   */\n\n\n  get(pathData, property) {\n    // Handlers provide functionality for a specific property,\n    // so check if we find a handler first\n    const handler = this._handlers[property];\n    if (handler && typeof handler.handle === 'function') return handler.handle(pathData, pathData.proxy); // Resolvers provide functionality for arbitrary properties,\n    // so find a resolver that can handle this property\n\n    for (const resolver of this._resolvers) {\n      if (resolver.supports(property)) return resolver.resolve(property, pathData, pathData.proxy);\n    } // Otherwise, the property does not exist\n\n\n    return undefined;\n  }\n\n}","import { ContextParser } from 'jsonld-context-parser';\nimport { namedNode } from '@rdfjs/data-model';\nimport { lazyThenable } from './promiseUtils';\n/**\n * Resolves property names of a path\n * to their corresponding IRIs through a JSON-LD context.\n */\n\nexport default class JSONLDResolver {\n  /**\n   * Creates a new resolver for the given context(s).\n   */\n  constructor(...contexts) {\n    this._context = Promise.resolve({});\n    this.extendContext(...contexts);\n  }\n  /**\n   * The JSON-LD resolver supports all string properties.\n   */\n\n\n  supports(property) {\n    return typeof property === 'string';\n  }\n  /**\n   * Resolves the property by extending the query path with it.\n   */\n\n\n  resolve(property, pathData) {\n    const predicate = lazyThenable(() => this.expandProperty(property));\n    const resultsCache = this.getResultsCache(pathData, predicate);\n    return pathData.extendPath({\n      property,\n      predicate,\n      resultsCache\n    });\n  }\n  /**\n   * Expands a JSON property key into a full IRI.\n   */\n\n\n  async expandProperty(property) {\n    // JavaScript requires keys containing colons to be quoted,\n    // so prefixed names would need to written as path['foaf:knows'].\n    // We thus allow writing path.foaf_knows or path.foaf$knows instead.\n    property = property.replace(/^([a-z][a-z0-9]*)[_$]/i, '$1:'); // Expand the property to a full IRI\n\n    const context = await this._context;\n    const expandedProperty = ContextParser.expandTerm(property, context, true);\n    if (!ContextParser.isValidIri(expandedProperty)) throw new Error(\"The JSON-LD context cannot expand the '\".concat(property, \"' property\"));\n    return namedNode(expandedProperty);\n  }\n  /**\n   * Extends the current JSON-LD context with the given context(s).\n   */\n\n\n  async extendContext(...contexts) {\n    await (this._context = this._context.then(currentContext => new ContextParser().parse([currentContext, ...contexts])));\n  }\n  /**\n   * Gets the results cache for the given predicate.\n   */\n\n\n  getResultsCache(pathData, predicate) {\n    let {\n      propertyCache\n    } = pathData;\n    return propertyCache && lazyThenable(async () => {\n      propertyCache = await propertyCache;\n      return propertyCache && propertyCache[(await predicate).value];\n    });\n  }\n\n}","import PathProxy from './PathProxy';\nimport JSONLDResolver from './JSONLDResolver';\nimport defaultHandlers from './defaultHandlers';\nimport { ContextParser } from 'jsonld-context-parser';\n/**\n * A PathFactory creates paths with default settings.\n */\n\nexport default class PathFactory {\n  constructor(settings, data) {\n    // Store settings and data\n    this._settings = settings = { ...settings\n    };\n    this._data = data = { ...data\n    }; // Prepare the handlers\n\n    const handlers = settings.handlers || defaultHandlers;\n\n    for (const key in handlers) handlers[key] = toHandler(handlers[key]);\n\n    for (const key of Object.getOwnPropertySymbols(handlers)) handlers[key] = toHandler(handlers[key]); // Prepare the resolvers\n\n\n    const resolvers = (settings.resolvers || []).map(toResolver);\n\n    if (settings.context) {\n      resolvers.push(new JSONLDResolver(settings.context));\n      settings.parsedContext = new ContextParser().parse(settings.context);\n    } else {\n      settings.context = settings.parsedContext = {};\n    } // Instantiate PathProxy that will create the paths\n\n\n    this._pathProxy = new PathProxy({\n      handlers,\n      resolvers\n    }); // Remove PathProxy settings from the settings object\n\n    delete settings.handlers;\n    delete settings.resolvers;\n  }\n  /**\n   * Creates a path with the given (optional) settings and data.\n   */\n\n\n  create(settings = {}, data) {\n    // The settings parameter is optional\n    if (!data) [data, settings] = [settings, null]; // Apply defaults on settings and data\n\n    return this._pathProxy.createPath(Object.assign(Object.create(null), this._settings, settings), Object.assign(Object.create(null), this._data, data));\n  }\n\n}\nPathFactory.defaultHandlers = defaultHandlers;\n/**\n * Converts a handler function into a handler object.\n */\n\nexport function toHandler(handle) {\n  return typeof handle.handle === 'function' ? handle : {\n    handle\n  };\n}\n/**\n * Converts a resolver function into a catch-all resolver object.\n */\n\nexport function toResolver(resolve) {\n  return typeof resolve.resolve === 'function' ? resolve : {\n    supports,\n    resolve\n  };\n} // Catch-all resolvers support everything\n\nfunction supports() {\n  return true;\n}","import { toIterablePromise } from 'ldflex';\nimport { namedNode } from '@rdfjs/data-model';\nimport context from '@solid/context';\n\nconst { as } = context['@context'];\n\n/**\n * Base class for handlers that manipulate activities\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class ActivityHandler {\n  requireUser = true;\n\n  constructor({ activitiesPath = '/public/activities' } = {}) {\n    this.activitiesPath = activitiesPath;\n  }\n\n  handle(pathData, path) {\n    const self = this;\n    const { root } = path;\n    const { settings: { queryEngine } } = pathData;\n\n    // Return an iterator over the activity paths\n    return (type = `${as}Like`) => toIterablePromise(async function* () {\n      // Only process activities if a user is logged in\n      let user;\n      try {\n        user = await root.user;\n      }\n      catch (error) {\n        if (self.requireUser)\n          throw error;\n        return;\n      }\n\n      // Determine the storage location\n      const storage = await root.user.pim$storage;\n      const document = new URL(self.activitiesPath, storage || user).href;\n\n      // Obtain results for every activity on the path\n      const results = [];\n      const actor = namedNode(user);\n      type = namedNode(type);\n      for await (const object of path) {\n        if (object.termType === 'NamedNode') {\n          const activity = { actor, type, object };\n          for await (const result of self.createResults(activity, document, queryEngine))\n            results.push(result);\n        }\n      }\n\n      // Process all results and return paths starting from the returned terms\n      for (const term of await self.processResults(results, document, queryEngine))\n        yield root[term.value];\n    });\n  }\n\n  async processResults(results) {\n    return results;\n  }\n}\n","import { SparqlHandler } from 'ldflex';\n\nexport const { termToString } = SparqlHandler.prototype;\n\nexport function replaceVariables(template, terms) {\n  for (const name in terms)\n    template = template.replace(new RegExp(`_:${name}`, 'g'), termToString(terms[name]));\n  return template;\n}\n\n// Transforms the arguments into an Immutable.js-style list\nexport function asList(...items) {\n  return {\n    size: items.length,\n    values: () => ({\n      next: () => ({ value: items.shift() }),\n    }),\n  };\n}\n","import ActivityHandler from './ActivityHandler';\nimport activityTemplate from './activity.ttl';\nimport { replaceVariables } from '../util';\nimport { namedNode, literal } from '@rdfjs/data-model';\nimport uuid from 'uuid/v4';\nimport context from '@solid/context';\n\nconst { xsd } = context['@context'];\n\n/**\n * Handler that creates an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class CreateActivityHandler extends ActivityHandler {\n  // Creates an activity for insertion in the given document\n  async* createResults(activity, document) {\n    const id = namedNode(new URL(`#${uuid()}`, document).href);\n    const published = literal(new Date().toISOString(), `${xsd}dateTime`);\n    activity = { id, published, ...activity };\n\n    const insert = replaceVariables(activityTemplate, activity);\n    yield { id, insert };\n  }\n\n  // Inserts the activities into the document\n  async processResults(results, document, queryEngine) {\n    const sparql = `INSERT {\\n${results.map(r => r.insert).join('')}}`;\n    await queryEngine.executeUpdate(sparql, document).next();\n    return results.map(r => r.id);\n  }\n}\n","import ActivityHandler from './ActivityHandler';\nimport queryTemplate from './activity-triples.sparql';\nimport { replaceVariables, termToString } from '../util';\n\nconst components = ['?subject', '?predicate', '?object'];\n\n/**\n * Handler that deletes an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class DeleteActivityHandler extends ActivityHandler {\n  // Finds activity triples for deletion\n  async* createResults(activity, document, queryEngine) {\n    const query = replaceVariables(queryTemplate, activity);\n    for await (const triple of queryEngine.execute(query, document)) {\n      const terms = components.map(c => termToString(triple.get(c)));\n      yield `${terms.join(' ')}.\\n`;\n    }\n  }\n\n  // Deletes the activity triples from the document\n  async processResults(results, document, queryEngine) {\n    const sparql = `DELETE {\\n${results.join('')}}`;\n    await queryEngine.executeUpdate(sparql, document).next();\n    return [];\n  }\n}\n","import { namedNode } from '@rdfjs/data-model';\n\n/**\n * LDflex property resolver that returns a new path\n * starting from the property name as a subject.\n *\n * For example, when triggered as\n *     data['http://person.example/#me'].friends.firstName\n * it will create a path with `http://person.example/#me` as subject\n * and then resolve `friends` and `firstName` against the JSON-LD context.\n *\n * In case a source object is given as input, data will be pulled from there.\n */\nexport default class SubjectPathResolver {\n  constructor(pathFactory, source) {\n    this._paths = pathFactory;\n    this._source = source;\n  }\n\n  /** Resolve all string properties (not Symbols) */\n  supports(property) {\n    return typeof property === 'string';\n  }\n\n  resolve(property, { settings }) {\n    return this._createSubjectPath(namedNode(property), settings);\n  }\n\n  _createSubjectPath(subject, { createQueryEngine }) {\n    const source = this._source || Promise.resolve(subject).catch(() => null);\n    const queryEngine = createQueryEngine(source);\n    return this._paths.create({ queryEngine }, { subject });\n  }\n}\n","import { PathFactory, defaultHandlers } from 'ldflex';\nimport SubjectPathResolver from '../resolvers/SubjectPathResolver';\n\nexport default class SourcePathHandler {\n  constructor(pathFactory) {\n    this._paths = pathFactory;\n  }\n\n  handle() {\n    return source => new PathFactory({\n      handlers: { ...defaultHandlers },\n      resolvers: [new SubjectPathResolver(this._paths, source)],\n    }).create();\n  }\n}\n","import SubjectPathResolver from '../resolvers/SubjectPathResolver';\nimport auth from 'solid-auth-client';\nimport { namedNode } from '@rdfjs/data-model';\n\n/**\n * Creates a path with the current user as a subject.\n */\nexport default class UserPathHandler extends SubjectPathResolver {\n  handle({ settings }) {\n    const subject = this.getWebId().then(namedNode);\n    return this._createSubjectPath(subject, settings);\n  }\n\n  /** Gets the WebID of the logged in user */\n  async getWebId() {\n    const session = await auth.currentSession();\n    if (!session)\n      throw new Error('Cannot resolve user path: no user logged in');\n    return session.webId;\n  }\n}\n","import { PathFactory, defaultHandlers } from 'ldflex';\nimport context from '@solid/context';\nimport SolidDeleteFunctionHandler from './handlers/SolidDeleteFunctionHandler';\nimport FindActivityHandler from './handlers/FindActivityHandler';\nimport CreateActivityHandler from './handlers/CreateActivityHandler';\nimport DeleteActivityHandler from './handlers/DeleteActivityHandler';\nimport SourcePathHandler from './handlers/SourcePathHandler';\nimport UserPathHandler from './handlers/UserPathHandler';\nimport ContextResolver from './resolvers/ContextResolver';\nimport SubjectPathResolver from './resolvers/SubjectPathResolver';\n\nconst { as } = context['@context'];\nconst contextResolver = new ContextResolver(context);\n\n// Handlers for subject paths\nconst subjectHandlers = {\n  ...defaultHandlers,\n\n  // Custom delete handler to match node-solid-server behavior\n  delete: new SolidDeleteFunctionHandler(),\n\n  // Find activities\n  findActivity: new FindActivityHandler(),\n  likes: (_, path) => path.findActivity(`${as}Like`),\n  dislikes: (_, path) => path.findActivity(`${as}Dislike`),\n  follows: (_, path) => path.findActivity(`${as}Follow`),\n\n  // Create activities\n  createActivity: new CreateActivityHandler(),\n  like: (_, path) => () => path.createActivity(`${as}Like`),\n  dislike: (_, path) => () => path.createActivity(`${as}Dislike`),\n  follow: (_, path) => () => path.createActivity(`${as}Follow`),\n\n  // Delete activities\n  deleteActivity: new DeleteActivityHandler(),\n  unlike: (_, path) => () => path.deleteActivity(`${as}Like`),\n  undislike: (_, path) => () => path.deleteActivity(`${as}Dislike`),\n  unfollow: (_, path) => () => path.deleteActivity(`${as}Follow`),\n};\n\n// Creates an LDflex for Solid root path with the given settings\nexport default function createRootPath(defaultSettings) {\n  let rootPath = null;\n\n  // Factory for data paths that start from a given subject\n  const subjectPathFactory = new PathFactory({\n    handlers: { ...subjectHandlers, root: () => rootPath },\n    resolvers: [contextResolver],\n  });\n\n  // Root path that resolves the first property access\n  rootPath = new PathFactory({\n    // Handlers of specific named properties\n    handlers: {\n      ...defaultHandlers,\n\n      // The `from` function takes a source as input\n      from: new SourcePathHandler(subjectPathFactory),\n      // The `user` property starts a path with the current user as subject\n      user: new UserPathHandler(subjectPathFactory),\n\n      // Clears the cache for the given document (or everything, if undefined)\n      clearCache: ({ settings }) => doc =>\n        settings.createQueryEngine().clearCache(doc),\n\n      // Expose the JSON-LD context\n      context: contextResolver,\n    },\n    // Resolvers for all remaining properties\n    resolvers: [\n      // `data[url]` starts a path with the property as subject\n      new SubjectPathResolver(subjectPathFactory),\n    ],\n    ...defaultSettings,\n  }).create();\n  return rootPath;\n}\n","import { JSONLDResolver } from 'ldflex';\n\n/**\n * A ContextResolver is a combined resolver/handler that:\n * - resolves a JSON-LD context\n * - handles by returning an object that\n *   - is the initial context passed to the constructor\n *   - allows extending that context by calling `.extend`\n *   - when `await`ed, resolves to the expanded context\n */\nexport default class ContextResolver extends JSONLDResolver {\n  constructor(context) {\n    super(context);\n\n    // Create an exposed version of the initial context, with additional functionality\n    const exposedContext = this._exposedContext = Object.create(context['@context']);\n    // Allow extending the context\n    Object.defineProperty(exposedContext, 'extend', {\n      value: (...contexts) => this.extendContext(...contexts),\n    });\n    // Resolve to the expanded context\n    Object.defineProperty(exposedContext, 'then', {\n      value: (resolve, reject) => this._context.then(resolve, reject),\n    });\n  }\n\n  handle() {\n    return this._exposedContext;\n  }\n}\n","import { DeleteFunctionHandler } from 'ldflex';\n\n/**\n * node-solid-server deviates from the SPARQL UPDATE spec:\n * whereas the spec asks for DELETE on non-existing triples to silently succeed,\n * node-solid-server will only DELETE if exactly one triple matches.\n *\n * This delete handler works around that limitation\n * by first requesting all existing values for a path,\n * and then only issuing DELETE statements for those that exist.\n */\nexport default class SolidDeleteFunctionHandler extends DeleteFunctionHandler {\n  async extractObjects(pathData, path, args) {\n    // Obtain all values whose deletion was requested\n    const objects = await super.extractObjects(pathData, path, args);\n\n    // Obtain all values that currently exist\n    const existing = [];\n    for await (const term of path) {\n      if (term.termType !== 'BlankNode')\n        existing.push(term);\n    }\n\n    // Perform deletions only for values that exist\n    return !objects ? existing : existing.filter(e => objects.some(o => o.equals(e)));\n  }\n}\n","import ActivityHandler from './ActivityHandler';\nimport queryTemplate from './activity.sparql';\nimport { replaceVariables } from '../util';\n\n/**\n * Handler that finds an activity in the user's data pod\n * Requires:\n * - the `root.user` handler\n * - the `root[...]` resolver\n * - a queryEngine property in the path settings\n */\nexport default class FindActivityHandler extends ActivityHandler {\n  requireUser = false;\n\n  // Finds all activities in the document matching the given pattern\n  async* createResults(activity, document, queryEngine) {\n    const query = replaceVariables(queryTemplate, activity);\n    for await (const binding of queryEngine.execute(query, document))\n      yield binding.values().next().value;\n  }\n}\n","import auth from 'solid-auth-client';\nimport { asList } from './util';\n\n/**\n * A wrapper around a query engine\n * that uses Solid authenticated requests for updates.\n */\nexport default class SolidUpdateEngine {\n  /**\n   * Creates a wrapper around the given query engine.\n   */\n  constructor(sources, baseEngine) {\n    // Preload source but silence errors; they will be thrown during execution\n    this._source = this.getUpdateSource(sources);\n    this._source.catch(() => null);\n    this._engine = baseEngine;\n  }\n\n  /**\n   * Creates an asynchronous iterable of results for the given SPARQL query.\n   */\n  async* execute(sparql, sources) {\n    yield* /^\\s*(?:INSERT|DELETE)/i.test(sparql) ?\n      this.executeUpdate(sparql, sources) :\n      this._engine.execute(sparql, sources);\n  }\n\n  /**\n   * Creates an asynchronous iterable with the results of the SPARQL UPDATE query.\n   */\n  executeUpdate(sparql, sources) {\n    let done = false;\n    const next = async () => {\n      if (done)\n        return { done };\n      done = true;\n\n      // Send authenticated PATCH request to the document\n      const source = await (sources ? this.getUpdateSource(sources) : this._source);\n      const { ok, status, statusText } = await auth.fetch(source, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/sparql-update',\n        },\n        body: sparql,\n      });\n      if (!ok)\n        throw new Error(`Update query failed (${status}): ${statusText}`);\n\n      // Clear stale cached versions of the document\n      await this.clearCache(source);\n\n      // Return success\n      return { value: asList({ ok }) };\n    };\n    return {\n      next,\n      [Symbol.asyncIterator]() { return this; },\n    };\n  }\n\n  /**\n   * Parses the source(s) into the source to update.\n   */\n  async getUpdateSource(sources) {\n    let source = await sources;\n\n    // Transform URLs or terms into strings\n    if (source instanceof URL)\n      source = source.href;\n    else if (source && typeof source.value === 'string')\n      source = source.value;\n\n    // Parse a string URL source\n    if (typeof source === 'string') {\n      if (!/^https?:\\/\\//.test(source))\n        throw new Error('Can only update an HTTP(S) document.');\n      return source.replace(/#.*/, '');\n    }\n\n    // Flatten recursive calls to this function\n    if (Array.isArray(source)) {\n      source = await Promise.all(source.map(s => this.getUpdateSource(s)));\n      source = [].concat(...source).filter(s => !!s);\n      if (source.length !== 1)\n        throw new Error('Can only update a single source.');\n      return source[0];\n    }\n\n    // Error on unsupported sources\n    throw new Error(`Unsupported source: ${source}`);\n  }\n\n  /**\n   * Removes the given document (or all, if not specified) from the cache,\n   * such that fresh results are obtained next time.\n   */\n  clearCache(document) {\n    return this._engine.clearCache(document);\n  }\n}\n","import RdflibQueryEngine from './RdflibQueryEngine';\nexport default RdflibQueryEngine;\n","import {\n  graph,\n  Fetcher,\n  SPARQLToQuery as sparqlToQuery,\n} from 'rdflib';\n\n/**\n * Asynchronous iterator wrapper for the rdflib.js SPARQL query engine.\n */\nexport default class RdflibQueryEngine {\n  /**\n   * Creates a query engine with the given sources as default.\n   */\n  constructor(defaultSources) {\n    // Preload sources but silence errors; they will be thrown during execution\n    this._defaultStore = this.readSources(defaultSources);\n    this._defaultStore.catch(() => null);\n  }\n\n  /**\n   * Creates an asynchronous iterable of results for the given SPARQL query.\n   */\n  async* execute(sparql, sources) {\n    if ((/^\\s*(?:INSERT|DELETE)/i).test(sparql))\n      yield* this.executeUpdate(sparql, sources);\n\n    // Parse the SPARQL query\n    const query = sparqlToQuery(sparql, true, graph());\n    // Load the sources if passed, the default sources otherwise\n    const store = await (sources ? this.readSources(sources) : this._defaultStore);\n    // Disable link traversal for now (slow, and unreliable error handling)\n    store.fetcher = null;\n\n    // Execute the query and store the results in an array\n    const results = [];\n    await new Promise((resolve, reject) => {\n      store.query(query, result => results.push(result), null,\n        error => error ? reject(error) : resolve(results));\n    });\n\n    // Convert every result to a map\n    const vars = new Set(query.vars.map(v => `?${v.value}`));\n    for (const result of results) {\n      // Only return explicitly requested variables\n      // (workaround for https://github.com/linkeddata/rdflib.js/issues/393)\n      const bindings = Object.entries(result).filter(([v]) => vars.has(v));\n      yield new Map(bindings);\n    }\n  }\n\n  /**\n   * Creates an asynchronous iterable with the results of the SPARQL UPDATE query.\n   */\n  async* executeUpdate(sparql, sources) {\n    throw new Error(`SPARQL UPDATE queries are unsupported, received: ${sparql}`);\n  }\n\n  /**\n   * Reads the specified stores into a store.\n   */\n  async readSources(sourceList, store = graph()) {\n    let source = await sourceList;\n    if (source) {\n      // Transform URLs or terms into strings\n      if (source instanceof URL)\n        source = source.href;\n      else if (source.termType === 'NamedNode')\n        source = source.value;\n\n      // Read a document from a URL\n      if (typeof source === 'string') {\n        const document = source.replace(/#.*/, '');\n        const fetcher = new Fetcher(store);\n        await fetcher.load(document);\n      }\n      // Read an array of sources\n      else if (Array.isArray(source)) {\n        await Promise.all(source.map(s => this.readSources(s, store)));\n      }\n      // Read an RDF/JS source\n      else if (typeof source.match === 'function') {\n        const results = source.match(null, null, null, null);\n        await new Promise((resolve, reject) => {\n          results.on('data', addQuad);\n          results.on('end', finish);\n          results.on('error', finish);\n          // Adds a quad to the store\n          function addQuad(quad) {\n            try {\n              store.add(quad.subject, quad.predicate, quad.object, quad.graph);\n            }\n            catch (error) {\n              finish(error);\n            }\n          }\n          // Finishes reading the source\n          function finish(error) {\n            results.removeListener('data', addQuad);\n            results.removeListener('end', finish);\n            results.removeListener('error', finish);\n            return error ? reject(error) : resolve(null);\n          }\n        });\n      }\n      // Error on unsupported sources\n      else {\n        throw new Error(`Unsupported source: ${source}`);\n      }\n    }\n    return store;\n  }\n\n  /**\n   * Removes the given document (or all, if not specified) from the cache,\n   * such that fresh results are obtained next time.\n   */\n  async clearCache(document) {\n    // No action required, since we need a new fetcher for every store\n  }\n}\n","import RootPath from '../RootPath';\nimport SolidUpdateEngine from '../SolidUpdateEngine';\nimport RdflibQueryEngine from '@ldflex/rdflib';\n\n// Export the root path with rdflib.js as query engine\nexport default new RootPath({\n  createQueryEngine: sources =>\n    new SolidUpdateEngine(sources, new RdflibQueryEngine(sources)),\n});\n"],"sourceRoot":""}