var solid="object"==typeof solid?solid:{};solid.data=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=23)}([function(e,t,r){var n=r(18);e.exports=n},function(e){e.exports=JSON.parse('{"@context":{"acl":"http://www.w3.org/ns/auth/acl#","app":"http://www.w3.org/ns/solid/app#","as":"https://www.w3.org/ns/activitystreams#","cert":"http://www.w3.org/ns/auth/cert#","dc":"http://purl.org/dc/elements/1.1/","dct":"http://purl.org/dc/terms/","foaf":"http://xmlns.com/foaf/0.1/","ldp":"http://www.w3.org/ns/ldp#","owl":"http://www.w3.org/2002/07/owl#","pim":"http://www.w3.org/ns/pim/space#","rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","rdfs":"http://www.w3.org/2000/01/rdf-schema#","schema":"http://schema.org/","sioc":"http://rdfs.org/sioc/ns#","solid":"http://www.w3.org/ns/solid/terms#","stat":"http://www.w3.org/ns/posix/stat#","ui":"http://www.w3.org/ns/ui#","vcard":"http://www.w3.org/2006/vcard/ns#","xsd":"http://www.w3.org/2001/XMLSchema#","accessControl":"acl:accessControl","accessTo":"acl:accessTo","accessToClass":"acl:accessToClass","agent":"acl:agent","agents":"acl:agent","agentClass":"acl:agentClass","agentClasses":"acl:agentClass","agentGroup":"acl:agentGroup","agentGroups":"acl:agentGroup","defaultAcl":"acl:default","defaultAclForNew":"acl:defaultForNew","delegates":"acl:delegates","mode":"acl:mode","modes":"acl:mode","origin":"acl:origin","origins":"acl:origin","actor":"as:actor","attachment":"as:attachment","attributedTo":"as:attributedTo","author":"as:author","bcc":"as:bcc","bto":"as:bto","cc":"as:cc","inReplyTo":"as:inReplyTo","object":"as:object","publicationDate":"as:published","subject":"as:subject","summary":"as:summary","target":"as:target","to":"as:to","abstract":"dc:abstract","abstracts":"dc:abstract","created":"dc:created","license":"dc:license","modified":"dc:modified","title":"dc:title","titles":"dc:title","account":"foaf:account","accounts":"foaf:account","age":"foaf:age","basedNear":"foaf:based_near","birthday":"foaf:birthday","blog":"foaf:weblog","depiction":"foaf:depiction","depicts":"foaf:depicts","email":"foaf:mbox","familyName":"foaf:familyName","firstName":"foaf:givenName","friend":"foaf:knows","friends":"foaf:knows","gender":"foaf:gender","givenName":"foaf:givenName","homepage":"foaf:homepage","image":"foaf:img","images":"foaf:img","interest":"foaf:topic_interest","interests":"foaf:topic_interest","knows":"foaf:knows","lastName":"foaf:familyName","logo":"foaf:logo","made":"foaf:made","maker":"foaf:maker","member":"foaf:member","name":"foaf:name","nick":"foaf:nick","page":"foaf:page","pages":"foaf:page","primaryTopic":"foaf:primaryTopic","primaryTopicOf":"foaf:primaryTopicOf","publication":"foaf:publications","publications":"foaf:publications","thumbnail":"foaf:thumbnail","thumbnails":"foaf:thumbnail","topic":"foaf:topic","topics":"foaf:topic","inbox":"ldp:inbox","inboxes":"ldp:inbox","storage":"pim:storage","preferences":"pim:preferencesFile","workspace":"pim:workspace","type":"rdf:type","types":"rdf:type","comment":"rdfs:comment","comments":"rdfs:comment","label":"rdfs:label","labels":"rdfs:label","seeAlso":"rdfs:seeAlso","definedBy":"rdfs:isDefinedBy","oidcIssuer":"solid:oidcIssuer","publicTypeIndex":"solid:publicTypeIndex","publicTypeIndexes":"solid:publicTypeIndex","privateTypeIndex":"solid:privateTypeIndex","privateTypeIndexes":"solid:privateTypeIndex"}}')},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(8)),n(r(6)),n(r(11)),n(r(12)),n(r(7))},,function(e,t){e.exports=$rdf},function(e,t){e.exports=solid.auth},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t){super(e),this.code=t}}t.ErrorCoded=n,function(e){e.COLLIDING_KEYWORDS="colliding keywords",e.CONFLICTING_INDEXES="conflicting indexes",e.CYCLIC_IRI_MAPPING="cyclic IRI mapping",e.INVALID_ID_VALUE="invalid @id value",e.INVALID_INDEX_VALUE="invalid @index value",e.INVALID_NEST_VALUE="invalid @nest value",e.INVALID_PREFIX_VALUE="invalid @prefix value",e.INVALID_PROPAGATE_VALUE="invalid @propagate value",e.INVALID_REVERSE_VALUE="invalid @reverse value",e.INVALID_IMPORT_VALUE="invalid @import value",e.INVALID_VERSION_VALUE="invalid @version value",e.INVALID_BASE_IRI="invalid base IRI",e.INVALID_CONTAINER_MAPPING="invalid container mapping",e.INVALID_CONTEXT_ENTRY="invalid context entry",e.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",e.INVALID_DEFAULT_LANGUAGE="invalid default language",e.INVALID_INCLUDED_VALUE="invalid @included value",e.INVALID_IRI_MAPPING="invalid IRI mapping",e.INVALID_JSON_LITERAL="invalid JSON literal",e.INVALID_KEYWORD_ALIAS="invalid keyword alias",e.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",e.INVALID_LANGUAGE_MAPPING="invalid language mapping",e.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",e.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",e.INVALID_LOCAL_CONTEXT="invalid local context",e.INVALID_REMOTE_CONTEXT="invalid remote context",e.INVALID_REVERSE_PROPERTY="invalid reverse property",e.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",e.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",e.INVALID_SCOPED_CONTEXT="invalid scoped context",e.INVALID_SCRIPT_ELEMENT="invalid script element",e.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",e.INVALID_TERM_DEFINITION="invalid term definition",e.INVALID_TYPE_MAPPING="invalid type mapping",e.INVALID_TYPE_VALUE="invalid type value",e.INVALID_TYPED_VALUE="invalid typed value",e.INVALID_VALUE_OBJECT="invalid value object",e.INVALID_VALUE_OBJECT_VALUE="invalid value object value",e.INVALID_VOCAB_MAPPING="invalid vocab mapping",e.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",e.KEYWORD_REDEFINITION="keyword redefinition",e.LOADING_DOCUMENT_FAILED="loading document failed",e.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",e.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",e.PROCESSING_MODE_CONFLICT="processing mode conflict",e.PROTECTED_TERM_REDEFINITION="protected term redefinition",e.CONTEXT_OVERFLOW="context overflow",e.INVALID_BASE_DIRECTION="invalid base direction",e.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",e.INVALID_STREAMING_KEY_ORDER="invalid streaming key order"}(t.ERROR_CODES||(t.ERROR_CODES={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&"#"===e[0])}static getPrefix(e,t){if(e&&"#"===e[0])return null;const r=e.indexOf(":");if(r>=0){if(e.length>r+1&&"/"===e.charAt(r+1)&&"/"===e.charAt(r+2))return null;const n=e.substr(0,r);if("_"===n)return null;if(t[n])return n}return null}static getContextValueId(e){if(null===e||"string"==typeof e)return e;const t=e["@id"];return t||null}static isSimpleTermDefinitionPrefix(e,t){return!n.isPotentialKeyword(e)&&("_"===e[0]||t.allowPrefixNonGenDelims||n.isPrefixIriEndingWithGenDelim(e))}static isPotentialKeyword(e){return"string"==typeof e&&n.KEYWORD_REGEX.test(e)}static isPrefixIriEndingWithGenDelim(e){return n.ENDS_WITH_GEN_DELIM.test(e)}static isPrefixValue(e){return e&&("string"==typeof e||e&&"object"==typeof e)}static isValidIri(e){return n.IRI_REGEX.test(e)}static isValidIriWeak(e){return!!e&&":"!==e[0]&&n.IRI_REGEX_WEAK.test(e)}static isValidKeyword(e){return n.VALID_KEYWORDS[e]}static isTermProtected(e,t){const r=e[t];return!("string"==typeof r)&&r&&r["@protected"]}static hasProtectedTerms(e){for(const t of Object.keys(e))if(n.isTermProtected(e,t))return!0;return!1}static isReservedInternalKeyword(e){return e.startsWith("@__")}}n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,n.IRI_REGEX_WEAK=/(?::[^:])|\//,n.KEYWORD_REGEX=/^@[a-z]+$/i,n.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,n.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,n.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,n.VALID_KEYWORDS={"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},n.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],n.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],n.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],n.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],n.CONTAINERS_1_0=["@list","@set","@index"],t.Util=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),r(9);const o=r(10),i=r(6),a=r(11),s=r(12),c=r(7),l=r(17);class u{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new a.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32}static validateLanguage(e,t,r){if("string"!=typeof e)throw new i.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,r);if(!c.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new i.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,r);return!1}return!0}static validateDirection(e,t){if("string"!=typeof e)throw new i.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,i.ERROR_CODES.INVALID_BASE_DIRECTION);if(!c.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new i.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,i.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"==typeof r&&r["@reverse"]&&!r["@id"]){if("string"!=typeof r["@reverse"]||c.Util.isValidKeyword(r["@reverse"]))throw new i.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${r["@reverse"]}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);r["@id"]=r["@reverse"],c.Util.isPotentialKeyword(r["@reverse"])?delete r["@reverse"]:r["@reverse"]=!0}}return e}expandPrefixedTerms(e,t){const r=e.getContextRaw();for(const n of Object.keys(r))if(c.Util.EXPAND_KEYS_BLACKLIST.indexOf(n)<0&&!c.Util.isReservedInternalKeyword(n)){const o=r[n];if(c.Util.isPotentialKeyword(n)&&c.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(n)>=0&&("@type"!==n||"object"==typeof r[n]&&!r[n]["@protected"]&&"@set"!==r[n]["@container"]))throw new i.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${n} to ${JSON.stringify(o)}`,i.ERROR_CODES.KEYWORD_REDEFINITION);if(c.Util.ALIAS_RANGE_BLACKLIST.indexOf(c.Util.getContextValueId(o))>=0)throw new i.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${n} to ${JSON.stringify(o)}`,i.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(o&&c.Util.isPotentialKeyword(c.Util.getContextValueId(o))&&!0===o["@prefix"])throw new i.ErrorCoded(`Tried to use keyword aliases as prefix: '${n}': '${JSON.stringify(o)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);for(;c.Util.isPrefixValue(r[n]);){const o=r[n];let i=!1;if("string"==typeof o)r[n]=e.expandTerm(o,!0),i=i||o!==r[n];else{const a=o["@id"],s=o["@type"],l=!("@prefix"in o)||c.Util.isValidIri(n);if("@id"in o)null!=a&&"string"==typeof a&&(r[n]["@id"]=e.expandTerm(a,!0),i=i||a!==r[n]["@id"]);else if(!c.Util.isPotentialKeyword(n)&&l){const t=e.expandTerm(n,!0);t!==n&&(r[n]["@id"]=t,i=!0)}!s||"string"!=typeof s||"@vocab"===s||o["@container"]&&o["@container"]["@type"]||!l||(r[n]["@type"]=e.expandTerm(s,!0),t&&s===r[n]["@type"]&&(r[n]["@type"]=e.expandTerm(s,!1)),i=i||s!==r[n]["@type"])}if(!i)break}}}normalize(e,{processingMode:t,normalizeLanguageTags:r}){if(r||1===t)for(const t of Object.keys(e))if("@language"===t&&"string"==typeof e[t])e[t]=e[t].toLowerCase();else{const r=e[t];r&&"object"==typeof r&&"string"==typeof r["@language"]&&(r["@language"]=r["@language"].toLowerCase())}}containersToHash(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"==typeof r)if("string"==typeof r["@container"])r["@container"]={[r["@container"]]:!0};else if(Array.isArray(r["@container"])){const e={};for(const t of r["@container"])e[t]=!0;r["@container"]=e}}}applyScopedProtected(e,{processingMode:t}){if(t&&t>=1.1&&e["@protected"]){for(const t of Object.keys(e))if(!c.Util.isReservedInternalKeyword(t)&&!c.Util.isPotentialKeyword(t)&&!c.Util.isTermProtected(e,t)){const r=e[t];r&&"object"==typeof r?"@protected"in e[t]||(e[t]["@protected"]=!0):e[t]={"@id":r,"@protected":!0}}delete e["@protected"]}}validateKeywordRedefinitions(e,t,r){for(const n of Object.keys(t))if(c.Util.isTermProtected(e,n)){if("string"==typeof t[n]){const o=c.Util.isSimpleTermDefinitionPrefix(t[n],r);t[n]={"@id":t[n]},o&&(t[n]["@prefix"]=!0,e[n]["@prefix"]=!0)}const o=l(e[n]);t[n]["@protected"]=!0;if(o!==l(t[n]))throw new i.ErrorCoded(`Attempted to override the protected keyword ${n} from ${JSON.stringify(c.Util.getContextValueId(e[n]))} to ${JSON.stringify(c.Util.getContextValueId(t[n]))}`,i.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}validate(e,{processingMode:t}){for(const r of Object.keys(e)){if(c.Util.isReservedInternalKeyword(r))continue;if(""===r)throw new i.ErrorCoded(`The empty term is not allowed, got: '${r}': '${JSON.stringify(e[r])}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);const n=e[r],o=typeof n;if(c.Util.isPotentialKeyword(r)){switch(r.substr(1)){case"vocab":if(null!==n&&"string"!==o)throw new i.ErrorCoded("Found an invalid @vocab IRI: "+n,i.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==n&&"string"!==o)throw new i.ErrorCoded("Found an invalid @base IRI: "+e[r],i.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==n&&u.validateLanguage(n,!0,i.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==n&&"number"!==o)throw new i.ErrorCoded("Found an invalid @version number: "+n,i.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==n&&u.validateDirection(n,!0);break;case"propagate":if(1===t)throw new i.ErrorCoded("Found an illegal @propagate keyword: "+n,i.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==n&&"boolean"!==o)throw new i.ErrorCoded("Found an invalid @propagate value: "+n,i.ERROR_CODES.INVALID_PROPAGATE_VALUE)}if(c.Util.isValidKeyword(r)&&c.Util.isValidKeyword(c.Util.getContextValueId(n)))throw new i.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${c.Util.getContextValueId(n)}'`,i.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==n)switch(o){case"string":if(c.Util.getPrefix(n,e)===r)throw new i.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.CYCLIC_IRI_MAPPING);if(c.Util.isValidIriWeak(r)){if("@type"===n)throw new i.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${n}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(c.Util.isValidIri(n)&&n!==new s.JsonLdContextNormalized(e).expandTerm(r))throw new i.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${n}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!(c.Util.isCompactIri(r)||"@id"in n||("@id"===n["@type"]?e["@base"]:e["@vocab"])))throw new i.ErrorCoded(`Missing @id in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);for(const o of Object.keys(n)){const a=n[o];if(a)switch(o){case"@id":if(c.Util.isValidKeyword(a)&&"@type"!==a&&"@id"!==a&&"@graph"!==a)throw new i.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(c.Util.isValidIriWeak(r)){if("@type"===a)throw new i.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(c.Util.isValidIri(a)&&a!==new s.JsonLdContextNormalized(e).expandTerm(r))throw new i.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!=typeof a)throw new i.ErrorCoded(`Detected non-string @id in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(c.Util.getPrefix(a,e)===r)throw new i.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===n["@container"]&&"@id"!==a&&"@vocab"!==a)throw new i.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${r}': '${a}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);if(!("@id"===a||"@vocab"===a||1!==t&&"@json"===a||1!==t&&"@none"===a||"_"!==a[0]&&c.Util.isValidIri(a)))throw new i.ErrorCoded(`A context @type must be an absolute IRI, found: '${r}': '${a}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"==typeof a&&n["@id"]&&n["@id"]!==a)throw new i.ErrorCoded(`Found non-matching @id and @reverse term values in '${r}':'${a}' and '${n["@id"]}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in n)throw new i.ErrorCoded(`@nest is not allowed in the reverse property '${r}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===t&&(Object.keys(a).length>1||c.Util.CONTAINERS_1_0.indexOf(Object.keys(a)[0])<0))throw new i.ErrorCoded(`Invalid term @container for '${r}' ('${Object.keys(a)}') in 1.0, must be only one of ${c.Util.CONTAINERS_1_0.join(", ")}`,i.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const e of Object.keys(a)){if("@list"===e&&n["@reverse"])throw new i.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${r}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(c.Util.CONTAINERS.indexOf(e)<0)throw new i.ErrorCoded(`Invalid term @container for '${r}' ('${e}'), must be one of ${c.Util.CONTAINERS.join(", ")}`,i.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":u.validateLanguage(a,!0,i.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":u.validateDirection(a,!0);break;case"@prefix":if(null!==a&&"boolean"!=typeof a)throw new i.ErrorCoded(`Found an invalid term @prefix boolean in: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in n)&&!c.Util.isValidIri(r))throw new i.ErrorCoded(`Invalid @prefix definition for '${r}' ('${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===t||!n["@container"]||!n["@container"]["@index"])throw new i.ErrorCoded(`Attempt to add illegal key to value object: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(c.Util.isPotentialKeyword(a)&&"@nest"!==a)throw new i.ErrorCoded(`Found an invalid term @nest value in: '${r}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new i.ErrorCoded(`Found an invalid term value: '${r}': '${n}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,t,r){return"string"==typeof e||(r&&!("@base"in e)&&t.parentContext&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?null===e["@base"]||"string"!=typeof e["@base"]||c.Util.isValidIri(e["@base"])||(e["@base"]=o.resolve(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,t){if(!c.Util.isValidIri(e)&&(e=o.resolve(e,t),!c.Util.isValidIri(e)))throw new Error("Invalid context IRI: "+e);return e}parseInnerContexts(e,t){return n(this,void 0,void 0,(function*(){for(const r of Object.keys(e)){const n=e[r];if(n&&"object"==typeof n&&"@context"in n&&null!==n["@context"]){if(this.validateContext)try{const o=Object.assign({},e);o[r]=Object.assign({},o[r]),delete o[r]["@context"],yield this.parse(n["@context"],Object.assign({},t,{parentContext:o,ignoreProtection:!0,ignoreRemoteScopedContexts:!0}))}catch(e){throw new i.ErrorCoded(e.message,i.ERROR_CODES.INVALID_SCOPED_CONTEXT)}n["@context"]=(yield this.parse(n["@context"],Object.assign({},t,{minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()}}return e}))}parse(e,r={processingMode:u.DEFAULT_PROCESSING_MODE}){return n(this,void 0,void 0,(function*(){const{baseIRI:n,parentContext:o,external:a,processingMode:l,normalizeLanguageTags:f,ignoreProtection:d,minimalProcessing:p}=r;let y=o;const h=r.remoteContexts||{};if(Object.keys(h).length>=this.remoteContextsDepthLimit)throw new i.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(h),i.ERROR_CODES.CONTEXT_OVERFLOW);if(null==e){if(!d&&y&&c.Util.hasProtectedTerms(y))throw new i.ErrorCoded("Illegal context nullification when terms are protected",i.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new s.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}if("string"==typeof e){const t=this.normalizeContextIri(e,n),o=this.getOverriddenLoad(t,r);if(o)return new s.JsonLdContextNormalized(o);const i=yield this.parse(yield this.load(t),Object.assign({},r,{baseIRI:t,external:!0,remoteContexts:Object.assign({},h,{[t]:!0})}));return this.applyBaseEntry(i.getContextRaw(),r,!0),i}if(Array.isArray(e)){const t=[],o=yield Promise.all(e.map((e,o)=>{if("string"==typeof e){const i=this.normalizeContextIri(e,n);t[o]=i;const a=this.getOverriddenLoad(i,r);return a||this.load(i)}return e}));if(p)return new s.JsonLdContextNormalized(o);const i=yield o.reduce((e,n,o)=>e.then(e=>this.parse(n,Object.assign({},r,{baseIRI:t[o]||r.baseIRI,external:!!t[o]||r.external,parentContext:e.getContextRaw(),remoteContexts:t[o]?Object.assign({},h,{[t[o]]:!0}):h}))),Promise.resolve(new s.JsonLdContextNormalized(y||{})));return this.applyBaseEntry(i.getContextRaw(),r,!0),i}if("object"==typeof e){if("@context"in e)return yield this.parse(e["@context"],r);e=JSON.parse(JSON.stringify(e)),y&&(y=JSON.parse(JSON.stringify(y)));let o={};if(a&&delete e["@base"],this.applyBaseEntry(e,r,!0),this.containersToHash(e),p)return new s.JsonLdContextNormalized(e);let c={};if("@import"in e){if(!(l&&l>=1.1))throw new i.ErrorCoded("Context importing is not supported in JSON-LD 1.0",i.ERROR_CODES.INVALID_CONTEXT_ENTRY);if("string"!=typeof e["@import"])throw new i.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],i.ERROR_CODES.INVALID_IMPORT_VALUE);c=yield this.loadImportContext(this.normalizeContextIri(e["@import"],n)),delete e["@import"]}o=Object.assign({},o,y,c,e);const h=new s.JsonLdContextNormalized(o);return yield this.parseInnerContexts(o,r),!d&&y&&l&&l>=1.1&&this.validateKeywordRedefinitions(y,o,t.defaultExpandOptions),(o&&o["@version"]||l||u.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&"string"==typeof e["@vocab"]||""===e["@vocab"])&&e["@vocab"].indexOf(":")<0&&y&&"@vocab"in y&&(o["@vocab"]=y["@vocab"]+e["@vocab"]),this.idifyReverseTerms(o),this.expandPrefixedTerms(h,this.expandContentTypeToBase),this.normalize(o,{processingMode:l,normalizeLanguageTags:f}),this.applyScopedProtected(o,{processingMode:l}),this.validateContext&&this.validate(o,{processingMode:l}),h}throw new i.ErrorCoded("Tried parsing a context that is not a string, array or object, but got "+e,i.ERROR_CODES.INVALID_LOCAL_CONTEXT)}))}load(e){return n(this,void 0,void 0,(function*(){const t=this.documentCache[e];if(t)return"string"==typeof t?t:Array.isArray(t)?t.slice():Object.assign({},t);let r;try{r=yield this.documentLoader.load(e)}catch(t){throw new i.ErrorCoded(`Failed to load remote context ${e}: ${t.message}`,i.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in r))throw new i.ErrorCoded("Missing @context in remote context at "+e,i.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=r["@context"]}))}getOverriddenLoad(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new i.ErrorCoded("Detected a cyclic context inclusion of "+e,i.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}loadImportContext(e){return n(this,void 0,void 0,(function*(){const t=yield this.load(e);if("object"!=typeof t||Array.isArray(t))throw new i.ErrorCoded("An imported context must be a single object: "+e,i.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in t)throw new i.ErrorCoded("An imported context can not import another context: "+e,i.ERROR_CODES.INVALID_CONTEXT_ENTRY);return t}))}}u.DEFAULT_PROCESSING_MODE=1.1,t.ContextParser=u,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},function(e,t,r){r(15),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(16))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),r(9);t.FetchDocumentLoader=class{load(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{accept:"application/ld+json"}});if(t.ok)return yield t.json();throw new Error(t.statusText||""+t.status)}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10),o=r(8),i=r(6),a=r(7);t.JsonLdContextNormalized=class{constructor(e){this.contextRaw=e}getContextRaw(){return this.contextRaw}expandTerm(e,t,r=o.defaultExpandOptions){const s=this.contextRaw[e];if(null===s||s&&null===s["@id"])return null;let c=!0;if(s&&t){const t=a.Util.getContextValueId(s);if(t&&t!==e){if("string"==typeof t&&(a.Util.isValidIri(t)||a.Util.isValidKeyword(t)))return t;a.Util.isPotentialKeyword(t)||(c=!1)}}const l=a.Util.getPrefix(e,this.contextRaw),u=this.contextRaw["@vocab"],f=(!!u||""===u)&&u.indexOf(":")<0,d=this.contextRaw["@base"],p=a.Util.isPotentialKeyword(e);if(l){const t=this.contextRaw[l],n=a.Util.getContextValueId(t);if(n){if("string"!=typeof t&&r.allowPrefixForcing){if("_"!==n[0]&&!p&&!t["@prefix"]&&!(e in this.contextRaw))return e}else if(!a.Util.isSimpleTermDefinitionPrefix(n,r))return e;return n+e.substr(l.length+1)}}else{if(t&&(u||""===u||r.allowVocabRelativeToBase&&d&&f)&&!p&&!a.Util.isCompactIri(e)){if(f){if(r.allowVocabRelativeToBase)return n.resolve(u,d)+e;throw new i.ErrorCoded(`Relative vocab expansion for term '${e}' with vocab '${u}' is not allowed.`,i.ERROR_CODES.INVALID_VOCAB_MAPPING)}return u+e}if(!t&&d&&!p&&!a.Util.isCompactIri(e))return n.resolve(e,d)}if(c)return e;throw new i.ErrorCoded(`Invalid IRI mapping found for context entry '${e}': '${JSON.stringify(s)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(e,t){if(t&&this.contextRaw["@vocab"]&&e.startsWith(this.contextRaw["@vocab"]))return e.substr(this.contextRaw["@vocab"].length);if(!t&&this.contextRaw["@base"]&&e.startsWith(this.contextRaw["@base"]))return e.substr(this.contextRaw["@base"].length);const r={prefix:"",suffix:e};for(const n in this.contextRaw){const o=this.contextRaw[n];if(o&&!a.Util.isPotentialKeyword(n)){const i=a.Util.getContextValueId(o);if(e.startsWith(i)){const o=e.substr(i.length);if(o)o.length<r.suffix.length&&(r.prefix=n,r.suffix=o);else if(t)return n}}}return r.prefix?r.prefix+":"+r.suffix:e}}},function(e,t){function r(){this.value=""}r.prototype.equals=function(e){return!!e&&e.termType===this.termType},r.prototype.termType="DefaultGraph",e.exports=r},function(e,t){function r(e){this.value=e}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType="NamedNode",e.exports=r},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return p})),r.d(t,"Request",(function(){return g})),r.d(t,"Response",(function(){return I})),r.d(t,"DOMException",(function(){return _})),r.d(t,"fetch",(function(){return x}));var n="URLSearchParams"in self,o="Symbol"in self&&"iterator"in Symbol,i="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in self,s="ArrayBuffer"in self;if(s)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function w(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var e,t,r,n=y(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=h(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=f(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var r,n,o=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),m.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function I(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},v.call(g.prototype),v.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var e=new I(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];I.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new I(null,{status:t,headers:{location:e}})};var _=self.DOMException;try{new _}catch(e){(_=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function x(e,t){return new Promise((function(r,n){var o=new g(e,t);if(o.signal&&o.signal.aborted)return n(new _("Aborted","AbortError"));var a=new XMLHttpRequest;function s(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new I(o,n))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.onabort=function(){n(new _("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",s),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",s)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=p,self.Request=g,self.Response=I)},function(e,t,r){"use strict";function n(e){const t=[];let r=0;for(;r<e.length;)switch(e[r]){case"/":if("."===e[r+1])if("."===e[r+2]){if(!i(e[r+3])){t.push([]),r++;break}t.pop(),e[r+3]||t.push([]),r+=3}else{if(!i(e[r+2])){t.push([]),r++;break}e[r+2]||t.push([]),r+=2}else t.push([]),r++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(r)),r=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[r]),r++}return"/"+t.map(e=>e.join("")).join("/")}function o(e,t){let r=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(r=t+3):"/"===e[0]&&"/"===e[1]&&(r=2);const o=e.indexOf("/",r);if(o<0)return e;return e.substr(0,o)+n(e.substr(o))}function i(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(e,t){const r=(t=t||"").indexOf("#");if(r>0&&(t=t.substr(0,r)),!e.length)return t;if(e.startsWith("?")){const r=t.indexOf("?");return r>0&&(t=t.substr(0,r)),t+e}if(e.startsWith("#"))return t+e;if(!t.length)return o(e,e.indexOf(":"));const i=e.indexOf(":");if(i>=0)return o(e,i);const a=t.indexOf(":");if(a<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const s=t.substr(0,a+1);if(0===e.indexOf("//"))return s+o(e,i);let c;if(t.indexOf("//",a)===a+1){if(c=t.indexOf("/",a+3),c<0)return t.length>a+3?t+"/"+o(e,i):s+o(e,i)}else if(c=t.indexOf("/",a+1),c<0)return s+o(e,i);if(0===e.indexOf("/"))return t.substr(0,c)+n(e);let l=t.substr(c);const u=l.lastIndexOf("/");return u>=0&&u<l.length-1&&(l=l.substr(0,u+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=n(e=l+e),t.substr(0,c)+e},t.removeDotSegments=n,t.removeDotSegmentsOfPath=o},function(e,t,r){"use strict";e.exports=function(e){return function e(t){if(null===t||"object"!=typeof t||null!=t.toJSON)return JSON.stringify(t);if(Array.isArray(t)&&0===t.length)return"[]";if(Array.isArray(t)&&1===t.length)return"["+e(t[0])+"]";if(Array.isArray(t))return"["+t.reduce((t,r,n)=>(t=1===n?e(t):t)+","+e(r))+"]";const r=Object.keys(t);if(0===r.length)return"{}";if(1===r.length)return"{"+e(r[0])+":"+e(t[r[0]])+"}";return"{"+r.sort().reduce((r,n,o)=>(r=1===o?e(r)+":"+e(t[r]):r)+","+e(n)+":"+e(t[n]))+"}"}(e)}},function(e,t,r){var n=r(19),o=r(13),i=r(20),a=r(14),s=r(21),c=r(22);function l(){}l.namedNode=function(e){return new a(e)},l.blankNode=function(e){return new n(e)},l.literal=function(e,t){return"string"==typeof t?-1===t.indexOf(":")?new i(e,t):new i(e,null,l.namedNode(t)):new i(e,null,t)},l.defaultGraph=function(){return l.defaultGraphInstance},l.variable=function(e){return new c(e)},l.triple=function(e,t,r){return l.quad(e,t,r)},l.quad=function(e,t,r,n){return new s(e,t,r,n||l.defaultGraphInstance)},l.defaultGraphInstance=new o,e.exports=l},function(e,t){function r(e){this.value=e||"b"+ ++r.nextId}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType="BlankNode",r.nextId=0,e.exports=r},function(e,t,r){var n=r(14);function o(e,t,r){this.value=e,this.datatype=o.stringDatatype,this.language="",t?(this.language=t,this.datatype=o.langStringDatatype):r&&(this.datatype=r)}o.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)},o.prototype.termType="Literal",o.langStringDatatype=new n("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),o.stringDatatype=new n("http://www.w3.org/2001/XMLSchema#string"),e.exports=o},function(e,t,r){var n=r(13);function o(e,t,r,o){this.subject=e,this.predicate=t,this.object=r,this.graph=o||new n}o.prototype.equals=function(e){return!!e&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)},e.exports=o},function(e,t){function r(e){this.value=e}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType="Variable",e.exports=r},function(e,t,r){"use strict";r.r(t);const n={};async function o(e){const t=[];var r,n=!0,o=!1;try{for(var i,a,s=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(e);n=(i=await s.next()).done,a=await i.value,!n;n=!0){const e=a;t.push(e)}}catch(e){o=!0,r=e}finally{try{n||null==s.return||await s.return()}finally{if(o)throw r}}return t}function i(e){return e[Symbol.asyncIterator]().next().then(e=>e.value)}class a{constructor(e,...t){this._isAsync=e.async,this._isFunction=e.function,this._dataProperties=t}static sync(...e){return new a({async:!1},...e)}static syncFunction(...e){return new a({async:!1,function:!0},...e)}static async(...e){return new a({async:!0},...e)}static asyncFunction(...e){return new a({async:!0,function:!0},...e)}handle(e){return this._isFunction?()=>this._resolveDataPath(e):this._resolveDataPath(e)}_resolveDataPath(e){return this._isAsync?this._resolveAsyncDataPath(e):this._resolveSyncDataPath(e)}_resolveSyncDataPath(e){for(const t of this._dataProperties)e=e&&e[t];return e}async _resolveAsyncDataPath(e){for(const t of this._dataProperties)e=e&&await e[t];return e}}function s(e){return{then:c(e)}}function c(e){return(t,r)=>e().then(t,r)}function l(e){return"function"==typeof e&&(e=function(e){const t=[];let r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){let e=0;return{async next(){if(e<t.length)return t[e++];if(!r)return{done:!0};const n=t[e++]=r.next();return(await n).done&&(r=null),n}}}}}(e())),{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator](),get then(){return c(()=>i(this))},catch(e){return this.then(null,e)},finally(e){return this.then().finally(e)}}}var u=r(0);function f(e){return e&&"function"==typeof e[Symbol.asyncIterator]}function d(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&"function"!=typeof e.then&&"string"!=typeof e.termType&&!f(e)}function p(e,t=!1){const r=e.some(d);if(r&&!t&&1!==e.length)throw new Error(`Expected only 1 plain object, but got ${e.length} arguments`);return r}function y(e){if("string"==typeof e)return Object(u.literal)(e);if(e&&"string"==typeof e.termType)return e;throw new Error("Invalid object: "+e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v{constructor(e,t){this._mutationType=e,this._allowZeroArgs=t}handle(e,t){return(...r)=>{if(!this._allowZeroArgs&&!r.length)throw new Error("Mutation cannot be invoked without arguments");const n=s(()=>this.createMutationExpressions(e,t,r));return e.extendPath({mutationExpressions:n})}}async createMutationExpressions(e,t,r){if(!p(r))return[await this.createMutationExpression(e,t,r)];const n=Object.entries(r[0]),o=await Promise.all(n.map(([r,n])=>{return this.createMutationExpression(e,t[r],(o=n,Array.isArray(o)?o:o?[o]:[]));var o}));return[0===o.length?{}:w(w({},o[0]),{},{predicateObjects:(i=o.map(e=>e.predicateObjects),[].concat(...i))})];var i}async createMutationExpression(e,t,r){const n=await t.pathExpression;if(!Array.isArray(n))throw new Error(e+" has no pathExpression property");if(n.length<2)throw new Error(e+" should at least contain a subject and a predicate");const{predicate:o,reverse:i}=n[n.length-1];if(!o)throw new Error("Expected predicate in "+e);const a=await this.extractObjects(e,t,r);return null!==a&&0===a.length?{}:{mutationType:this._mutationType,conditions:n.slice(0,-1),predicateObjects:[{predicate:o,reverse:i,objects:a}]}}async extractObjects(e,t,r){if(0===r.length)return null;const n=[];for(const e of r)f(e)?n.push(...await o(e)):n.push(await e);return n.map(y)}}class m extends v{constructor(){super("DELETE",!0)}}function g(e){return new I(e)}function E(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof I;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function I(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(E.prototype[Symbol.asyncIterator]=function(){return this}),E.prototype.next=function(e){return this._invoke("next",e)},E.prototype.throw=function(e){return this._invoke("throw",e)},E.prototype.return=function(e){return this._invoke("return",e)};const O=/(SELECT\s+)(\?\S+)/,_=/\}[^}]*$/;function x(e){const{termType:t,value:r}=e;switch(t){case"NamedNode":return r;case"Literal":const{language:n,datatype:o}=e;return`${t}|${n}|${o.value}|${r}`;default:return`${t}|${r}`}}var R=r(2);function A(e){return new T(e)}function S(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof T;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function T(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(S.prototype[Symbol.asyncIterator]=function(){return this}),S.prototype.next=function(e){return this._invoke("next",e)},S.prototype.throw=function(e){return this._invoke("throw",e)},S.prototype.return=function(e){return this._invoke("return",e)};class C{constructor(e="ASC"){this.order=e}handle(e,t){return(...r)=>{if(0===r.length)return t;const[n,...o]=r,{predicate:i}=t[n],a={property:n,predicate:i,sort:this.order},s=e.extendPath(a);return 0===o.length?s:s.sort(...o)}}}const N=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,P=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,j={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class D{async handle(e,t){const r=await t.mutationExpressions;if(Array.isArray(r)&&r.length)return r.map(e=>this.mutationExpressionToQuery(e)).filter(Boolean).join("\n;\n");const n=await t.pathExpression;if(!Array.isArray(n))throw new Error(e+" has no pathExpression property");return this.pathExpressionToQuery(e,t,n)}pathExpressionToQuery(e,t,r){if(r.length<2&&!e.finalClause)throw new Error(e+" should at least contain a subject and a predicate");let n="?subject",o=[],i=[];r.length>1&&(n=this.createVar(e.property),({queryVar:n,sorts:o,clauses:i}=this.expressionToTriplePatterns(r,n))),e.finalClause&&i.push(e.finalClause(n));const a=`SELECT ${e.distinct?"DISTINCT ":""}${e.select?e.select:n}`,s=` WHERE {\n  ${i.join("\n  ")}\n}`,c=o.map(({order:e,variable:t})=>`${e}(${t})`);return`${a}${s}${0===c.length?"":"\nORDER BY "+c.join(" ")}`}mutationExpressionToQuery({mutationType:e,conditions:t,predicateObjects:r}){if(!e||!t||r&&0===r.length)return"";const n={};let o,i;if(1===t.length)o=this.termToString(t[0].subject),i=[];else{const e=t[t.length-1].predicate;o=this.createVar(e.value,n),({queryVar:o,clauses:i}=this.expressionToTriplePatterns(t,o,n))}const a=[];for(const{predicate:e,reverse:t,objects:i}of r){const r=i?i.map(e=>this.termToString(e)):[this.createVar(e.value,n)];a.push(...this.triplePatterns(o,e,r,t))}const s=`{\n  ${a.join("\n  ")}\n}`;return 0===i.length?`${e} DATA ${s}`:`${e} ${s} WHERE {\n  ${i.join("\n  ")}\n}`}expressionToTriplePatterns([e,...t],r,n={}){const o=t.length-1,i=[],a=[];let s=this.termToString(function(e){if("BlankNode"!==e.termType)return e;e.skolemized||(e.skolemized=Object(u.namedNode)("urn:ldflex:sk"+V++));return e.skolemized}(e.subject)),c=s,l=!1;return t.forEach((e,t)=>{const u=s,{predicate:f,reverse:d,sort:p,values:y}=e;let h;if(y&&y.length>0){if(!l)throw new Error("Specifying fixed values is not allowed here");h=y.map(this.termToString),l=!1}else s=t<o?this.createVar("v"+t,n):r,h=[s],l=!0;i.push(...this.triplePatterns(u,f,h,d)),p?(a.push({variable:s,order:p}),s=c):c=s}),{queryVar:c,sorts:a,clauses:i}}createVar(e="",t){let r=0,n="?"+(e.match(/[a-z0-9]*$/i)[0]||"result");if(t){for(e=n;t[n];)n=`${e}_${r++}`;t[n]=!0}return n}termToString(e){let{value:t}=e;switch(N.test(t)&&(t=t.replace(P,L)),e.termType){case"NamedNode":return`<${t}>`;case"BlankNode":return"_:"+t;case"Literal":let r="";return e.language?r="@"+e.language:"http://www.w3.org/2001/XMLSchema#string"!==e.datatype.value&&(r=`^^<${e.datatype.value}>`),`"${t}"${r}`;default:throw new Error("Could not convert a term of type "+e.termType)}}triplePatterns(e,t,r,n=!1){let o=[e];n&&([o,r]=[r,o]);const i=r.join(", ");return o.map(e=>`${e} <${t.value}> ${i}.`)}}function L(e){let t=j[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}let V=0;var k={__esModule:()=>{},then:new class{handle({subject:e},t){return e?e.then&&c(()=>t.subject):c(()=>i(t.results))}},[Symbol.asyncIterator]:new class{handle({subject:e},t){return e?()=>{return e=t.subject,{async next(){if(e!==n){const t=await e;return e=n,{value:t}}return{done:!0}}};var e}:()=>t.results[Symbol.asyncIterator]()}},get:new class{handle(e,t){return(...e)=>this.readProperties(t,1===e.length?e[0]:e,!0)}async readProperties(e,t,r=!1){if(f(t)&&(t=await o(t)),Array.isArray(t)){const r=t.map(t=>this.readProperties(e,t));return Promise.all(r)}if(d(t)){const r=Object.keys(t);t=r.map(e=>t[e]||e);const n={},o=await this.readProperties(e,t);for(let e=0;e<r.length;e++)n[r[e]]=o[e];return n}const n=e[t];return r?[n]:n}},subject:new class{handle(e){let{subject:t,parent:r}=e;for(;!t&&r;)({subject:t,parent:r}=r);return t?Promise.resolve(t).then(t=>e.extendPath({subject:t},null)):void 0}},predicate:new class{handle(e){const{predicate:t}=e;return t?Promise.resolve(t).then(t=>e.extendPath({subject:t},null)):void 0}},properties:new class{handle(e,t){return l(this._handle(e,t))}_handle(e,t){return(r=function*(){const r=(yield A(e.settings.parsedContext))||{},n=new R.JsonLdContextNormalized(r);var o,i=!0,a=!1;try{for(var s,c,l=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(t.predicates);i=(s=yield A(l.next())).done,c=yield A(s.value),!i;i=!0){const e=c;yield n.compactIri(""+(yield A(e)),!0)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||(yield A(l.return()))}finally{if(a)throw o}}},function(){return new S(r.apply(this,arguments))})();var r}},predicates:new class{handle(e){return e.extendPath({distinct:!0,select:"?predicate",finalClause:e=>e+" ?predicate ?object.",property:e.property})}},pathExpression:new class{async handle(e){const t=[];let r=e;for(;r.parent;)r.predicate&&t.unshift({predicate:await r.predicate,reverse:await r.reverse,sort:r.sort,values:r.values}),r=r.parent;if(!r.subject)throw new Error("Expected root subject in "+r);const n=await r.subject;return t.unshift({subject:n}),t}},sparql:new D,subjects:new class{handle(e){return e.extendPath({distinct:!0,select:"?subject",finalClause:()=>"?subject ?predicate ?object.",property:e.property})}},results:new class{handle(e,t){var r,n=this;return(r=function*(){const r=yield g(e.resultsCache);if(r){for(const e of r)yield e;return}const{queryEngine:o}=e.settings;if(!o)throw new Error(e+" has no queryEngine setting");const i=yield g(t.sparql);if(null==i)throw new Error(e+" has no sparql property");if(0!==i.length){var a,s=!0,c=!1;try{for(var l,u,f=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(o.execute(i));s=(l=yield g(f.next())).done,u=yield g(l.value),!s;s=!0){const t=u;yield n.extractTerm(t,e)}}catch(e){c=!0,a=e}finally{try{s||null==f.return||(yield g(f.return()))}finally{if(c)throw a}}}},function(){return new E(r.apply(this,arguments))})()}extractTerm(e,t){if(1!==e.size)throw new Error("Only single-variable queries are supported");const r=e.values().next().value;return t.extendPath({subject:r},null)}},sort:new C("ASC"),sortDesc:new C("DESC"),preload:new class{handle(e,t){return async(...r)=>{if(r.length>0){const n=await Promise.all(r.map(async e=>(await t[e].predicate).value));e.resultsCache=await this.createResultsCache(n,e,t)}return t}}async createResultsCache(e,t,r){const{query:n,vars:o,resultVar:i}=await this.createQuery(e,r),{settings:{queryEngine:a}}=t,s=a.execute(n),c={},l={};var u,f=!0,d=!1;try{for(var p,y,h=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(s);f=(p=await h.next()).done,y=await p.value,!f;f=!0){const r=y,n=r.get(i),a=x(n);if(!(a in c)){const r=l[a]={};for(const t of e)r[t]=[];const o={subject:n,propertyCache:r};c[a]=t.extendPath(o,null)}const s=l[a];for(let n=0;n<o.length;n++){const i=r.get(o[n]);if(i){const r=t.extendPath({subject:i},null);s[e[n]].push(r)}}}}catch(e){d=!0,u=e}finally{try{f||null==h.return||await h.return()}finally{if(d)throw u}}return Object.values(c)}async createQuery(e,t){const r=await t.sparql,n=O.exec(r);if(!n)throw new Error("Unexpected path query: "+r);const o=n[2],i=e.map((e,t)=>"?preload_"+t),a=e.map((e,t)=>`    { ${o} <${e}> ${i[t]}. }`).join("\n    UNION\n");return{query:r.replace(O,"$1$2 "+i.join(" ")).replace(_,`  OPTIONAL {\n${a}\n  }\n$&`),vars:i,resultVar:o}}},mutationExpressions:new class{async handle(e){const t=[];let r=e;for(;r;)r.mutationExpressions&&t.unshift(...await r.mutationExpressions),r=r.parent;return t}},add:new class extends v{constructor(){super("INSERT",!1)}},set:new class extends v{handle(e,t){return(...e)=>(p(e)?Object.keys(e[0]).reduce((e,t)=>e.delete({[t]:[]}),t):t.delete()).add(...e)}},replace:new class{handle(e,t){return function(e,...r){if(!e||!r.length)throw new Error("Replacing values requires at least two arguments, old value followed by all new values");return t.delete(e).add(...r)}}},delete:new m,termType:$("termType"),value:$("value"),datatype:$("datatype"),language:$("language"),canonical:$("canonical"),equals:a.sync("subject","equals"),toString:a.syncFunction("subject","value"),toPrimitive:a.syncFunction("subject","value"),toArray:new class{handle(e,t){return async e=>{const r=[];if(f(t)){"function"!=typeof e&&(e=e=>e);let l=0;var n,o=!0,i=!1;try{for(var a,s,c=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(t);o=(a=await c.next()).done,s=await a.value,!o;o=!0){const t=s;r.push(await e(t,l++))}}catch(e){i=!0,n=e}finally{try{o||null==c.return||await c.return()}finally{if(i)throw n}}}return r}}},termTypes:U((e,t)=>t.toArray(e=>e.termType)),values:U((e,t)=>t.toArray(e=>e.value)),datatypes:U((e,t)=>t.toArray(e=>e.datatype)),languages:U((e,t)=>t.toArray(e=>e.language)),resolve:new class{handle(e,t){return(e="",r=t)=>{const n='"use strict";return ldflex'+e.replace(/^(https?:\/\/[^()[\]'"]+)$/,'["$1"]').replace(/^(?=[a-z$_])/i,".").replace(/\[([^'"`\](]*)\]/g,'["$1"]');let o;try{o=Function("ldflex",n)}catch({message:t}){throw new Error(`Expression "${e}" is invalid: ${t}`)}return o(r)}}}};function U(e){return{handle:e}}function $(e){return U((t,r)=>{const{subject:n}=t,o=n&&n[e];return void 0!==o?o:r.then(t=>t&&t[e])})}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const B=Object.create(null);class q{constructor({handlers:e=B,resolvers:t=[]}={}){this._handlers=e,this._resolvers=t}createPath(e={},t){void 0===t&&([t,e]=[e,{}]);const{apply:r}=t,n=F(t,["apply"]),o=r?Object.assign((function(...e){return r(e,o,i)}),n):n,i=new Proxy(o,this);if(o.proxy=i,o.settings=e,!o.extendPath){const t=this;o.extendPath=function r(n,o=this){return t.createPath(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({parent:o,extendPath:r},n))}}return i}get(e,t){const r=this._handlers[t];if(r&&"function"==typeof r.handle)return r.handle(e,e.proxy);for(const r of this._resolvers)if(r.supports(t))return r.resolve(t,e,e.proxy)}}class K{constructor(...e){this._context=Promise.resolve({}),this.extendContext(...e)}supports(e){return"string"==typeof e}resolve(e,t){const r=s(()=>this.expandProperty(e)),n=s(()=>this._context.then(({contextRaw:t})=>t[e]&&t[e]["@reverse"])),o=this.getResultsCache(t,r,n),i={property:e,predicate:r,resultsCache:o,reverse:n,apply:this.apply};return t.extendPath(i)}apply(e,t,r){if(0===e.length)throw new Error("Specify at least one value for the property");return t.values=e.map(y),r}async expandProperty(e){e=e.replace(/^([a-z][a-z0-9]*)[_$]/i,"$1:");const t=(await this._context).expandTerm(e,!0);if(!R.Util.isValidIri(t))throw new Error(`The JSON-LD context cannot expand the '${e}' property`);return Object(u.namedNode)(t)}async extendContext(...e){await(this._context=this._context.then(({contextRaw:t})=>(new R.ContextParser).parse([t,...e])))}getResultsCache(e,t,r){let{propertyCache:n}=e;return n&&s(async()=>(n=!await r&&await n,n&&n[(await t).value]))}}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class W{constructor(e,t){this._settings=e=X({},e),this._data=t=X({},t);const r=e.handlers||k;for(const e in r)r[e]=Y(r[e]);for(const e of Object.getOwnPropertySymbols(r))r[e]=Y(r[e]);const n=(e.resolvers||[]).map(H);e.context?(n.push(new K(e.context)),e.parsedContext=(new R.ContextParser).parse(e.context).then(({contextRaw:e})=>e)):e.context=e.parsedContext={},this._pathProxy=new q({handlers:r,resolvers:n}),delete e.handlers,delete e.resolvers}create(e={},t){return t||([t,e]=[e,null]),this._pathProxy.createPath(Object.assign(Object.create(null),this._settings,e),Object.assign(Object.create(null),this._data,t))}}function Y(e){return"function"==typeof e.handle?e:{handle:e}}function H(e){return"function"==typeof e.resolve?e:{supports:Q,resolve:e}}function Q(){return!0}W.defaultHandlers=k;var Z=r(1);function ee(e){return new ne(e)}function te(e){return function(){return new re(e.apply(this,arguments))}}function re(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof ne;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function ne(e){this.wrapped=e}function oe(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}"function"==typeof Symbol&&Symbol.asyncIterator&&(re.prototype[Symbol.asyncIterator]=function(){return this}),re.prototype.next=function(e){return this._invoke("next",e)},re.prototype.throw=function(e){return this._invoke("throw",e)},re.prototype.return=function(e){return this._invoke("return",e)};const{as:ie}=Z["@context"];class ae{constructor({activitiesPath:e="/public/activities"}={}){this.requireUser=!0,this.activitiesPath=e}handle(e,t){const r=this,{root:n}=t,{settings:{queryEngine:o}}=e;return(e=ie+"Like")=>l(te((function*(){let i;try{i=yield ee(n.user)}catch(e){if(r.requireUser)throw e;return}const a=yield ee(n.user.pim$storage),s=new URL(r.activitiesPath,a||i).href,c=[],l=Object(u.namedNode)(i);e=Object(u.namedNode)(e);var f,d=!0,p=!1;try{for(var y,h,w=oe(t);d=(y=yield ee(w.next())).done,h=yield ee(y.value),!d;d=!0){const t=h;if("NamedNode"===t.termType){const n={actor:l,type:e,object:t};var b,v=!0,m=!1;try{for(var g,E,I=oe(r.createResults(n,s,o));v=(g=yield ee(I.next())).done,E=yield ee(g.value),!v;v=!0){const e=E;c.push(e)}}catch(e){m=!0,b=e}finally{try{v||null==I.return||(yield ee(I.return()))}finally{if(m)throw b}}}}}catch(e){p=!0,f=e}finally{try{d||null==w.return||(yield ee(w.return()))}finally{if(p)throw f}}for(const e of yield ee(r.processResults(c,s,o)))yield n[e.value]})))}async processResults(e){return e}}const{termToString:se}=D.prototype;function ce(e,t){for(const r in t)e=e.replace(new RegExp("_:"+r,"g"),se(t[r]));return e}function le(...e){return{size:e.length,values:()=>({next:()=>({value:e.shift()})})}}function ue(e){return new de(e)}function fe(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof de;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function de(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(fe.prototype[Symbol.asyncIterator]=function(){return this}),fe.prototype.next=function(e){return this._invoke("next",e)},fe.prototype.throw=function(e){return this._invoke("throw",e)},fe.prototype.return=function(e){return this._invoke("return",e)};var pe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ye=new Uint8Array(16);function he(){if(!pe)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(ye)}for(var we=[],be=0;be<256;++be)we[be]=(be+256).toString(16).substr(1);var ve=function(e,t){var r=t||0,n=we;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")};var me=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||he)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||ve(o)};function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Oe;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function Oe(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(Ie.prototype[Symbol.asyncIterator]=function(){return this}),Ie.prototype.next=function(e){return this._invoke("next",e)},Ie.prototype.throw=function(e){return this._invoke("throw",e)},Ie.prototype.return=function(e){return this._invoke("return",e)};const{xsd:_e}=Z["@context"];function xe(e){return new Ae(e)}function Re(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Ae;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function Ae(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(Re.prototype[Symbol.asyncIterator]=function(){return this}),Re.prototype.next=function(e){return this._invoke("next",e)},Re.prototype.throw=function(e){return this._invoke("throw",e)},Re.prototype.return=function(e){return this._invoke("return",e)};const Se=["?subject","?predicate","?object"];class Te{constructor(e,t){this._paths=e,this._source=t}supports(e){return"string"==typeof e}resolve(e,{settings:t}){return this._createSubjectPath(Object(u.namedNode)(e),t)}_createSubjectPath(e,{createQueryEngine:t}){const r=t(this._source||Promise.resolve(e).catch(()=>null));return this._paths.create({queryEngine:r},{subject:e})}}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class je{constructor(e){this._paths=e}handle({settings:e}){return t=>new W({handlers:Ne({},k),resolvers:[new Te(this._paths,t)]}).create(e,{})}}var De=r(5),Le=r.n(De);class Ve extends Te{handle({settings:e}){const t=this.getWebId().then(u.namedNode);return this._createSubjectPath(t,e)}async getWebId(){const e=await Le.a.currentSession();if(!e)throw new Error("Cannot resolve user path: no user logged in");return e.webId}}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){$e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{as:Ge}=Z["@context"],Me=new class extends K{constructor(e){super(e);const t=this._exposedContext=Object.create(e["@context"]);Object.defineProperty(t,"extend",{value:(...e)=>this.extendContext(...e)}),Object.defineProperty(t,"then",{value:(e,t)=>this._context.then(e=>e.contextRaw).then(e,t)})}handle(){return this._exposedContext}}(Z),Fe=Ue(Ue({},k),{},{delete:new class extends m{async extractObjects(e,t,r){const n=await super.extractObjects(e,t,r),o=[];var i,a=!0,s=!1;try{for(var c,l,u=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(t);a=(c=await u.next()).done,l=await c.value,!a;a=!0){const e=l;"BlankNode"!==e.termType&&o.push(e)}}catch(e){s=!0,i=e}finally{try{a||null==u.return||await u.return()}finally{if(s)throw i}}return n?o.filter(e=>n.some(t=>t.equals(e))):o}},findActivity:new class extends ae{constructor(...e){super(...e),this.requireUser=!1}createResults(e,t,r){return(n=function*(){const n=ce("SELECT ?activity WHERE {\n  ?activity a _:type;\n      <https://www.w3.org/ns/activitystreams#actor> _:actor;\n      <https://www.w3.org/ns/activitystreams#object> _:object.\n}\n",e);var o,i=!0,a=!1;try{for(var s,c,l=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(r.execute(n,t));i=(s=yield ue(l.next())).done,c=yield ue(s.value),!i;i=!0){const e=c;yield e.values().next().value}}catch(e){a=!0,o=e}finally{try{i||null==l.return||(yield ue(l.return()))}finally{if(a)throw o}}},function(){return new fe(n.apply(this,arguments))})();var n}},likes:(e,t)=>t.findActivity(Ge+"Like"),dislikes:(e,t)=>t.findActivity(Ge+"Dislike"),follows:(e,t)=>t.findActivity(Ge+"Follow"),createActivity:new class extends ae{createResults(e,t){return(r=function*(){const r=Object(u.namedNode)(new URL("#"+me(),t).href),n=Object(u.literal)((new Date).toISOString(),_e+"dateTime"),o=ce("_:id a _:type;\n    <https://www.w3.org/ns/activitystreams#actor> _:actor;\n    <https://www.w3.org/ns/activitystreams#object> _:object;\n    <https://www.w3.org/ns/activitystreams#published> _:published.\n",e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:r,published:n},e));yield{id:r,insert:o}},function(){return new Ie(r.apply(this,arguments))})();var r}async processResults(e,t,r){const n=`INSERT {\n${e.map(e=>e.insert).join("")}}`;return await r.executeUpdate(n,t).next(),e.map(e=>e.id)}},like:(e,t)=>()=>t.createActivity(Ge+"Like"),dislike:(e,t)=>()=>t.createActivity(Ge+"Dislike"),follow:(e,t)=>()=>t.createActivity(Ge+"Follow"),deleteActivity:new class extends ae{createResults(e,t,r){return(n=function*(){const n=ce("SELECT ?subject ?predicate ?object WHERE {\n  ?subject a _:type;\n      <https://www.w3.org/ns/activitystreams#actor> _:actor;\n      <https://www.w3.org/ns/activitystreams#object> _:object.\n  ?subject ?predicate ?object.\n}\n",e);var o,i=!0,a=!1;try{for(var s,c,l=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(r.execute(n,t));i=(s=yield xe(l.next())).done,c=yield xe(s.value),!i;i=!0){const e=c,t=Se.map(t=>se(e.get(t)));yield t.join(" ")+".\n"}}catch(e){a=!0,o=e}finally{try{i||null==l.return||(yield xe(l.return()))}finally{if(a)throw o}}},function(){return new Re(n.apply(this,arguments))})();var n}async processResults(e,t,r){const n=`DELETE {\n${e.join("")}}`;return await r.executeUpdate(n,t).next(),[]}},unlike:(e,t)=>()=>t.deleteActivity(Ge+"Like"),undislike:(e,t)=>()=>t.deleteActivity(Ge+"Dislike"),unfollow:(e,t)=>()=>t.deleteActivity(Ge+"Follow")});function Be(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Ke;Promise.resolve(s?a.wrapped:a).then((function(e){s?n("return"===t?"return":"next",e):o(i.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function qe(e){return new Ke(e)}function Ke(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(Be.prototype[Symbol.asyncIterator]=function(){return this}),Be.prototype.next=function(e){return this._invoke("next",e)},Be.prototype.throw=function(e){return this._invoke("throw",e)},Be.prototype.return=function(e){return this._invoke("return",e)};class Je{constructor(e,t){this._source=this.getUpdateSource(e),this._source.catch(()=>null),this._engine=t}execute(e,t){var r,n=this;return(r=function*(){yield*function(e,t){var r={},n=!1;function o(r,o){return n=!0,o=new Promise((function(t){t(e[r](o))})),{done:!1,value:t(o)}}return"function"==typeof Symbol&&Symbol.iterator&&(r[Symbol.iterator]=function(){return this}),r.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return n?(n=!1,e):o("return",e)}),r}(function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(/^\s*(?:INSERT|DELETE)/i.test(e)?n.executeUpdate(e,t):n._engine.execute(e,t)),qe)},function(){return new Be(r.apply(this,arguments))})()}executeUpdate(e,t){let r=!1;return{next:async()=>{if(r)return{done:r};r=!0;const n=await(t?this.getUpdateSource(t):this._source),{ok:o,status:i,statusText:a}=await Le.a.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e});if(!o)throw new Error(`Update query failed (${i}): ${a}`);return await this.clearCache(n),{value:le({ok:o})}},return:Xe,throw:Xe,[Symbol.asyncIterator](){return this}}}async getUpdateSource(e){let t=await e;if(t instanceof URL?t=t.href:t&&"string"==typeof t.value&&(t=t.value),"string"==typeof t){if(!/^https?:\/\//.test(t))throw new Error("Can only update an HTTP(S) document.");return t.replace(/#.*/,"")}if(Array.isArray(t)){if(t=await Promise.all(t.map(e=>this.getUpdateSource(e))),t=[].concat(...t).filter(e=>!!e),1!==t.length)throw new Error("Can only update a single source.");return t[0]}throw new Error("Unsupported source: "+t)}clearCache(e){return this._engine.clearCache(e)}}function Xe(){}var ze=r(4);var We=class{constructor(e){this._defaultStore=this.readSources(e),this._defaultStore.catch(()=>null)}async*execute(e,t){/^\s*(?:INSERT|DELETE)/i.test(e)&&(yield*this.executeUpdate(e,t));const r=Object(ze.SPARQLToQuery)(e,!0,Object(ze.graph)()),n=await(t?this.readSources(t):this._defaultStore);n.fetcher=null;const o=[];await new Promise((e,t)=>{n.query(r,e=>o.push(e),null,r=>r?t(r):e(o))});const i=new Set(r.vars.map(e=>"?"+e.value));for(const e of o){const t=Object.entries(e).filter(([e])=>i.has(e));yield new Map(t)}}async*executeUpdate(e,t){throw new Error("SPARQL UPDATE queries are unsupported, received: "+e)}async readSources(e,t=Object(ze.graph)()){let r=await e;if(r)if(r instanceof URL?r=r.href:"NamedNode"===r.termType&&(r=r.value),"string"==typeof r){const e=r.replace(/#.*/,""),n=new ze.Fetcher(t);await n.load(e)}else if(Array.isArray(r))await Promise.all(r.map(e=>this.readSources(e,t)));else{if("function"!=typeof r.match)throw new Error("Unsupported source: "+r);{const e=r.match(null,null,null,null);await new Promise((r,n)=>{function o(e){try{t.add(e.subject,e.predicate,e.object,e.graph)}catch(e){i(e)}}function i(t){return e.removeListener("data",o),e.removeListener("end",i),e.removeListener("error",i),t?n(t):r(null)}e.on("data",o),e.on("end",i),e.on("error",i)})}}return t}async clearCache(e){}};t.default=new function(e){let t=null;const r=new W({handlers:Ue(Ue({},Fe),{},{root:()=>t}),resolvers:[Me]});return t=new W(Ue({handlers:Ue(Ue({},k),{},{from:new je(r),user:new Ve(r),clearCache:({settings:e})=>t=>e.createQueryEngine().clearCache(t),context:Me}),resolvers:[new Te(r)]},e)).create(),t}({createQueryEngine:e=>new Je(e,new We(e))})}]).default;
//# sourceMappingURL=solid-query-ldflex.rdflib.js.map